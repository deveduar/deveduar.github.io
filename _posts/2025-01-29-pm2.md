---
date: 2025-01-29 19:26
title: PM2
tags:
  - PM2
  - python
  - backend
keywords:
source:
status: üåü
Parent: "[[Area-Prog]]"
cssclasses:
  - hide-embedded-header1
  - wide
categories:
  - Backend
public_note: "true"
category: Backend
---
# PM2
``$= dv.current().file.tags.join(" ")``

- [nodejs](/backend/node-js/)
- gestion de procesos
## Introducci√≥n a PM2
PM2 es un **gestor de procesos para Node.js** que permite ejecutar aplicaciones en **producci√≥n**, ofreciendo funcionalidades de **monitoreo**, **balanceo de carga**, **reinicio autom√°tico** y **gesti√≥n de cl√∫steres**. Es ideal para aplicaciones **backend** que requieren alta disponibilidad y escalabilidad.

## Instalaci√≥n
Para instalar PM2 de forma global:
{% raw %}
```bash
npm install pm2@latest -g
```
{% endraw %}`

Verificar la instalaci√≥n:

{% raw %}
```bash
pm2 -v
```
{% endraw %}

## Comandos b√°sicos de PM2

* **Iniciar una aplicaci√≥n**

{% raw %}
```bash
pm2 start app.js
```
{% endraw %}

* **Listar procesos activos**

{% raw %}
```bash
pm2 list
```
{% endraw %}

* **Ver logs**

{% raw %}
```bash
pm2 logs
```
{% endraw %}

* **Reiniciar un proceso**

{% raw %}
```bash
pm2 restart app.js
```
{% endraw %}

* **Detener un proceso**

{% raw %}
```bash
pm2 stop app.js
```
{% endraw %}

* **Eliminar un proceso**

{% raw %}
```bash
pm2 delete app.js
```
{% endraw %}

## Gesti√≥n de Cl√∫steres

PM2 soporta **Cluster Mode**, que permite ejecutar m√∫ltiples instancias de la aplicaci√≥n aprovechando todos los n√∫cleos del CPU.

{% raw %}
```bash
pm2 start app.js -i max
```
{% endraw %}

* `-i max`: ejecuta tantas instancias como n√∫cleos disponibles.
* Balanceo de carga interno para distribuir las solicitudes entre procesos.

M√°s informaci√≥n sobre cl√∫steres:

* PM2 - Cluster Mode
* Cluster - Node.js v23.0.0 Documentation

## Monitoreo y Logs

PM2 proporciona **monitoreo en tiempo real** de CPU, memoria y estado de procesos:

{% raw %}
```bash
pm2 monit
```
{% endraw %}

* Permite ver m√©tricas de uso de memoria y CPU.
* Integraci√≥n con logs de errores y salida est√°ndar.

## Configuraci√≥n avanzada

### Archivos de configuraci√≥n (`ecosystem.config.js`)

Permite definir m√∫ltiples aplicaciones y configuraciones de entorno:

{% raw %}
```javascript
module.exports = {
	apps: [
		{
			name: "app",
			script: "./app.js",
			instances: "max",
			exec_mode: "cluster",
			env: {
				NODE_ENV: "development"
			},
			env_production: {
				NODE_ENV: "production"
			}
		}
	]
};
```
{% endraw %}

* `instances`: n√∫mero de procesos (puede ser `max` para todos los n√∫cleos).
* `exec_mode`: `"fork"` o `"cluster"`.
* `env` y `env_production`: variables de entorno por entorno.

### Autorestart y Watch Mode

* Reinicio autom√°tico si la app falla:

{% raw %}
```bash
pm2 start app.js --watch
```
{% endraw %}

* Permite reiniciar autom√°ticamente cuando hay cambios en los archivos.

## Integraci√≥n con Node.js y Producci√≥n

* Usar PM2 es recomendable para aplicaciones [node.js](/backend/node-js/) en producci√≥n.
* Mejora la **resiliencia** de la app y la disponibilidad.
* Compatible con **Docker** y **sistemas de CI/CD**.

## Recursos y Lectura recomendada

* PM2 - Quick Start
* C√≥mo usar PM2 para gestionar una app en Node.js ‚Äì Clouding.io
* Aplicaci√≥n NodeJs en producci√≥n con pm2. - by Christian Jimenez - Medium
* [Backend](/uncategorized/backend/)
* [monitoreo](/uncategorized/monitoreo/)

# PM2 en 2025: Estado Actual y Alternativas

## ¬øQu√© es PM2 en 2025?
**PM2** sigue siendo uno de los gestores de procesos m√°s populares para aplicaciones [node.js](/backend/node-js/) en producci√≥n. Es un **process manager** para Node.js/Bun con balanceador de carga interno, gesti√≥n autom√°tica de reinicios, monitoreo y soporte para m√∫ltiples instancias/cluster. Est√° disponible v√≠a npm y es compatible con Linux, macOS y Windows, soportando m√∫ltiples versiones modernas de Node.js y tambi√©n Bun. [npmjs.com](https://www.npmjs.com/package/pm2)

### Caracter√≠sticas principales
- Ejecuci√≥n y monitoreo de procesos Node/Bun con CLI sencillo (`pm2 start app.js`) [GitHub PM2](https://github.com/Unitech/pm2)
- Modo **cluster** para aprovechar m√∫ltiples n√∫cleos CPU [PM2 Cluster Mode](https://pm2.keymetrics.io/docs/usage/cluster-mode/)
- Monitoreo en tiempo real (`pm2 monit`) [PM2 Monitoring](https://pm2.keymetrics.io/docs/usage/monitoring/)
- Gesti√≥n de logs (`pm2 logs`, an√°lisis y rotaci√≥n mediante m√≥dulos) [PM2 Logs](https://pm2.keymetrics.io/docs/usage/log-management/)
- Integraci√≥n con plataforma de monitoreo remota como **Keymetrics** [Keymetrics](https://keymetrics.io/)
- Scripts de arranque autom√°tico en sistemas (*startup scripts*) [PM2 Startup](https://pm2.keymetrics.io/docs/usage/startup/)

### Consideraciones pr√°cticas
- Aunque popular, en algunos casos **PM2 puede tener problemas de estabilidad** (bugs o gesti√≥n de memoria) en entornos con pocos recursos o hosting compartido sin soporte de systemd. [Reddit Node](https://www.reddit.com/r/node/comments/1ocoqxd/)
- Usuarios han reportado que puede ser m√°s pesado o menos simple que soluciones nativas del sistema operativo. [Reddit Node](https://www.reddit.com/r/node/comments/1jorbf8/)

## Alternativas a PM2 en 2025
### 1. Soluciones nativas / del sistema
- **systemd** (Linux): gestor de servicios nativo en la mayor√≠a de distribuciones. Asegura reinicio de servicios, logging integrados y menor complejidad de dependencias externas. Ideal para producci√≥n estable sin necesidad de dependencias de Node. [Medium PM2 Guide](https://medium.com/@chhavi.cw.1618/pm2-a-small-guide-to-process-management-b7a305ff9463)

### 2. Herramientas simples de Node
- **forever**: mantiene scripts Node en ejecuci√≥n continua, reinici√°ndolos tras fallos. M√°s simple y ligera, pero con **menos caracter√≠sticas que PM2** (sin clustering ni monitoreo avanzado). [StackShare](https://stackshare.io/pm2/alternatives)
- **supervisor** / **SupervisorD**: herramientas que permiten reinicio autom√°tico y observaci√≥n de cambios en archivos. Ideal para desarrollo o uso ligero, no tan avanzado para producci√≥n. [CompileNRun](https://www.compilenrun.com/docs/framework/express/express-deployment/express-process-management/)

### 3. Orquestadores y contenedores
- **Docker + systemd / Entrypoint scripts**: encapsular la app en contenedores y dejar que Docker (o Kubernetes m√°s all√° del proceso) gestione reinicios y escalado. En entornos con contenedores, **Docker o un orquestador (como K8s)** pueden reemplazar PM2 porque se encargan del ciclo de vida del proceso desde la capa de infraestructura. [Reddit Node](https://www.reddit.com/r/node/comments/1inn4a0/what_is_the_process_manager_for_node_apps_in_2025/)

### Comparaci√≥n de opciones
- **PM2**: robusto para Node.js, clustering, monitoreo integrado, capacidad program√°tica. Ideal para despliegues Node tradicionales. [npmjs.com](https://www.npmjs.com/package/pm2)
- **systemd**: m√°s estable y simple en servidores Linux, sin dependencias de Node. Mejor para producci√≥n sobria. [Medium PM2 Guide](https://medium.com/@chhavi.cw.1618/pm2-a-small-guide-to-process-management-b7a305ff9463)
- **forever**: adecuado para casos sencillos donde solo se necesita que un script se mantenga vivo. [StackShare](https://stackshare.io/pm2/alternatives)
- **supervisor**: √∫til en desarrollo o despliegues ligeros. [CompileNRun](https://www.compilenrun.com/docs/framework/express/express-deployment/express-process-management/)
- **Contenedores (Docker/K8s)**: cuando la arquitectura est√° CONTENERIZADA, normalmente **no se necesita PM2 dentro de los contenedores**, ya que la plataforma asume la gesti√≥n de procesos y estado. [Reddit Node](https://www.reddit.com/r/node/comments/1inn4a0/what_is_the_process_manager_for_node_apps_in_2025/)

## Ejemplo simplificado de uso de systemd como alternativa
{% raw %}
```

[Unit]
Description=API Node.js
After=network.target

[Service]
ExecStart=/usr/bin/node /var/www/app/index.js
Restart=always
User=nodeapp
Environment=NODE_ENV=production

[Install]
WantedBy=multi-user.target
```
{% endraw %}

> systemd ofrece un control m√°s directo al sistema operativo que muchos gestores de procesos escritos en Node.

## Recursos y lectura recomendada
- PM2 - Quick Start
- [Backend](/uncategorized/backend/)
- [node.js](/backend/node-js/)
- [monitoreo](/uncategorized/monitoreo/)
- Gu√≠as de configuraci√≥n de **systemd** para Node.js
- Comparativas modernas de gestores de procesos Node.js

# PM2 y Gesti√≥n de Procesos Node.js en 2025

## Gesti√≥n Avanzada de Procesos con PM2
- **Estrategias de escalado din√°mico**: PM2 permite ajustar el n√∫mero de instancias seg√∫n la carga usando scripts externos o integraciones con m√©tricas.  
- **Restart Policies**: adem√°s del reinicio autom√°tico, PM2 soporta reglas avanzadas para reiniciar solo en ciertos errores o condiciones de memoria.  
- **Ecosystem File Avanzado**: se pueden definir m√∫ltiples apps con variables de entorno, watch & ignore, cron restart y configuraci√≥n de log personalizada.  
- **Integraci√≥n con CI/CD**: PM2 puede integrarse con pipelines de despliegue continuo para reiniciar aplicaciones autom√°ticamente tras un `git pull` o build.  

## Monitorizaci√≥n Avanzada
- **Integraci√≥n con Keymetrics**: permite dashboards en tiempo real, alertas sobre memoria/CPU, m√©tricas de respuesta de endpoints y health checks.  
- **Logs estructurados**: PM2 soporta rotaci√≥n, compresi√≥n y exportaci√≥n de logs a servicios externos (ELK, Grafana Loki).  
- **Alertas y m√©tricas**: configuraci√≥n de alertas por uso excesivo de memoria, ca√≠das de procesos o errores cr√≠ticos.

## Alternativas Modernas y Comparaci√≥n 2025
- **systemd**: sigue siendo la alternativa m√°s estable y ligera para producci√≥n Linux.  
- **Docker y Kubernetes**: reemplazan parcialmente PM2 al manejar el ciclo de vida y escalado de contenedores.  
- **Bun PM2**: nuevas versiones soportan Bun, ampliando la compatibilidad con runtimes modernos.  
- **Herramientas ligeras**: forever, supervisor o nodemon para desarrollo r√°pido y despliegues simples.

## Seguridad y Buenas Pr√°cticas
- **Separaci√≥n de entornos**: usar variables de entorno para desarrollo, staging y producci√≥n.  
- **Control de usuario y permisos**: ejecutar PM2 bajo un usuario no root y limitar acceso a logs.  
- **Backup de configuraci√≥n**: versionar ecosystem.config.js y mantener scripts de startup en repositorios.  
- **Monitoreo de recursos**: revisar uso de memoria y CPU de cada proceso; evitar memory leaks en Node.js.  

## Casos de Uso Avanzados
- **Microservicios**: cada microservicio puede correr en PM2, con balanceo interno y monitoreo centralizado.  
- **APIs de alta concurrencia**: cluster mode distribuye carga y mejora latencia.  
- **Aplicaciones serverless locales**: PM2 puede simular escalado y disponibilidad antes de migrar a serverless.

## Recursos y Lectura Avanzada
- PM2 - Quick Start  
- PM2 - Cluster Mode  
- C√≥mo usar PM2 para gestionar una app en Node.js ‚Äì Clouding.io  
- Aplicaci√≥n NodeJs en producci√≥n con pm2. - by Christian Jimenez - Medium  
- [Keymetrics Dashboard](https://keymetrics.io/)  
- [PM2 GitHub](https://github.com/Unitech/pm2)  
- [Systemd para Node.js](https://medium.com/@chhavi.cw.1618/pm2-a-small-guide-to-process-management-b7a305ff9463)  

