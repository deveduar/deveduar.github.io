---
date: 2024-11-23 02:07
title: DDEV
tags:
keywords:
source:
status: üåü
Parent: "[[Area-Sistemas]]"
cssclasses:
public_note: "true"
category: DDEV
categories:
  - DDEV
  - devops
  - docker
  - hide-embedded-header1
  - wide
---
# DDEV
`$= dv.current().file.tags.join(" ")`

- [Virtualizacion](/devops/virtualizacion/)
- [PHP](/backend/php/)
- [Docker](/software%20engineering/docker/)
- Get Started with DDEV - DDEV Docs
- middleware de [apache](/backend/apache/)
- dev env

---

## Qu√© es DDEV

**DDEV** es una herramienta de desarrollo local basada en [Docker](/software%20engineering/docker/) que permite crear entornos reproducibles y estandarizados para aplicaciones web (especialmente [PHP](/backend/php/), Drupal, TYPO3, WordPress, Laravel o Symfony).  
Simplifica la configuraci√≥n del entorno y automatiza la gesti√≥n de contenedores, facilitando la colaboraci√≥n entre equipos y evitando el cl√°sico ‚Äúfunciona en mi m√°quina‚Äù.

---

## Caracter√≠sticas principales

- **Basado en contenedores:** Utiliza [Docker](/software%20engineering/docker/) para aislar servicios como base de datos, servidor web y PHP.
- **Configuraci√≥n r√°pida:** Un solo comando (`ddev start`) levanta el entorno completo.
- **Soporte multisitio:** Permite manejar varios proyectos simult√°neamente.
- **Certificados HTTPS autom√°ticos** generados mediante mkcert.
- **Integraci√≥n con herramientas de desarrollo** como Xdebug, MailHog, phpMyAdmin y Redis.
- **Persistencia de datos:** Las bases de datos se conservan entre reinicios de los contenedores.
- **Extensible:** Soporta *custom commands* y *hooks* en `config.yaml`.

---

## Arquitectura y componentes

- **Web container:** Basado en Apache o Nginx seg√∫n configuraci√≥n.
- **PHP container:** Ejecuta el int√©rprete PHP y proporciona acceso a Composer, Xdebug, etc.
- **DB container:** Generalmente usa MariaDB o MySQL, aunque se puede configurar PostgreSQL.
- **Router container:** Gestiona el enrutamiento y los certificados SSL locales.
- **CLI tools:** Permiten ejecutar comandos como `composer`, `npm`, o `drush` dentro del entorno.

---

## Flujo de trabajo b√°sico

1. Instalar DDEV (`brew install ddev` o binario directo).
2. Inicializar un proyecto:
	{% raw %}
```bash
	ddev config
	```
{% endraw %}
3. Levantar el entorno:
	{% raw %}
```bash
	ddev start
	```
{% endraw %}
4. Acceder al proyecto en el navegador:
	{% raw %}
```bash
	ddev launch
	```
{% endraw %}
5. Ejecutar comandos dentro del contenedor:
	{% raw %}
```bash
	ddev ssh
	```
{% endraw %}
6. Detener el entorno:
	{% raw %}
```bash
	ddev stop
	```
{% endraw %}

---

## Configuraci√≥n (`.ddev/config.yaml`)

El archivo principal de configuraci√≥n define el entorno y sus servicios:

{% raw %}
```yaml
name: mi-proyecto
type: php
docroot: web
php_version: "8.2"
router_http_port: "8080"
router_https_port: "8443"
webserver_type: apache-fpm
database:
  type: mariadb
  version: "10.11"
xdebug_enabled: true
```
{% endraw %}`

* `name`: Nombre del proyecto.
* `type`: Tipo de proyecto (php, drupal, typo3, etc.).
* `docroot`: Carpeta p√∫blica del proyecto.
* `php_version`: Versi√≥n de PHP a usar.
* `webserver_type`: Servidor web (apache-fpm o nginx-fpm).

---

## Integraci√≥n con Docker

DDEV no reemplaza a [Docker](/software%20engineering/docker/), sino que **lo abstrae**:

* Cada proyecto corre en una red separada de Docker.
* Los contenedores se definen din√°micamente a partir de plantillas de DDEV.
* Los vol√∫menes de datos se montan para persistencia (`db`, `uploads`, etc.).
* Se pueden usar im√°genes personalizadas o extender servicios con `docker-compose.*.yaml`.

Ejemplo de extensi√≥n personalizada:

{% raw %}
```yaml
# .ddev/docker-compose.redis.yaml
services:
  redis:
    image: redis:7
    container_name: ddev-${DDEV_SITENAME}-redis
    ports:
      - "6379"
```
{% endraw %}

---

## Comandos √∫tiles

| Comando                               | Descripci√≥n                                      |
| ------------------------------------- | ------------------------------------------------ |
| `ddev start`                          | Inicia los contenedores del proyecto             |
| `ddev stop`                           | Detiene los contenedores                         |
| `ddev restart`                        | Reinicia los contenedores                        |
| `ddev delete`                         | Elimina contenedores y vol√∫menes                 |
| `ddev ssh`                            | Abre una shell dentro del contenedor web         |
| `ddev exec <cmd>`                     | Ejecuta un comando dentro del contenedor         |
| `ddev import-db --src=db.sql.gz`      | Importa una base de datos                        |
| `ddev export-db --file=backup.sql.gz` | Exporta la base de datos                         |
| `ddev logs`                           | Muestra los logs de los contenedores             |
| `ddev describe`                       | Detalla la configuraci√≥n y servicios del entorno |

---

## Personalizaci√≥n avanzada

* **Hooks:** Automatiza acciones al iniciar o detener DDEV.

  {% raw %}
```yaml
  hooks:
    post-start:
      - exec: composer install
  ```
{% endraw %}

* **Custom Commands:** Crea comandos personalizados en `.ddev/commands/host/`.

  {% raw %}
```bash
  # .ddev/commands/host/clear-cache
  #!/bin/bash
  ddev exec drush cr
  ```
{% endraw %}

* **Extensiones:** A√±ade herramientas externas como Solr, Redis, Elasticsearch, MailHog, o Node.js.

---

## Casos de uso comunes

* Desarrollo local de CMS (Drupal, WordPress, TYPO3).
* Proyectos PHP modernos (Laravel, Symfony, CraftCMS).
* Testing y CI/CD local antes del despliegue.
* Clonaci√≥n de entornos productivos para debugging.

---

## Comparativa con otras herramientas

| Herramienta    | Base   | Config | Ecosistema          | Ideal para                           |
| -------------- | ------ | ------ | ------------------- | ------------------------------------ |
| DDEV           | Docker | YAML   | Fuerte (PHP)        | CMS, PHP apps                        |
| Lando          | Docker | YAML   | Amplio (JS, Python) | Fullstack local envs                 |
| Docker Compose | Docker | YAML   | Gen√©rico            | DevOps, infra                        |
| Vagrant        | VM     | Ruby   | Limitado            | Legacy o sistemas no containerizados |

---

## Buenas pr√°cticas

* Versionar `.ddev/config.yaml` pero **no** los archivos generados.
* Usar `.env` o `config.local.yaml` para variables sensibles.
* Mantener versiones consistentes de PHP y DB entre entornos.
* Hacer `ddev restart` tras cambios en configuraci√≥n.
* Limpiar contenedores antiguos con `ddev delete --omit-snapshot`.

---

## Recursos

* üìò [Get Started with DDEV - DDEV Docs](https://docs.ddev.com/en/stable/)
* üß∞ [Get Started with DDEV](https://ddev.readthedocs.io/en/latest/users/quickstart/)
* üêô [Repositorio oficial en GitHub](https://github.com/ddev/ddev)
* üéì [Drupal + DDEV Local Dev](https://www.drupal.org/docs/develop/local-server-setup/ddev)

# DDEV ‚Äî conceptos avanzados y pr√°cticas extendidas
`$= dv.current().file.tags.join(" ")`

- [Virtualizacion](/devops/virtualizacion/)
- [PHP](/backend/php/)
- [Docker](/software%20engineering/docker/)
- [apache](/backend/apache/)
- desarrollo local
- CI/CD
- DevOps

---

## Integraci√≥n con entornos externos

### Sincronizaci√≥n con entornos remotos
DDEV permite clonar y sincronizar entornos productivos o de staging para depuraci√≥n o desarrollo local:
{% raw %}
```bash
ddev pull database
ddev pull files
```
{% endraw %}`

Estas operaciones dependen de *providers* configurados en `.ddev/providers/`, como `platform.sh`, `pantheon`, o `acquia`.
Esto automatiza la descarga de la base de datos y archivos del servidor remoto hacia el entorno local.

### Despliegue inverso

Con `ddev push`, es posible enviar datos locales hacia un entorno remoto, √∫til en flujos controlados de staging.

---

## Integraci√≥n con herramientas de desarrollo

* **Xdebug y Blackfire**: se habilitan f√°cilmente con `ddev xdebug on` o configurando en `config.yaml`.
  Permiten profiling, debugging remoto y trazas de rendimiento.
* **MailHog**: intercepta correos salientes en desarrollo (`ddev launch -m`).
* **phpMyAdmin** y **Adminer**: se pueden habilitar para administrar bases de datos gr√°ficamente.
* **Node.js y frontend builds:** se puede instalar dentro del contenedor o usar una extensi√≥n:

  {% raw %}
```bash
  ddev get ddev/ddev-nodejs
  ```
{% endraw %}

---

## Integraci√≥n con CI/CD

DDEV puede formar parte de pipelines de integraci√≥n continua, utilizando contenedores ef√≠meros que replican el entorno local.
Ejemplo con GitHub Actions:

{% raw %}
```yaml
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install DDEV
        run: curl -fsSL https://ddev.com/install.sh | bash
      - name: Start DDEV
        run: ddev start
      - name: Run Tests
        run: ddev exec phpunit
```
{% endraw %}

Esto garantiza entornos consistentes entre desarrollo local y CI.

---

## Rendimiento y optimizaci√≥n

* **`mutagen`**: sincroniza archivos entre host y contenedor para mejorar el rendimiento en macOS y Windows.
  Se activa con:

  {% raw %}
```bash
  ddev mutagen enable
  ```
{% endraw %}
* **Caching:** se pueden usar vol√∫menes persistentes para Composer, npm, y bases de datos.
* **`nfs` o `bind mounts`:** opcionalmente se pueden usar para mejorar la velocidad de E/S.

---

## Extensiones y add-ons

DDEV permite instalar add-ons comunitarios directamente:

{% raw %}
```bash
ddev get <github-repo>
```
{% endraw %}

Ejemplos:

* `ddev/ddev-redis` ‚Üí a√±ade Redis.
* `ddev/ddev-drupal-solr` ‚Üí a√±ade Apache Solr para b√∫squedas.
* `ddev/ddev-xhprof` ‚Üí profiling de rendimiento.
* `ddev/ddev-nodejs` ‚Üí integra Node.js y npm dentro del contenedor.

Los add-ons se almacenan en `.ddev/addons` y pueden versionarse junto al proyecto.

---

## Seguridad y redes

* **Certificados SSL locales** generados autom√°ticamente con mkcert.
* **Red privada interna:** cada proyecto tiene su propia red Docker aislada.
* **Autenticaci√≥n local:** se pueden definir credenciales personalizadas en variables de entorno.
* **Firewall del host:** se recomienda mantener bloqueos de puertos externos y exponer solo los necesarios (`router_http_port`, `router_https_port`).

---

## Migraci√≥n de proyectos existentes

Para adaptar un proyecto ya existente:

1. Mover el c√≥digo fuente al directorio deseado.
2. Ejecutar `ddev config` y seleccionar el tipo de proyecto.
3. Ajustar `docroot`, `php_version` y `database` seg√∫n el entorno original.
4. Importar base de datos:

   {% raw %}
```bash
   ddev import-db --src=backup.sql.gz
   ```
{% endraw %}
5. Iniciar el entorno con `ddev start`.

Esto permite replicar entornos de servidores legacy o proyectos heredados sin conflictos de dependencias.

---

## DDEV en equipos y colaboraci√≥n

* Cada desarrollador puede usar su propio sistema operativo sin diferencias de entorno.
* Los archivos `.ddev` se versionan para mantener configuraci√≥n com√∫n.
* Los datos sensibles se gestionan con `.ddev/config.local.yaml` (no versionado).
* Se puede compartir el entorno local con `ddev share`, generando una URL temporal v√≠a `ngrok`.

---

## Troubleshooting y debugging

### Logs

{% raw %}
```bash
ddev logs
ddev logs -s web
```
{% endraw %}

Permiten inspeccionar errores de Apache, PHP o la base de datos.

### Comandos de diagn√≥stico

{% raw %}
```bash
ddev describe
ddev debug info
ddev poweroff
```
{% endraw %}

Sirven para depurar errores de configuraci√≥n o conflictos de red.

### Limpieza

{% raw %}
```bash
ddev stop --remove-data
ddev delete --omit-snapshot
```
{% endraw %}

√ötil para reiniciar entornos corruptos o liberar espacio en disco.

---

## Integraci√≥n con otros entornos

* **[Lando](/virtualizacion/lando/):** DDEV puede coexistir en sistemas donde ya se usen otros frameworks locales.
* **Docker Compose:** los archivos adicionales se integran autom√°ticamente.
* **Vagrant / Multipass:** se pueden combinar en entornos h√≠bridos o para pruebas comparativas.
* **Kubernetes (DDEV-Local-K8s):** existen experimentos para desplegar entornos DDEV dentro de cl√∫steres de desarrollo.

---

## Conceptos internos

* **Router:** gestiona el tr√°fico HTTP(S) entre proyectos, implementando balanceo simple.
* **Named volumes:** almacenan datos persistentes (base de datos, uploads, configuraci√≥n).
* **Overlay configuration:** los archivos `config.*.yaml` se combinan para formar la configuraci√≥n final.
* **Snapshotting:** guarda instant√°neas autom√°ticas del estado de la base de datos antes de borrar o reiniciar.

---

## Recursos complementarios

* [DDEV Addon Marketplace](https://github.com/ddev/ddev-addons)
* [DDEV + Gitpod integration](https://ddev.readthedocs.io/en/latest/users/ide/gitpod/)
* [DDEV + VS Code Remote Containers](https://ddev.readthedocs.io/en/latest/users/ide/vscode/)
* 
* [Mutagen Docs](https://mutagen.io/documentation/introduction)
* [mkcert GitHub](https://github.com/FiloSottile/mkcert)
* [GitHub - ddev/awesome-ddev: A resource tracking DDEV tips, tricks, solutions, blogs, and services](https://github.com/ddev/awesome-ddev)


