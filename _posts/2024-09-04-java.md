---
date: 2024-09-04T03:13:00
title: java
status: üöÄ
Parent: "[[Area-Prog]]"
public_note: "true"
category: JAVA
tags:
  - JAVA
  - spring
  - Junit
  - Software engineering
---
# Java 
`$= dv.current().file.tags.join(" ")`

- [Computer Science](/uncategorized/computer-science/)  
- [Backend](/uncategorized/backend/)
- [Springboot](/backend/springboot/)
- 
- curso java con codes
- app android y java tpv
- [java EE](/backend/java-ee/)
- 

---

## Fundamentos del Lenguaje Java

- Lenguaje orientado a objetos multiplataforma, basado en la JVM (Java Virtual Machine).
- C√≥digo fuente ‚Üí compilado con `javac` ‚Üí genera bytecode (`.class`) ‚Üí ejecutado por la JVM.
- **Componentes principales:**
	- **JDK** (Java Development Kit): herramientas de desarrollo.
	- **JRE** (Java Runtime Environment): entorno de ejecuci√≥n.
	- **JVM**: ejecuta bytecode, garantiza portabilidad ("Write once, run anywhere").
- **Comandos esenciales:**
	- `javac Main.java` ‚Üí compila a `Main.class`
	- `java Main` ‚Üí ejecuta el programa
	- Estructura t√≠pica:
		- `cd src`
		- `java com.amigoscode.Main`
		- `cd com/amigoscode`
		- `rm Main.class`
	- Organizaci√≥n mediante **packages**.
- **Versiones LTS recomendadas:** Java 11, 17, 21.
- **IDE recomendados:** IntelliJ IDEA, Eclipse, VSCode.

---

## Arquitectura y Ecosistema

- **Java SE (Standard Edition):** API base, colecciones, POO, I/O, networking, generics, streams, lambdas.
- **Java EE (Jakarta EE):** Servlets, JSP, JSF, JPA, EJB, CDI, Web Services.
- [Java ME](/desarrollo%20multiplataforma/java-me/): Edici√≥n para dispositivos m√≥viles/embebidos.
- **JDK y JVMs populares:** OpenJDK, Amazon Corretto, Azul Zulu, GraalVM.

---

## Programaci√≥n Orientada a Objetos (POO)

- Principios: **Encapsulaci√≥n, Herencia, Polimorfismo, Abstracci√≥n.**
- Clases, objetos, interfaces y herencia m√∫ltiple mediante interfaces.
- **Conceptos clave:**
	- **Constructores, getters/setters**
	- **Clases abstractas e interfaces**
	- **Modificadores de acceso:** `public`, `protected`, `private`, `default`
	- **Polimorfismo:** sobrecarga y sobrescritura
	- **Relaciones UML:** asociaci√≥n, agregaci√≥n, composici√≥n

---

## Programaci√≥n Funcional y Modern Java

- **Lambdas** (`()->{}`) y **Streams API** para manipulaci√≥n funcional de datos.
- **Optional``<T>``**: evita `NullPointerException`.
- **Generics:** seguridad de tipos en colecciones y m√©todos.
- **Wildcards:** ``<?>`, `extends`, `super`.``
- **Expresiones comunes:**
	- `list.stream().filter(x -> x > 10).collect(Collectors.toList());`
	- `Optional.ofNullable(value).orElse(defaultValue);`
- **Threads y Concurrencia:**
	- `Runnable`, `Callable`, `ExecutorService`
	- API moderna: `CompletableFuture`, `Virtual Threads` (desde Java 21 - Project Loom)

---

## Colecciones y Tipos de Datos

- **Colecciones principales:** `List`, `Set`, `Map`, `Queue`, `Stack`.
- **Implementaciones comunes:** `ArrayList`, `HashMap`, `LinkedList`, `TreeMap`, `HashSet`.
- **Streams:** operaciones intermedias (`map`, `filter`, `sorted`) y terminales (`collect`, `forEach`).

---

## Herramientas y Build Systems

- [Automatizacion y Build](/uncategorized/automatizacion-y-build/)
	- [maven](/automatizacion%20y%20build/maven/)
	- [Gradle](/automatizacion%20y%20build/gradle/)
- **Conceptos clave:**
	- `pom.xml` (Maven), `build.gradle` (Gradle)
	- Dependencias, repositorios, perfiles, plugins
	- Ejecuci√≥n de tests automatizados

---

## Frameworks y Desarrollo Web con Java

- [Desarrollo web](/uncategorized/desarrollo-web/)
- **Backend:**
	- [Springboot](/backend/springboot/), Spring MVC, hibernate, JPA
	- Arquitectura multicapa: Controlador ‚Üí Servicio ‚Üí Repositorio
	- **DTO (Data Transfer Object)** y **DAO (Data Access Object)**
- **Frontend Java:**
	- JSP, JSF, [thymeleaf](/motor%20de%20plantillas/thymeleaf/)
- **Microservicios:**
	- Comunicaci√≥n mediante REST o [gRPC](/backend/grpc/)
	- Herramientas: Feign, Eureka (Service Registry), Config Server, Gateway, Circuit Breaker
	- Monolitos vs microservicios
- J2EE y [java EE](/backend/java-ee/) (Jakarta EE)
- [JHipster](/automatizacion%20y%20build/jhipster/) y [yeoman](/automatizacion%20y%20build/yeoman/) para scaffolding de proyectos.

---

## Seguridad en Java

- Autenticaci√≥n y autorizaci√≥n: Spring Security, [JWT](/autenticacion/jwt/), OAuth2, Keycloak.
- Cifrado con `javax.crypto` o `java.security`.
- Buenas pr√°cticas:
	- No exponer contrase√±as en c√≥digo.
	- Usar HTTPS y certificados.
	- Validar entrada de usuario.

---

## Testing y Calidad del C√≥digo

- [Testing](/testing/testing/)
	- [JUnit](/testing/junit/): testing unitario.
	- [JMeter](/testing/jmeter/): pruebas de rendimiento.
	- Mockito: mocks y stubs.
- **Tipos de pruebas:**
	- Unitarias, integraci√≥n, end-to-end.
	- Cobertura de c√≥digo con Jacoco.
	- CI/CD con GitHub Actions, Jenkins o GitLab.

---

## Persistencia y Bases de Datos

- [Databases](/uncategorized/databases/)
- hibernate y JPA:
	- ORM (Object-Relational Mapping)
	- Anotaciones: `@Entity`, `@Table`, `@Id`, `@GeneratedValue`
	- Relaciones: `@OneToMany`, `@ManyToOne`, `@ManyToMany`
	- Consultas JPQL o Criteria API.
- Conexiones: JDBC, Connection Pool (HikariCP)

---

## Java en Contenedores y Cloud

- [Docker](/software%20engineering/docker/)
	- Imagenes recomendadas: [Amazon Corretto](https://hub.docker.com/_/amazoncorretto)
	- Ejemplo:
		- [Springboot + PostgreSQL + Docker Compose](https://github.com/pedrovelasquez9/springboot-postgresql-docker-compose/tree/master)
			- [Springboot](/backend/springboot/), [postgreSQL](/databases/postgresql/), [maven](/automatizacion%20y%20build/maven/)
- Despliegue en Cloud: AWS Elastic Beanstalk, GCP App Engine, Azure App Service.

---

## Servicios Web y APIs

- [JAX-WS](/backend/jax-ws/): Servicios SOAP.
- [swagger](/backend/swagger/): Documentaci√≥n autom√°tica de APIs REST.
- Spring Boot REST:
	- `@RestController`, `@GetMapping`, `@PostMapping`.
	- Serializaci√≥n con Jackson (`@JsonProperty`, `@JsonIgnore`).

---

## Documentaci√≥n y Recursos Oficiales

- [Java Documentation - Get Started](https://docs.oracle.com/en/java/)
- [Manual Java | Manual Web](https://www.manualweb.net/java/)
- [Java Tutorials Learning Paths](https://docs.oracle.com/javase/tutorial/tutorialLearningPaths.html)
- [The Java‚Ñ¢ Tutorials](https://docs.oracle.com/javase/tutorial/index.html)
	- [Internationalization Overview](https://docs.oracle.com/en/java/javase/23/intl/internationalization-overview.html)
	- [Why Use the API?](https://docs.oracle.com/en/java/javase/23/jfapi/why-use-jfr-api.html)
- Lesson- A Closer Look at the -Hello World!- Application (The Java‚Ñ¢ Tutorials - Getting Started)

---

## Ejercicios, Casos y Pruebas T√©cnicas


- [Una cola con dos pilas (FAANG)](https://youtu.be/grQWI5ZWkBU)
	- uso de stack y queue
- [Gen√©ricos en Java - Clase propia](https://youtu.be/OtSd9NCXdGc)
	- casteo vs tipos gen√©ricos
	- uso de `Object`, `T`, `E`, `K,V`
	- assertions y tipado seguro
- [Wildcards y gen√©ricos](https://youtu.be/becfU6P5o1c)
	- `<?>`, `extends`, `super`
	- restricciones y subtipos

---

## Material Hist√≥rico y Cursos

- 00-Glosario de terminos
- 00-INTRODUCCI√ìN A LA POO
- 01-APPS WEB CON JAVA INTRO ECPLISE
- 02 Introducci√≥n a Java
- 03 Introducci√≥n al patr√≥n MVC y PHP
- 04 JAVA STRUTS 2 0 AVANZADO
- 05 Object Graph Navigation Language (OGNL)
- 06 Capa de Persistencia
- 07 SPRING MVC
- 08 HIBERNATE
- 09 Consultas contra la base de datos
- Examen Hibernate
- Examen-final-java-cdc
- [Test prog_1 1](https://www.daypo.com/prog-1-1.html)
- [Test programaci√≥n DAM - tema 2](https://www.daypo.com/programacion-dam-tema-2.html)
- [Ejercicios POO - DiscoDuroDeRoer](https://www.discoduroderoer.es/ejercicios-propuestos-y-resueltos-programacion-orientado-a-objetos-java/)
- [Cartagena99 POO (sin respuestas)](https://www.cartagena99.com/recursos/alumnos/ejercicios/Problemas.Resueltos.POO.SIN.RESPUESTAS.v1.3%20(1).pdf)
- [Cartagena99 POO (con respuestas)](https://www.cartagena99.com/recursos/alumnos/ejercicios/Problemas.Resueltos.POO.CON.RESPUESTAS.v1.3%20(1).pdf)
---

## Enlaces y Herramientas Adicionales

- [CMS](/desarrollo%20web/cms/)
- UML y pseudoc√≥digo
- [swagger](/backend/swagger/)

# Java Avanzado y Ecosistema 2025
`$= dv.current().file.tags.join(" ")`

> Nota complementaria a Java ‚Äî expansi√≥n de temas intermedios y avanzados del lenguaje, entorno y ecosistema Java actual.

---

## üß© Modularidad en Java
- **Sistema de m√≥dulos (Java 9+)**: define dependencias expl√≠citas con `module-info.java`.
- Controla visibilidad de paquetes con `exports` y dependencias con `requires`.
- Permite crear aplicaciones m√°s ligeras, seguras y mantenibles.
- **Buenas pr√°cticas**:
	- No exportar todo el c√≥digo p√∫blico.
	- Modularizar librer√≠as comunes y definir APIs claras.

---

## üîç Reflexi√≥n y Anotaciones
- **Reflexi√≥n**: inspecci√≥n y manipulaci√≥n de clases en tiempo de ejecuci√≥n (`java.lang.reflect`).
- **Anotaciones**: metadatos que gu√≠an compiladores o frameworks (`@Override`, `@Inject`, `@Entity`, etc.).
- **Usos comunes**:
	- Inyecci√≥n de dependencias (Spring, CDI)
	- Serializaci√≥n din√°mica (Jackson, Gson)
	- Testing (JUnit, Mockito)
- **Precauci√≥n**: la reflexi√≥n puede degradar el rendimiento y violar encapsulamiento.

---

## ‚ôªÔ∏è Memoria, Garbage Collection y Rendimiento
- **Gesti√≥n autom√°tica** pero no m√°gica:
	- **Heap**: memoria de objetos.
	- **Stack**: variables locales y llamadas.
	- **Generaciones**: joven, vieja, survivor.
- **Recolecci√≥n moderna**:
	- G1 (por defecto), ZGC y Shenandoah para baja latencia.
- **Consejos**:
	- Evitar referencias est√°ticas innecesarias.
	- Usar `try-with-resources` y `AutoCloseable`.
	- Monitorizar con `jvisualvm`, `JConsole`, `Java Mission Control`.

---

## ‚öôÔ∏è Concurrencia y Paralelismo
- **API moderna**: `ExecutorService`, `CompletableFuture`, `ForkJoinPool`.
- **Virtual Threads (Java 21)** ‚Üí hilos ligeros del *Project Loom*.
- **Recomendaciones**:
	- Minimizar estado compartido.
	- Usar estructuras concurrentes (`ConcurrentHashMap`, `CopyOnWriteArrayList`).
	- Evitar *deadlocks* y bloqueos innecesarios.

---

## üß± Dise√±o, Patrones y Arquitectura
- Patrones cl√°sicos: Singleton, Factory, Builder, Strategy, Observer.
- Principios: **SOLID**, **DRY**, **KISS**, **YAGNI**.
- Estructura de aplicaci√≥n por capas:
	1. Presentaci√≥n  
	2. Negocio/Dominio  
	3. Persistencia  
- **DTOs**, **eventos**, **repositorios** ‚Üí separaci√≥n limpia de responsabilidades.

---

## üîê Seguridad y Criptograf√≠a
- **APIs principales**: `java.security`, `javax.crypto`.
- Cifrado, firmas digitales, generaci√≥n de claves.
- Autenticaci√≥n y autorizaci√≥n moderna: JWT, OAuth2, OpenID Connect.
- **Buenas pr√°cticas**:
	- Validar toda entrada externa.
	- Evitar deserializaci√≥n insegura.
	- Habilitar HTTPS y certificados v√°lidos.
	- Integraci√≥n con Spring Security o frameworks equivalentes.

---

## üåç Internacionalizaci√≥n y Localizaci√≥n
- Clases clave: `Locale`, `ResourceBundle`, `DateTimeFormatter`.
- **Evita hardcodear texto** ‚Üí usa ficheros `.properties`.
- **Soporte Unicode completo**.
- **Accesibilidad**: adaptar formatos de fecha, moneda y texto din√°micamente.

---

## üöÄ Novedades del Lenguaje y Futuro
- **JEP (JDK Enhancement Proposals)** ‚Üí seguimiento de mejoras oficiales.
- **Novedades recientes**:
	- `record`, `sealed classes`, `switch expressions`, `pattern matching`.
- **Proyectos en curso**:
	- **Valhalla** ‚Üí tipos de valor.
	- **Loom** ‚Üí concurrencia ligera.
	- **Amber** ‚Üí simplificaci√≥n de sintaxis.
- Mantente al d√≠a con las versiones LTS (Java 17, 21, 25).

---

## üß™ Testing, CI/CD y DevOps
- Frameworks: JUnit 5, Mockito, Testcontainers.
- Calidad: SonarQube, Checkstyle, JaCoCo.
- CI/CD: GitHub Actions, Jenkins, GitLab CI.
- Pruebas de carga y seguridad automatizadas.
- Integraci√≥n en pipelines Docker/Kubernetes.

---

## üì° Integraci√≥n y Sistemas Distribuidos
- **Mensajer√≠a**: JMS, Kafka, RabbitMQ.
- **APIs remotas**: REST, gRPC, GraphQL.
- **Patrones de resiliencia**: Circuit Breaker, Retry, Bulkhead.
- **Observabilidad**:
	- Logs: SLF4J, Logback.
	- M√©tricas: Micrometer, Prometheus.
	- Trazas distribuidas: OpenTelemetry.

---

## üñ•Ô∏è Interfaces gr√°ficas y Aplicaciones Desktop
- **JavaFX** como sucesor moderno de Swing.
- CSS y FXML para UI declarativa.
- Integraci√≥n con hardware o sistemas embebidos.
- JavaFX ‚Üí buena opci√≥n para herramientas internas o educativas.

---

## üß∞ Ecosistema y Herramientas Populares
- **Librer√≠as √∫tiles**:
	- Lombok ‚Üí menos *boilerplate*.
	- MapStruct ‚Üí mapeo autom√°tico de DTOs.
	- Guava / Apache Commons ‚Üí utilidades ampliadas.
	- Flyway / Liquibase ‚Üí migraci√≥n de bases de datos.
- **Versionado y dependencias**:
	- Mantener control de licencias (MIT, Apache 2.0, etc.)
	- Modularizar dependencias para compilaciones r√°pidas.

---

## üîó Enlaces relacionados
- Java
- Spring Framework
- Spring Boot
- Jakarta EE
- Testing en Java
- DevOps con Java y Docker
- Arquitectura de microservicios

---

> **Resumen:**  
> Esta nota ampl√≠a tu visi√≥n del ecosistema Java, tocando √°reas de rendimiento, seguridad, modularidad, concurrencia moderna y pr√°cticas de ingenier√≠a. Ideal para desarrolladores que ya dominan la base y quieren evolucionar hacia arquitecturas robustas, distribuidas y sostenibles.

# Fundamentos Internos de Java y la JVM
`$= dv.current().file.tags.join(" ")`

> Tercera nota complementaria a Java ‚Äî centrada en los fundamentos t√©cnicos del lenguaje y la m√°quina virtual (JVM), profundizando en c√≥mo Java ejecuta, compila y gestiona los programas.

---

## üß† Arquitectura Interna de Java

- **Java Platform Components**:
	- **JDK (Java Development Kit)** ‚Üí compilador (`javac`), herramientas y bibliotecas.
	- **JRE (Java Runtime Environment)** ‚Üí librer√≠as + JVM.
	- **JVM (Java Virtual Machine)** ‚Üí ejecuta bytecode, gestiona memoria y seguridad.
- **Proceso de ejecuci√≥n**:
	1. C√≥digo fuente `.java`
	2. Compilaci√≥n ‚Üí bytecode `.class`
	3. Carga en JVM ‚Üí ejecuci√≥n optimizada por el **JIT (Just-In-Time Compiler)**

---

## üî© JVM y Bytecode

- **Bytecode**: formato intermedio multiplataforma ejecutado por la JVM.
- Inspecci√≥n con herramientas:
	- `javap -c Main.class`
	- Desensamblado para entender el flujo real de instrucciones.
- **Classloaders**:
	- Bootstrap ‚Üí carga clases del n√∫cleo.
	- Extension ‚Üí carga librer√≠as est√°ndar.
	- Application ‚Üí carga clases del usuario.
	- Custom ‚Üí permite crear cargadores propios (plugins, frameworks).

---

## ‚öôÔ∏è JIT Compilation y HotSpot

- **HotSpot JVM** analiza el c√≥digo en ejecuci√≥n y optimiza las partes m√°s usadas.
- **Tiered Compilation**:
	- Interpreter ‚Üí r√°pido inicio.
	- C1 / C2 JIT compilers ‚Üí optimizaci√≥n progresiva.
- **GraavVM** (alternativa moderna):
	- Compilaci√≥n AOT (*Ahead-of-Time*).
	- Soporte multilenguaje (Java, Kotlin, JS, Python, etc.).
	- Ideal para microservicios ligeros.

---

## üßÆ Gesti√≥n de Memoria

- **Heap Memory**:
	- Espacio donde viven los objetos.
	- Dividido en generaciones: *Young*, *Old*, *Survivor*.
- **Stack Memory**:
	- Almacena variables locales y llamadas de m√©todos.
- **Garbage Collectors** modernos:
	- G1GC ‚Üí predeterminado, equilibrio entre latencia y rendimiento.
	- ZGC / Shenandoah ‚Üí baja latencia, escalabilidad extrema.
- **T√©cnicas de optimizaci√≥n**:
	- Evitar objetos temporales excesivos.
	- Usar *object pooling* cuando es viable.
	- Medir con *profilers* antes de optimizar.

---

## üß≠ Ciclo de Vida de una Clase

1. **Carga** (`Loading`) ‚Üí lectura del `.class`.
2. **Vinculaci√≥n** (`Linking`) ‚Üí verificaci√≥n, preparaci√≥n y resoluci√≥n.
3. **Inicializaci√≥n** (`Initialization`) ‚Üí ejecuci√≥n de bloques `static` y constructores.
4. **Uso** ‚Üí instancia y m√©todos disponibles.
5. **Descarga** ‚Üí elegible para GC si no hay referencias activas.

---

## üîê Seguridad y Sandbox JVM

- Java mantiene un **modelo de seguridad por clases cargadas**.
- Cada `ClassLoader` impone l√≠mites de acceso.
- **SecurityManager (deprecado)** ‚Üí reemplazado por *sandboxing* y pol√≠ticas modernas.
- Firmas digitales en `.jar` aseguran integridad.
- En entornos cloud, se usan contenedores o *sandboxing nativo*.

---

## üß© Tipos, Generics y Erasure

- **Type Erasure**:
	- Los gen√©ricos no existen en tiempo de ejecuci√≥n.
	- La JVM solo ve tipos base (`Object`).
- **Wildcards y l√≠mites** (`extends`, `super`) definen flexibilidad y seguridad.
- **Reflection + Generics**:
	- Permite inspeccionar los tipos gen√©ricos originales usando `ParameterizedType`.

---

## üßµ Sincronizaci√≥n Interna

- **Monitores y Locks**:
	- Cada objeto tiene un *monitor* interno.
	- `synchronized` bloquea acceso concurrente.
- **Problemas comunes**:
	- *Deadlocks* ‚Üí interbloqueos circulares.
	- *Livelocks* ‚Üí procesos activos sin progreso.
- **Alternativas modernas**:
	- `ReentrantLock`, `ReadWriteLock`, `StampedLock`.
	- Estructuras no bloqueantes (`Atomic`, `Concurrent`).

---

## üîç Instrumentaci√≥n y Diagn√≥stico

- **Herramientas est√°ndar**:
	- `jconsole`, `jvisualvm`, `jstat`, `jmap`, `jcmd`.
	- Permiten analizar uso de memoria, hilos y rendimiento.
- **Java Flight Recorder (JFR)**:
	- Perfilador nativo de bajo impacto.
	- Integrado con **Java Mission Control** (JMC).
- **Instrumentaci√≥n con agentes**:
	- `java.lang.instrument` ‚Üí modificar bytecode en tiempo de carga.
	- Usado por frameworks como Spring, Hibernate o agentes APM.

---

## üöÄ Compilaci√≥n AOT y GraalVM Native Image

- **AOT (Ahead-of-Time)** ‚Üí convierte bytecode a binario nativo antes de ejecutar.
- **GraalVM Native Image**:
	- Reduce tiempos de arranque (ideal microservicios).
	- Menor consumo de memoria.
	- Requiere configuraci√≥n de reflexi√≥n est√°tica.
- Uso:
	{% raw %}
```bash
	native-image -jar app.jar
	```
{% endraw %}

---

## üìö Enlaces Relacionados

- Java
- Java Avanzado y Ecosistema 2025
- Spring Internals
- Optimizaci√≥n y Profiling JVM
- GraalVM
- [Testing](/testing/testing/)
- Microservicios Java
- Rendimiento y Monitoreo

---

> **Resumen:**  
> Esta nota cierra la base te√≥rica de Java abordando su estructura interna, ejecuci√≥n, memoria y compilaci√≥n. Es esencial para comprender c√≥mo el c√≥digo Java se transforma, se ejecuta y se optimiza dentro de la JVM, permitiendo desarrollar software m√°s eficiente, seguro y predecible.

# Java Pr√°ctico y Patrones de Uso
`$= dv.current().file.tags.join(" ")`

> Nota complementaria a Java y Fundamentos Internos de Java y la JVM centrada en la pr√°ctica moderna del lenguaje, patrones, sintaxis actualizada (Java 17‚Äì21‚Äì23 LTS), y consejos de desarrollo profesional.

---

## üß± Fundamentos del Lenguaje Moderno

- **Tipos de datos y var**  
	- Desde Java 10: `var nombre = "texto";` ‚Üí inferencia local de tipos.  
	- Solo dentro de m√©todos, nunca en campos de clase.  
- **Records (Java 14+)**  
	- Clases inmutables con menos c√≥digo:
	{% raw %}
```java
	public record Persona(String nombre, int edad) {}
	```
{% endraw %}
- **Text Blocks (Java 15+)**
	{% raw %}
```java
	String json = """
	{
		"clave": "valor"
	}
	""";
	```
{% endraw %}

---

## üß© Colecciones y Estructuras de Datos

- **List, Set, Map** son interfaces principales.
- Implementaciones comunes:
	- `ArrayList`, `LinkedList`, `HashSet`, `TreeSet`, `HashMap`, `LinkedHashMap`.
- **Ejemplo:**
	{% raw %}
```java
	Map<String, Integer> puntuaciones = new HashMap<>();
	puntuaciones.put("Juan", 10);
	puntuaciones.forEach((k,v) -> System.out.println(k + ": " + v));
	```
{% endraw %}
- **Streams API** (Java 8+):
	- Procesamiento funcional de colecciones.
	{% raw %}
```java
	List<String> nombres = List.of("Ana", "Luis", "Eva");
	nombres.stream()
		.filter(n -> n.startsWith("E"))
		.map(String::toUpperCase)
		.forEach(System.out::println);
	```
{% endraw %}

---

## üîÅ Programaci√≥n Funcional y Lambdas

- **Lambdas** permiten pasar funciones como par√°metros:
	{% raw %}
```java
	lista.forEach(e -> System.out.println(e));
	```
{% endraw %}
- **Interfaces funcionales**:
	- `Predicate<T>`, `Function<T,R>`, `Consumer<T>`, `Supplier<T>`
- **Method References**:
	{% raw %}
```java
	lista.forEach(System.out::println);
	```
{% endraw %}

---

## üßµ Concurrencia Moderna

- **Thread y Runnable** ‚Üí b√°sicos:
	{% raw %}
```java
	new Thread(() -> System.out.println("Hilo!")).start();
	```
{% endraw %}
- **ExecutorService** ‚Üí control avanzado:
	{% raw %}
```java
	ExecutorService pool = Executors.newFixedThreadPool(4);
	pool.submit(() -> tarea());
	pool.shutdown();
	```
{% endraw %}
- **CompletableFuture** (as√≠ncrono):
	{% raw %}
```java
	CompletableFuture.supplyAsync(() -> consultaBD())
		.thenApply(resultado -> procesar(resultado))
		.thenAccept(System.out::println);
	```
{% endraw %}
- **Virtual Threads (Java 21+)**
	- Ligereza extrema (miles de hilos sin overhead):
	{% raw %}
```java
	try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {
		scope.fork(() -> tarea1());
		scope.fork(() -> tarea2());
		scope.join();
	}
	```
{% endraw %}

---

## üß∞ Manejo de Excepciones

- **Checked vs Unchecked**
	- `IOException` ‚Üí checked.
	- `RuntimeException` ‚Üí unchecked.
- **Buenas pr√°cticas**:
	- Evita capturar `Exception` gen√©rico.
	- Lanza excepciones espec√≠ficas.
	- Usa `try-with-resources`:
	{% raw %}
```java
	try (var reader = new BufferedReader(new FileReader("archivo.txt"))) {
		reader.lines().forEach(System.out::println);
	}
	```
{% endraw %}

---

## üßÆ Clases, Interfaces y Abstracci√≥n

- **Abstract Class vs Interface**:
	- Abstracta: puede tener estado.
	- Interface: contrato puro (ahora con m√©todos `default` y `static`).
- **Sealed Classes (Java 17+)**
	- Restringen la herencia:
	{% raw %}
```java
	public sealed class Forma permits Circulo, Cuadrado {}
	```
{% endraw %}

---

## üß≠ Patrones de Dise√±o Esenciales

- **Singleton**  
	{% raw %}
```java
	public class Conexion {
		private static final Conexion INSTANCIA = new Conexion();
		private Conexion() {}
		public static Conexion getInstancia() { return INSTANCIA; }
	}
	```
{% endraw %}
- **Factory Method**
	{% raw %}
```java
	interface Creador { Producto crear(); }
	class CreadorConcreto implements Creador {
		public Producto crear() { return new ProductoConcreto(); }
	}
	```
{% endraw %}
- **Builder**
	{% raw %}
```java
	Persona p = new Persona.Builder().nombre("Juan").edad(30).build();
	```
{% endraw %}
- **Strategy / Observer / Decorator** ‚Üí muy comunes en [Springboot](/backend/springboot/) y Java EE.

---

## üß© Serializaci√≥n y JSON

- **Bibliotecas comunes**:
	- `Jackson`, `Gson`, `Json-B` (JEE)
- **Ejemplo con Jackson**:
	{% raw %}
```java
	ObjectMapper mapper = new ObjectMapper();
	String json = mapper.writeValueAsString(objeto);
	Persona persona = mapper.readValue(json, Persona.class);
	```
{% endraw %}

---

## üß™ Testing y Buenas Pr√°cticas

- **Unit Testing**: [JUnit](/testing/junit/)
	{% raw %}
```java
	@Test
	void sumaDebeSerCorrecta() {
		assertEquals(4, suma(2,2));
	}
	```
{% endraw %}
- **Mocks**: Mockito
	{% raw %}
```java
	when(servicio.obtener()).thenReturn(List.of("dato"));
	```
{% endraw %}
- **Integration Tests**: usan [Springboot](/backend/springboot/) context y [JMeter](/testing/jmeter/).
- **Principios de calidad**:
	- SOLID, DRY, KISS, YAGNI.
	- Cobertura no es igual a calidad ‚Üí centrarse en *path cr√≠tico*.
	- Usa `assertThrows()` y `@Nested` tests para claridad.

---

## üßÆ Entrada/Salida y Archivos

- **NIO.2 (Java 7+)**
	{% raw %}
```java
	Files.walk(Path.of("src"))
		.filter(Files::isRegularFile)
		.forEach(System.out::println);
	```
{% endraw %}
- **Serializaci√≥n binaria**
	{% raw %}
```java
	try (var out = new ObjectOutputStream(new FileOutputStream("obj.ser"))) {
		out.writeObject(obj);
	}
	```
{% endraw %}

---

## üß∞ Herramientas de Productividad

- **Build tools**: Maven, [Gradle](/automatizacion%20y%20build/gradle/)
- **Gesti√≥n de versiones**: Git, GitHub Actions, CI/CD.
- **Depuraci√≥n**:
	- Breakpoints en IntelliJ IDEA o VSCode.
	- Logs con SLF4J + Logback.
- **Code style y linting**:
	- Checkstyle, PMD, SpotBugs.
- **Documentaci√≥n autom√°tica**:
	- Javadoc ‚Üí `/** descripci√≥n */`
	- Integrable con Swagger para APIs.

---

## üß≠ Recomendaciones de Flujo de Aprendizaje

1. Sintaxis y tipos ‚Üí curso java con codes
2. Colecciones y streams ‚Üí Java Avanzado y Ecosistema 2025
3. Concurrencia y patrones ‚Üí esta nota
4. JVM y optimizaci√≥n ‚Üí Fundamentos Internos de Java y la JVM
5. Frameworks y despliegue ‚Üí [Springboot](/backend/springboot/), [Docker](/software%20engineering/docker/), Microservicios

---

## üìö Recursos Pr√°cticos y Referencias

- [Java version history - Wikipedia](https://en.wikipedia.org/wiki/Java_version_history)
- [Effective Java (Joshua Bloch)](https://effectivejava.dev/)
- [Java 23 Documentation](https://docs.oracle.com/en/java/javase/23/)
- [Learn Java Online](https://www.learnjavaonline.org/)
- [Java Pattern Catalog](https://refactoring.guru/design-patterns/java)

---

> **Resumen:**  
> Esta nota se centra en el uso pr√°ctico del lenguaje, las t√©cnicas modernas de programaci√≥n funcional, concurrencia, patrones y testing. Completa el ecosistema Java proporcionando la base aplicada que conecta teor√≠a, frameworks y rendimiento real.


# Java y Arquitectura Empresarial
`$= dv.current().file.tags.join(" ")`

> Nota complementaria a Java, Java Pr√°ctico y Patrones de Uso, y Fundamentos Internos de Java y la JVM centrada en dise√±o de arquitecturas empresariales modernas, principios de ingenier√≠a, y patrones de integraci√≥n para proyectos escalables con Java.

---

## üß± Estructura por Capas y M√≥dulos

- **Arquitectura Cl√°sica en Capas (N-tier)**:
	1. **Presentaci√≥n (UI)** ‚Äì JSP, JSF, Thymeleaf, Angular, React.
	2. **Servicio / L√≥gica de Negocio** ‚Äì [Springboot](/backend/springboot/), EJBs, servicios REST.
	3. **Persistencia / Datos** ‚Äì JPA, Hibernate, JDBC.
	4. **Infraestructura / Configuraci√≥n** ‚Äì Maven, [Docker](/software%20engineering/docker/), Seguridad, Logs.
- **Separaci√≥n de responsabilidades (SRP)**:
	- Evita mezclar l√≥gica de negocio con acceso a datos.
	- Usa interfaces en la capa de servicio para testabilidad.
- **Domain Model Pattern**:
	- Entidades con l√≥gica propia y valor sem√°ntico.
	- Evita el ‚Äúanemic model‚Äù (clases con solo getters/setters).

---

## üß≠ Clean Architecture / Hexagonal / DDD

- **Clean Architecture (Uncle Bob)**:
	- Dependencias hacia el centro (dominio puro).
	- Frameworks y detalles t√©cnicos en la periferia.
- **Hexagonal Architecture (Ports & Adapters)**:
	- **Puertos (Ports)** ‚Üí interfaces del dominio.
	- **Adaptadores (Adapters)** ‚Üí implementaciones concretas (DB, REST, etc.).
	- Facilita testeo, mantenimiento y reemplazo de tecnolog√≠as.
- **DDD (Domain-Driven Design)**:
	- **Entidades**: con identidad propia.
	- **Value Objects**: definidos por su valor, inmutables.
	- **Aggregates** y **Aggregate Roots**: agrupan consistencia.
	- **Repositories**: abstraen persistencia.
	- **Services**: encapsulan l√≥gica de dominio transversal.

---

## ‚öôÔ∏è Arquitecturas Modernas en Java

- **Monolito modular**:
	- Estructurado por m√≥dulos independientes.
	- Ideal para apps medianas con despliegue simple.
- **Microservicios**:
	- Cada servicio = dominio acotado.
	- Comunicaci√≥n por REST, mensajer√≠a (Kafka, RabbitMQ).
	- Despliegue aislado con [Docker](/software%20engineering/docker/) + [Kubernetes](/virtualizacion/kubernetes/).
- **Serverless y FaaS**:
	- Java en AWS Lambda, Google Cloud Run, Azure Functions.
	- Optimizaciones necesarias: *GraalVM Native Image*, tiempos de arranque bajos.

---

## üß© Integraci√≥n y Comunicaci√≥n

- **REST APIs** (Spring MVC, JAX-RS):
	{% raw %}
```java
	@RestController
	@RequestMapping("/api/clientes")
	public class ClienteController {
		@GetMapping("/{id}")
		public ResponseEntity<Cliente> obtener(@PathVariable Long id) {
			return ResponseEntity.ok(servicio.buscarPorId(id));
		}
	}
	```
{% endraw %}
- **Feign Client (Spring Cloud)**:
	{% raw %}
```java
	@FeignClient(name = "usuarios", url = "${api.usuarios.url}")
	interface UsuarioClient {
		@GetMapping("/usuarios/{id}")
		UsuarioDTO obtener(@PathVariable Long id);
	}
	```
{% endraw %}
- **Mensajer√≠a As√≠ncrona**:
	- Kafka, [RabbitMQ](/backend/rabbitmq/), ActiveMQ.
	- Patrones: *Event Sourcing*, *CQRS*, *Outbox Pattern*.
- **GraphQL y gRPC**:
	- Alternativas modernas a REST con menor overhead.

---

## üîí Seguridad Empresarial

- **Autenticaci√≥n y Autorizaci√≥n**:
	- Spring Security + JWT + OAuth2.
	- Integraci√≥n con Keycloak, Auth0, o Okta.
- **Roles y Claims**:
	{% raw %}
```java
	@PreAuthorize("hasRole('ADMIN')")
	public void eliminarUsuario() {}
	```
{% endraw %}
- **Cifrado y hashing**:
	- `BCryptPasswordEncoder`, AES, RSA.
- **Auditor√≠a y Logging seguro**:
	- Spring AOP para interceptar llamadas cr√≠ticas.
	- SLF4J + Logback + ELK (Elastic Stack).

---

## üßÆ Persistencia y ORM

- **JPA / Hibernate**:
	- Entidades anotadas:
	{% raw %}
```java
	@Entity
	public class Usuario {
		@Id @GeneratedValue
		private Long id;
		private String nombre;
	}
	```
{% endraw %}
	- Relaciones:
		- `@OneToMany`, `@ManyToOne`, `@OneToOne`, `@ManyToMany`.
	- Consultas:
		- JPQL, Criteria API, Native Queries.
- **Spring Data JPA**:
	- Repositorios autom√°ticos:
	{% raw %}
```java
	public interface UsuarioRepo extends JpaRepository<Usuario, Long> {}
	```
{% endraw %}
- **Mapeo DTOs**:
	- Evita exponer entidades directamente.
	- Usa MapStruct o `ModelMapper`.

---

## üß† Patrones Empresariales y Escalabilidad

- **Patrones de Integraci√≥n**:
	- Service Registry (Eureka)
	- API Gateway (Zuul, Spring Cloud Gateway)
	- Circuit Breaker (Resilience4j)
	- Config Server, Load Balancer, Distributed Tracing.
- **Caching**:
	- Redis, Caffeine, EHCache.
	- Anotaciones:
		{% raw %}
```java
		@Cacheable("productos")
		public List<Producto> listar() { ... }
		```
{% endraw %}
- **CQRS (Command Query Responsibility Segregation)**:
	- Separar comandos (mutaciones) y consultas (lectura).
	- Mejora rendimiento en dominios complejos.
- **Saga Pattern** (transacciones distribuidas):
	- Control de flujo entre microservicios.
	- Implementable con orquestadores (Camunda, Temporal.io).

---

## üß∞ DevOps y Despliegue

- **Contenedores y Orquestaci√≥n**:
	- [Docker](/software%20engineering/docker/) ‚Üí empaquetado por microservicio.
	- [Kubernetes](/virtualizacion/kubernetes/) ‚Üí escalado autom√°tico, secretos, monitoreo.
- **CI/CD**:
	- GitHub Actions, Jenkins, GitLab CI.
	- Pipelines para compilar, testear y desplegar.
- **Infraestructura como c√≥digo (IaC)**:
	- Terraform, Ansible, Pulumi.
- **Observabilidad**:
	- Prometheus + Grafana
	- ELK Stack (Logs)
	- Jaeger o Zipkin (tracing distribuido)
- **Testing de arquitectura**:
	- ArchUnit ‚Üí asegura capas y dependencias correctas.

---

## üöÄ Buenas Pr√°cticas de Arquitectura

- Usa **DTOs y Mappers** para desacoplar API ‚Üî Dominio.
- Aplica **SOLID, DRY, KISS, YAGNI** a nivel de m√≥dulo.
- **Documenta** con Swagger o [OpenAPI](/backend/openapi/).
- **Versiona APIs** (`/api/v1/...`).
- **Externaliza configuraci√≥n** (Spring Config Server, `.env`, Secrets Manager).
- **Automatiza tests de integraci√≥n y contract testing**.

---

## üì¶ Ejemplo de Estructura Empresarial


{% raw %}
```
`src/
‚îú‚îÄ domain/
‚îÇ   ‚îú‚îÄ model/
‚îÇ   ‚îú‚îÄ repository/
‚îÇ   ‚îî‚îÄ service/
‚îú‚îÄ infrastructure/
‚îÇ   ‚îú‚îÄ config/
‚îÇ   ‚îú‚îÄ persistence/
‚îÇ   ‚îî‚îÄ messaging/
‚îú‚îÄ application/
‚îÇ   ‚îú‚îÄ controller/
‚îÇ   ‚îú‚îÄ dto/
‚îÇ   ‚îî‚îÄ mapper/
‚îî‚îÄ main/
‚îú‚îÄ SpringBootApp.java`
```
{% endraw %}


---

## üìö Enlaces Relacionados

- [Springboot](/backend/springboot/)
- Spring Cloud
- Microservicios
- JPA
- [Docker](/software%20engineering/docker/)
- [Testing](/testing/testing/)
- Maven
- [Gradle](/automatizacion%20y%20build/gradle/)
- [Kubernetes](/virtualizacion/kubernetes/)
- Arquitectura Hexagonal
- Keycloak
- Swagger

---

> **Resumen:**  
> Esta nota unifica los conceptos de dise√±o empresarial en Java, abarcando desde la arquitectura por capas hasta microservicios y despliegue en la nube. Es el puente final entre el desarrollo pr√°ctico y la ingenier√≠a de software profesional con Java.

# üß† Gu√≠a Completa de Java ‚Äì Cheatsheet + Trucos + Problemas Comunes (2025)
`$= dv.current().file.tags.join(" ")`

> Gu√≠a pr√°ctica y moderna de Java con sintaxis esencial, ejemplos reales, atajos, errores t√≠picos y soluciones.  
> Compatible con [Springboot](/backend/springboot/), JPA, Streams, Records y otras caracter√≠sticas de Java 21+.

---

## üß© 1. Sintaxis y Conceptos Fundamentales

### ‚ú≥Ô∏è Estructura b√°sica

{% raw %}
```java
public class HolaMundo {
	public static void main(String[] args) {
		System.out.println("¬°Hola Java 2025!");
	}
}
```
{% endraw %}`

### üßÆ Variables y tipos

{% raw %}
```java
int edad = 30;
double precio = 19.99;
boolean activo = true;
String nombre = "Eduardo";
var saludo = "Hola"; // inferencia desde Java 10
```
{% endraw %}

üí° **Truco:** Usa `var` solo para inicializaciones claras.
Evita: `var x = obtener(); // ¬øqu√© devuelve?`

---

## üß± 2. Control de Flujo

{% raw %}
```java
if (edad >= 18) System.out.println("Adulto");
else System.out.println("Menor");

for (int i = 0; i < 3; i++) System.out.println(i);

while (true) break;

switch (opcion) {
	case 1 -> System.out.println("Uno");
	case 2 -> System.out.println("Dos");
	default -> System.out.println("Otro");
}
```
{% endraw %}

üí° **Switch con expresiones (Java 14+)**

{% raw %}
```java
String tipo = switch (codigo) {
	case 1 -> "Admin";
	case 2,3 -> "User";
	default -> "Guest";
};
```
{% endraw %}

---

## üß¨ 3. Clases, Objetos y Encapsulaci√≥n

{% raw %}
```java
public class Persona {
	private String nombre;
	private int edad;

	public Persona(String nombre, int edad) {
		this.nombre = nombre;
		this.edad = edad;
	}

	public void saludar() {
		System.out.println("Hola, soy " + nombre);
	}
}
```
{% endraw %}

### üß∞ Constructor por defecto y sobrecarga

{% raw %}
```java
public Persona() {}
public Persona(String nombre) { this.nombre = nombre; }
```
{% endraw %}

### üìú `record` (Java 16+)

Ideal para DTOs y modelos inmutables.

{% raw %}
```java
public record Usuario(String nombre, String email) {}
```
{% endraw %}

---

## üß≠ 4. Herencia, Interfaces y Polimorfismo

{% raw %}
```java
abstract class Animal {
	abstract void sonido();
}

class Perro extends Animal {
	void sonido() { System.out.println("Guau!"); }
}
```
{% endraw %}

### üß© Interfaces

{% raw %}
```java
interface Volador { void volar(); }

class Pajaro implements Volador {
	public void volar() { System.out.println("Volando alto!"); }
}
```
{% endraw %}

üí° Usa `sealed classes` (Java 17+) para restringir jerarqu√≠as:

{% raw %}
```java
sealed class Figura permits Circulo, Cuadrado {}
```
{% endraw %}

---

## ‚öôÔ∏è 5. Colecciones y Streams

### ü™£ Colecciones

{% raw %}
```java
List<String> nombres = new ArrayList<>();
nombres.add("Ana");
nombres.add("Luis");

Set<Integer> numeros = Set.of(1,2,3);
Map<String,Integer> edades = Map.of("Ana",25, "Luis",30);
```
{% endraw %}

### üßµ Streams API

{% raw %}
```java
List<Integer> pares = numeros.stream()
	.filter(n -> n % 2 == 0)
	.map(n -> n * 10)
	.toList();
```
{% endraw %}

üí° **Trucos Streams:**

* Usa `peek()` solo para debug.
* Evita streams anidados; usa `flatMap()`.
* Para colecciones grandes, usa `parallelStream()` (cuidado con IO).

---

## üîÅ 6. Lambdas y Funcional

{% raw %}
```java
List<String> lista = List.of("a", "b", "c");
lista.forEach(s -> System.out.println(s.toUpperCase()));

Predicate<Integer> mayorDe10 = x -> x > 10;
Function<String, Integer> longitud = String::length;
```
{% endraw %}

üí° **Tips:**

* `var` se puede usar en lambdas:
  `(var x, var y) -> x + y`
* Usa `Comparator.comparing()` para ordenar f√°cilmente:

{% raw %}
```java
lista.sort(Comparator.comparing(String::length).reversed());
```
{% endraw %}

---

## üíæ 7. Excepciones

{% raw %}
```java
try {
	int x = 10 / 0;
} catch (ArithmeticException e) {
	System.err.println("Error: " + e.getMessage());
} finally {
	System.out.println("Finalizado");
}
```
{% endraw %}

üí° **Trucos comunes:**

* No atrapes `Exception` gen√©rica.
* Crea excepciones personalizadas (`extends RuntimeException`).
* Usa `try-with-resources` para cerrar streams o conexiones.

{% raw %}
```java
try (var lector = new BufferedReader(new FileReader("archivo.txt"))) {
	lector.lines().forEach(System.out::println);
}
```
{% endraw %}

---

## üßÆ 8. Entrada/Salida y Archivos

{% raw %}
```java
Files.writeString(Path.of("datos.txt"), "Hola mundo!");
String contenido = Files.readString(Path.of("datos.txt"));
```
{% endraw %}

üí° Usa `Files.lines()` para leer grandes ficheros como stream.

---

## üß† 9. Concurrencia Moderna

### üßµ Hilos

{% raw %}
```java
new Thread(() -> System.out.println("Hilo paralelo")).start();
```
{% endraw %}

### üí° ExecutorService

{% raw %}
```java
ExecutorService pool = Executors.newFixedThreadPool(4);
pool.submit(() -> System.out.println("Task ejecutada"));
pool.shutdown();
```
{% endraw %}

### ‚ö° Virtual Threads (Java 21)

{% raw %}
```java
Thread.startVirtualThread(() -> System.out.println("Ligero y r√°pido!"));
```
{% endraw %}

---

## üåê 10. HTTP y JSON

### üîó HTTP Client (Java 11+)

{% raw %}
```java
var client = HttpClient.newHttpClient();
var req = HttpRequest.newBuilder(URI.create("https://api.github.com")).build();
var res = client.send(req, HttpResponse.BodyHandlers.ofString());
System.out.println(res.body());
```
{% endraw %}

### üì¶ JSON con Jackson

{% raw %}
```java
ObjectMapper mapper = new ObjectMapper();
String json = mapper.writeValueAsString(new Usuario("Ana", "ana@mail.com"));
Usuario u = mapper.readValue(json, Usuario.class);
```
{% endraw %}

---

## üß∞ 11. Trucos y Buenas Pr√°cticas

‚úÖ Usa `Optional<T>` en lugar de `null`:

{% raw %}
```java
Optional<String> nombre = Optional.ofNullable(usuario.getNombre());
nombre.ifPresent(System.out::println);
```
{% endraw %}

‚úÖ `record` para DTOs, evita boilerplate.
‚úÖ Usa `String.format` o `text blocks`:

{% raw %}
```java
String html = """
	<html>
		<body>Hola</body>
	</html>
	""";
```
{% endraw %}

‚úÖ Ordena dependencias con Maven o [Gradle](/automatizacion%20y%20build/gradle/).
‚úÖ Usa `@Override` SIEMPRE para evitar errores de m√©todo.

---

## ‚ö° 12. Problemas Comunes y Soluciones

| Problema                          | Causa                            | Soluci√≥n                                         |
| --------------------------------- | -------------------------------- | ------------------------------------------------ |
| `NullPointerException`            | Variable no inicializada         | Usa `Optional` o validaciones previas            |
| `ConcurrentModificationException` | Modificar lista en bucle         | Usa `Iterator.remove()` o `CopyOnWriteArrayList` |
| `ClassNotFoundException`          | Dependencia no encontrada        | Verifica `classpath` y `pom.xml`                 |
| `StackOverflowError`              | Recursi√≥n infinita               | A√±adir condici√≥n base o tail recursion           |
| `OutOfMemoryError`                | Fugas en colecciones             | Monitorear con VisualVM o JConsole       |
| `LazyInitializationException`     | Acceso a entidad fuera de sesi√≥n | Usa `fetch = EAGER` o `JOIN FETCH`               |

---

## üß† 13. Cheatsheet R√°pido de Comandos

| Acci√≥n              | C√≥digo                                           |
| ------------------- | ------------------------------------------------ |
| Imprimir en consola | `System.out.println()`                           |
| Leer entrada        | `new Scanner(System.in).nextLine()`              |
| Redondear           | `Math.round(3.7)`                                |
| Ordenar lista       | `lista.sort(Comparator.naturalOrder())`          |
| Crear hilo          | `new Thread(runnable).start()`                   |
| Leer JSON           | `mapper.readValue(json, Clase.class)`            |
| Crear archivo       | `Files.write(Path.of("x.txt"), data.getBytes())` |

---

## üß© 14. Herramientas y Frameworks Clave

* [Springboot](/backend/springboot/) ‚Üí apps empresariales.
* JPA / Hibernate ‚Üí persistencia ORM.
* Maven / [Gradle](/automatizacion%20y%20build/gradle/) ‚Üí build y dependencias.
* Lombok ‚Üí elimina boilerplate (`@Getter`, `@Builder`).
* JUnit5 / Mockito ‚Üí testing.
* [Docker](/software%20engineering/docker/) + [Kubernetes](/virtualizacion/kubernetes/) ‚Üí despliegue cloud-ready.

---

## üß± 15. Ejemplo Completo

{% raw %}
```java
@SpringBootApplication
public class DemoApp {
	public static void main(String[] args) {
		SpringApplication.run(DemoApp.class, args);
	}
}

@RestController
@RequestMapping("/api")
class HelloController {
	@GetMapping("/hola")
	String hola() {
		return "Hola desde Spring Boot + Java 21!";
	}
}
```
{% endraw %}

---

## üß© Enlaces Recomendados

* Java y Arquitectura Empresarial
* Fundamentos Internos de Java y la JVM
* [Testing](/testing/testing/)
* [Springboot](/backend/springboot/)
* [Patrones de dise√±o](/computer%20science/patrones-de-dise-o/)
* Concurrencia
* Streams y Lambdas

---

> **Resumen:**
> Esta gu√≠a sirve como referencia r√°pida y pr√°ctica de Java moderno (Java 17‚Äì21), con ejemplos, trucos y soluciones a errores comunes para acelerar el desarrollo profesional.


Perfecto üí™ ‚Äî aqu√≠ tienes la **extensi√≥n avanzada** de tu gu√≠a Java, centrada en **rendimiento, profiling y optimizaci√≥n de la JVM**, actualizada a **2025**.
Se complementa perfectamente con tu nota principal, sin repetir conceptos.

---

# ‚öôÔ∏è Java ‚Äì Rendimiento, Profiling y Optimizaci√≥n JVM (2025)
`$= dv.current().file.tags.join(" ")`

> Gu√≠a avanzada de optimizaci√≥n de rendimiento en Java: an√°lisis de la JVM, JIT, GC tuning, herramientas de profiling y patrones de eficiencia.  
> Aplicable a entornos [Springboot](/backend/springboot/), Microservicios, [Docker](/software%20engineering/docker/), Cloud y producci√≥n.

---

## üî¨ 1. Entendiendo el rendimiento en Java

Java es *r√°pido* gracias al **JIT (Just-In-Time Compiler)**, pero el rendimiento depende de:
- Configuraci√≥n correcta de la **JVM**
- Eficiencia en **uso de memoria**
- Reducci√≥n de **bloqueos y sincronizaci√≥n**
- An√°lisis con **profiler**

üí° *Principio base*: medir antes de optimizar ‚Äî *"What you don't measure, you can't improve."*

---

## üß† 2. La JVM por dentro

### üîπ Componentes clave
- **ClassLoader** ‚Üí carga clases y dependencias.
- **JIT Compiler (C1/C2)** ‚Üí compila bytecode a c√≥digo nativo optimizado.
- **GC (Garbage Collector)** ‚Üí gestiona memoria autom√°tica.
- **Heap & Stack** ‚Üí memoria de objetos y de ejecuci√≥n.

üìä Usa:
{% raw %}
```bash
java -XshowSettings:all -version
```
{% endraw %}`

para ver configuraci√≥n completa.

---

## ‚ö° 3. JIT Compiler: optimizaci√≥n en caliente

El **JIT** convierte bytecode en c√≥digo nativo *justo a tiempo*.

### üß© Trucos y ajustes

| Opci√≥n                   | Descripci√≥n                                         |
| ------------------------ | --------------------------------------------------- |
| `-XX:+PrintCompilation`  | Muestra m√©todos compilados JIT                      |
| `-XX:+TieredCompilation` | H√≠brido C1 + C2 para balance velocidad/optimizaci√≥n |
| `-XX:+PrintInlining`     | Ver qu√© m√©todos se inlinan                          |
| `-XX:MaxInlineSize=200`  | Aumenta el tama√±o m√°ximo de m√©todos inlinables      |

üí° **Tip:** evita micro-m√©todos innecesarios ‚Äî el JIT optimiza llamadas frecuentes pero los m√©todos demasiado grandes pueden impedir *inlining*.

---

## üßπ 4. Garbage Collector (GC) Tuning

### üî∏ Coleccionadores modernos

| GC                             | Ideal para                                  | Caracter√≠sticas                      |
| ------------------------------ | ------------------------------------------- | ------------------------------------ |
| **G1 GC** *(default Java 17+)* | Apps server, latencia baja                  | Equilibrio entre throughput y pausas |
| **ZGC**                        | Microservicios, apps de baja latencia       | Pausas < 10 ms                       |
| **Shenandoah**                 | Apps interactivas, servidores con mucha RAM | Compacci√≥n concurrente               |
| **Parallel GC**                | Jobs batch, CPU alta                        | Rendimiento bruto                    |

### ‚öôÔ∏è Configuraci√≥n b√°sica

{% raw %}
```bash
java -XX:+UseG1GC -Xms512m -Xmx2g -XX:+PrintGCDetails -Xlog:gc
```
{% endraw %}

üí° **Trucos:**

* Ajusta `-Xmx` y `-Xms` iguales para evitar *heap expansion*.
* Usa `-XX:+UseStringDeduplication` para ahorrar memoria con strings repetidos.
* Monitorea pausas con `-Xlog:gc*:file=gc.log:time,uptime,level,tags`.

---

## üîç 5. Profiling y Monitoreo

### üîπ Herramientas nativas de Java

| Herramienta   | Uso                                            |
| ------------- | ---------------------------------------------- |
| **jconsole**  | Monitoreo en tiempo real de heap, threads, CPU |
| **jvisualvm** | Profiling completo (CPU, heap, GC)             |
| **jcmd**      | Comandos en vivo (`jcmd <pid> GC.heap_info`)   |
| **jstack**    | Dump de hilos bloqueados                       |
| **jmap**      | Heap dump para an√°lisis offline                |
| **jstat**     | Estad√≠sticas de GC y compilador                |

### üß∞ Ejemplo:

{% raw %}
```bash
jcmd <PID> GC.heap_dump heapdump.hprof
```
{% endraw %}

Luego abre con VisualVM ‚Üí *File ‚Üí Load... ‚Üí heapdump.hprof*

---

## üîé 6. Java Flight Recorder (JFR)

üì¶ Integrado desde Java 11+, ofrece profiling **de bajo overhead**.

### Activar JFR en ejecuci√≥n:

{% raw %}
```bash
java -XX:StartFlightRecording=filename=app.jfr,duration=60s,settings=profile
```
{% endraw %}

### Analizar resultados:

* Abre con **JDK Mission Control (JMC)**.
* Analiza GC, compilaci√≥n, I/O, CPU, locks, heap, threads.

üí° *Truco*: ejecuta sesiones JFR peri√≥dicas en producci√≥n para detectar degradaciones antes de que impacten usuarios.

---

## üßÆ 7. Medici√≥n de rendimiento en c√≥digo

Usa **JMH (Java Microbenchmark Harness)** para medir m√©todos o algoritmos.

{% raw %}
```java
@BenchmarkMode(Mode.Throughput)
@OutputTimeUnit(TimeUnit.MILLISECONDS)
@State(Scope.Benchmark)
public class MiBenchmark {

	private List<Integer> lista = IntStream.range(0, 1000).boxed().toList();

	@Benchmark
	public int sumaStream() {
		return lista.stream().reduce(0, Integer::sum);
	}

	@Benchmark
	public int sumaFor() {
		int total = 0;
		for (int n : lista) total += n;
		return total;
	}
}
```
{% endraw %}

Ejecuci√≥n:

{% raw %}
```bash
mvn clean install
java -jar target/benchmarks.jar
```
{% endraw %}

üí° **Truco:** nunca uses `System.nanoTime()` manualmente para comparar ‚Äî JMH compensa JIT warmup y GC.

---

## üßµ 8. Concurrencia y rendimiento

### üß© Problemas comunes

| Problema        | Causa                              | Soluci√≥n                                              |
| --------------- | ---------------------------------- | ----------------------------------------------------- |
| Bloqueos largos | `synchronized` excesivo            | Usa `ReentrantLock`, `StampedLock`, o `ReadWriteLock` |
| Deadlocks       | Recursos compartidos mal ordenados | Usa `ThreadMXBean` para detectar                      |
| CPU alta        | `parallelStream()` sin control     | Limita `ForkJoinPool.commonPool()`                    |
| Contenci√≥n      | Variables globales compartidas     | Usa `ThreadLocal` o `Atomic*`                         |

### üí° Tips:

* Usa **Virtual Threads (Project Loom, Java 21)** para I/O masivo.
* Evita crear `ExecutorService` por request.
* Usa `CompletableFuture` para programaci√≥n reactiva.

---

## üîê 9. Buenas pr√°cticas de rendimiento

‚úÖ **Reduce Boxing/Unboxing**

{% raw %}
```java
int suma = Integer.valueOf(10) + 2; // Evita autobox
```
{% endraw %}

‚úÖ **Evita concatenaci√≥n excesiva de Strings**
Usa `StringBuilder` o `String.join()`

‚úÖ **Colecciones adecuadas**

* `ArrayList` > `LinkedList` (salvo inserciones frecuentes en medio)
* `EnumMap` / `EnumSet` para enums
* `ConcurrentHashMap` para multi-thread

‚úÖ **Evita crear objetos innecesarios**

{% raw %}
```java
private static final Pattern P = Pattern.compile("\\d+");
```
{% endraw %}

(no recrees el patr√≥n en cada llamada)

‚úÖ **Usa caches ligeras**
`Map<String, Object> cache = new ConcurrentHashMap<>();`

---

## üß† 10. Diagn√≥stico en producci√≥n

{% raw %}
```bash
# Ver uso de heap y GC
jstat -gc <PID> 1s 10

# Hilos bloqueados
jstack <PID> | grep BLOCKED

# Top consumo CPU
top -H -p <PID>

# Dump heap y analizar con Eclipse MAT o VisualVM
jmap -dump:live,format=b,file=heap.hprof <PID>
```
{% endraw %}

### üî• Ejemplo real:

**Problema:** pausas GC largas
**Soluci√≥n:** migrar de G1 a ZGC

{% raw %}
```bash
-XX:+UseZGC -Xmx2g -Xms2g
```
{% endraw %}

---

## üöÄ 11. Optimizaci√≥n en entornos Cloud / Spring Boot

### üîß JVM en contenedores

{% raw %}
```bash
# Ajusta autom√°ticamente heap seg√∫n cgroups (Java 10+)
java -XX:+UseContainerSupport -XshowSettings:vm
```
{% endraw %}

### üß© Spring Boot tips

* Usa `spring-context-indexer` para arranque m√°s r√°pido.
* Desactiva autoconfiguraciones innecesarias:

{% raw %}
```yaml
spring:
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration
```
{% endraw %}

* Usa `@ConfigurationProperties` en lugar de `@Value` para configuraci√≥n masiva.

### üß† Image Build Optimizations

* Usa GraalVM para generar ejecutables nativos:

  {% raw %}
```bash
  native-image -jar app.jar
  ```
{% endraw %}
* Usa *Layered JARs* (`spring-boot:build-image`) para caching en Docker.

---

## üìà 12. Herramientas recomendadas (2025)

| Herramienta                           | Prop√≥sito                                  |
| ------------------------------------- | ------------------------------------------ |
| **VisualVM**                          | Perfilado de CPU y memoria                 |
| **JDK Mission Control (JMC)**         | An√°lisis JFR                               |
| **JProfiler / YourKit**               | Profiling comercial avanzado               |
| **Async Profiler**                    | Muestreo de CPU nativo, compatible con JFR |
| **Eclipse MAT**                       | An√°lisis de heap dumps grandes             |
| **Micrometer + Prometheus + Grafana** | Monitoreo Spring Boot                      |
| **Java Flight Recorder + Loki**       | Logging + Telemetr√≠a                       |

---

## üß© 13. Scripts √∫tiles

### üßÆ Heap size din√°mico

{% raw %}
```bash
export JAVA_OPTS="-Xms512m -Xmx2g -XX:+UseG1GC -XX:+HeapDumpOnOutOfMemoryError"
```
{% endraw %}

### üìä Registrar rendimiento

{% raw %}
```bash
java -Xlog:gc*:file=gc.log:tags,time,uptime,level
```
{% endraw %}

### üß© Visualizar heap en Docker

{% raw %}
```bash
docker exec -it myapp jcmd 1 GC.heap_info
```
{% endraw %}

---

## üß© 14. Recursos Recomendados

* Java y Arquitectura Empresarial
* [Springboot](/backend/springboot/)
* VisualVM
* JDK Mission Control
* GraalVM
* Micrometer
* [[Performance Tuning Guide (Oracle)](https://docs.oracle.com/en/java/javase/21/performance/index.html)]
* [JEP 444: Virtual Threads](https://openjdk.org/jeps/444)

---

> **Resumen:**
> Esta nota ampl√≠a la gu√≠a principal con herramientas y t√©cnicas de profiling, optimizaci√≥n de memoria, GC tuning y an√°lisis de rendimiento real.
> Ideal para entornos de producci√≥n, microservicios y aplicaciones cr√≠ticas en Java 21 y [Springboot](/backend/springboot/).

# üß† Cheatsheet Completo de Comandos Java (2025)

## üì¶ B√°sicos del compilador y ejecuci√≥n

- **Compilar un archivo Java**
	{% raw %}
```bash
	javac Main.java
	```
{% endraw %}
	Genera `Main.class` (bytecode).

- **Ejecutar una clase compilada**
	{% raw %}
```bash
	java Main
	```
{% endraw %}

- **Compilar y ejecutar directamente**
	{% raw %}
```bash
	java Main.java
	```
{% endraw %}
	*(Desde Java 11 puedes ejecutar un .java directamente sin compilar antes.)*

- **Compilar varios archivos**
	{% raw %}
```bash
	javac src/com/ejemplo/*.java
	```
{% endraw %}

- **Especificar carpeta de salida para .class**
	{% raw %}
```bash
	javac -d out src/com/ejemplo/*.java
	java -cp out com.ejemplo.Main
	```
{% endraw %}

- **Eliminar archivos compilados**
	{% raw %}
```bash
	rm *.class
	```
{% endraw %}

---

## üß≠ Classpath y Paquetes

- **Ejecutar una clase con paquetes**
	{% raw %}
```bash
	java com.amigoscode.Main
	```
{% endraw %}

- **A√±adir varios paths al classpath**
	{% raw %}
```bash
	java -cp ".:libs/*" com.amigoscode.Main
	```
{% endraw %}

- **Definir classpath al compilar**
	{% raw %}
```bash
	javac -cp libs/* -d out src/com/app/Main.java
	```
{% endraw %}

- **Crear paquete**
	{% raw %}
```java
	package com.app.util;
	```
{% endraw %}

---

## üß∞ Crear y usar archivos JAR

- **Empaquetar clases compiladas en un JAR**
	{% raw %}
```bash
	jar cf app.jar -C out/ .
	```
{% endraw %}

- **Ejecutar un JAR**
	{% raw %}
```bash
	java -jar app.jar
	```
{% endraw %}

- **Crear JAR ejecutable con `Main-Class`**
	{% raw %}
```bash
	jar cfe app.jar com.ejemplo.Main -C out .
	```
{% endraw %}

- **Listar contenido del JAR**
	{% raw %}
```bash
	jar tf app.jar
	```
{% endraw %}

- **Extraer contenido**
	{% raw %}
```bash
	jar xf app.jar
	```
{% endraw %}

---

## üß© Modularizaci√≥n (Java 9+)

- **Compilar m√≥dulo**
	{% raw %}
```bash
	javac -d out --module-source-path src $(find src -name "*.java")
	```
{% endraw %}

- **Ejecutar m√≥dulo**
	{% raw %}
```bash
	java --module-path out -m com.ejemplo/com.ejemplo.Main
	```
{% endraw %}

---

## ü™Ñ Java Tooling (JDK Utilities)

### üîç `javap` ‚Äì Desensamblar bytecode
{% raw %}
```bash
javap -c -p com.ejemplo.Main
```
{% endraw %}`

Muestra los bytecodes generados y los m√©todos privados (`-p`).

### üßÆ `jstat` ‚Äì Estad√≠sticas de la JVM

{% raw %}
```bash
jstat -gc <pid> 1000
```
{% endraw %}

Muestra estad√≠sticas de Garbage Collection cada segundo.

### üß† `jinfo` ‚Äì Configuraci√≥n de JVM en ejecuci√≥n

{% raw %}
```bash
jinfo <pid>
```
{% endraw %}

### üîß `jmap` ‚Äì Mapear heap

{% raw %}
```bash
jmap -heap <pid>
jmap -histo <pid>
```
{% endraw %}

Muestra el uso de memoria y conteo de objetos.

### üßπ `jcmd` ‚Äì Interfaz moderna de diagn√≥stico

{% raw %}
```bash
jcmd <pid> VM.flags
jcmd <pid> GC.run
jcmd <pid> Thread.print
```
{% endraw %}

### üöÄ `jconsole` ‚Äì Monitor GUI

{% raw %}
```bash
jconsole
```
{% endraw %}

Conecta a una JVM local o remota.

### üî• `jfr` / `jcmd JFR` ‚Äì Java Flight Recorder

Grabaci√≥n de perfiles de rendimiento:

{% raw %}
```bash
jcmd <pid> JFR.start name=apprecord filename=recording.jfr
jcmd <pid> JFR.dump name=apprecord
jcmd <pid> JFR.stop name=apprecord
```
{% endraw %}

Abrir el `.jfr` con **Java Mission Control (JMC)**.

### üìà `visualvm` ‚Äì Monitor visual de JVM

{% raw %}
```bash
visualvm
```
{% endraw %}

Herramienta gr√°fica para profiling, heap dumps, CPU usage y GC.

---

## ‚öôÔ∏è Gesti√≥n de versiones (Java 11+)

* **Ver versi√≥n instalada**

  {% raw %}
```bash
  java -version
  ```
{% endraw %}

* **Listar todas las herramientas JDK**

  {% raw %}
```bash
  java --help
  ```
{% endraw %}

* **Cambiar versi√≥n con SDKMAN**

  {% raw %}
```bash
  sdk list java
  sdk use java 21-tem
  ```
{% endraw %}

---

## üß™ Testing desde terminal

* **JUnit con Maven**

  {% raw %}
```bash
  mvn test
  ```
{% endraw %}

* **JUnit con Gradle**

  {% raw %}
```bash
  gradle test
  ```
{% endraw %}

---

## ‚ö° Trucos de rendimiento

* **Activar modo r√°pido JIT**

  {% raw %}
```bash
  java -XX:+TieredCompilation -XX:+AggressiveOpts Main
  ```
{% endraw %}

* **Ver detalles del Garbage Collector**

  {% raw %}
```bash
  java -XX:+PrintGCDetails -XX:+PrintGCDateStamps Main
  ```
{% endraw %}

* **Usar G1GC o ZGC**

  {% raw %}
```bash
  java -XX:+UseG1GC Main
  java -XX:+UseZGC Main
  ```
{% endraw %}

* **Limitar memoria**

  {% raw %}
```bash
  java -Xms512m -Xmx2g Main
  ```
{% endraw %}

* **Obtener estad√≠sticas de compilaci√≥n JIT**

  {% raw %}
```bash
  java -XX:+PrintCompilation -XX:+PrintInlining Main
  ```
{% endraw %}

---

## üß© Comandos √∫tiles extra

* **Depurar**

  {% raw %}
```bash
  jdb Main
  ```
{% endraw %}

* **Generar documentaci√≥n Javadoc**

  {% raw %}
```bash
  javadoc -d docs src/com/ejemplo/*.java
  ```
{% endraw %}

* **Compilar con advertencias**

  {% raw %}
```bash
  javac -Xlint:all Main.java
  ```
{% endraw %}

* **Ver rutas de instalaci√≥n**

  {% raw %}
```bash
  echo $JAVA_HOME
  where java
  ```
{% endraw %}

* **Ver librer√≠as cargadas**

  {% raw %}
```bash
  jcmd <pid> VM.native_memory summary
  ```
{% endraw %}

---

## üßæ Enlaces √∫tiles

* [Java CLI Tools Docs (Oracle)](https://docs.oracle.com/en/java/javase/23/docs/specs/man/index.html)
* [JVM Flags Explorer](https://chriswhocodes.com/)
* [VisualVM](https://visualvm.github.io/)
* [JMC / Flight Recorder](https://www.oracle.com/java/technologies/jdk-mission-control.html)

---

## üí° Tip Pro

Usa un *alias shell* para simplificar:

{% raw %}
```bash
alias jrun='javac $1.java && java $1'
```
{% endraw %}

Ejemplo:

{% raw %}
```bash
jrun Main
```
{% endraw %}

---

# üß∞ Cheatsheet de Consola Profesional ‚Äì Java (2025)

## üîπ Fundamentos

| Acci√≥n | Comando | Ejemplo / Notas |
|--------|----------|-----------------|
| Ver versi√≥n instalada | `java -version` | Muestra versi√≥n del JRE y JVM |
| Compilar c√≥digo fuente | `javac <archivo>.java` | `javac Main.java` |
| Ejecutar bytecode | `java <Clase>` | `java Main` |
| Compilar y ejecutar (Java 11+) | `java <archivo>.java` | Sin generar `.class` |
| Compilar m√∫ltiples fuentes | `javac src/com/app/*.java` | √ötil para proyectos peque√±os |
| Salida compilada personalizada | `javac -d out src/*.java` | `java -cp out com.app.Main` |
| Borrar `.class` | `rm *.class` | Limpieza r√°pida |

---

## üì¶ Paquetes y Classpath

| Uso | Comando / Ejemplo | Descripci√≥n |
|-----|--------------------|-------------|
| Paquete dentro de c√≥digo | `package com.app.utils;` | Define namespace |
| Ejecutar clase con paquete | `java com.app.Main` | Desde ra√≠z del proyecto |
| A√±adir dependencias | `java -cp ".:libs/*" Main` | Linux/Mac (`;` en Windows) |
| Compilar con dependencias | `javac -cp libs/* -d out src/*.java` | Con librer√≠as externas |
| Variable de entorno | `export CLASSPATH=.:libs/*` | Configuraci√≥n global |

---

## üß± Archivos JAR

| Acci√≥n | Comando | Ejemplo |
|--------|----------|---------|
| Crear JAR simple | `jar cf app.jar -C out .` | Empaqueta clases compiladas |
| Crear JAR ejecutable | `jar cfe app.jar com.app.Main -C out .` | Con clase principal |
| Ejecutar JAR | `java -jar app.jar` | Ejecuta la app |
| Listar contenido | `jar tf app.jar` | Inspecciona el contenido |
| Extraer contenido | `jar xf app.jar` | Desempaqueta JAR |

---

## üß© Modularizaci√≥n (Java 9+)

| Tarea | Comando | Descripci√≥n |
|--------|----------|-------------|
| Compilar m√≥dulos | `javac --module-source-path src -d out $(find src -name "*.java")` | Compila proyecto modular |
| Ejecutar m√≥dulo | `java --module-path out -m com.app/com.app.Main` | Ejecuci√≥n modular |

---

## üßÆ Herramientas de Diagn√≥stico (JDK)

| Herramienta | Uso | Ejemplo / Descripci√≥n |
|--------------|-----|------------------------|
| `jps` | Lista procesos Java activos | `jps -l` |
| `jinfo` | Configuraci√≥n JVM | `jinfo <pid>` |
| `jstat` | M√©tricas GC / memoria | `jstat -gc <pid> 1000` |
| `jmap` | Heap dump o histogramas | `jmap -histo <pid>` |
| `jcmd` | API moderna de comandos | `jcmd <pid> GC.run`, `jcmd <pid> VM.flags` |
| `jconsole` | GUI monitor JVM | `jconsole` |
| `visualvm` | Monitor visual avanzado | `visualvm` |
| `jfr` / `JFR` | Flight Recorder | `jcmd <pid> JFR.start filename=recording.jfr` |
| `jdb` | Depurador CLI | `jdb Main` |
| `javap` | Desensamblar bytecode | `javap -c com.app.Main` |

---

## üöÄ Optimizaci√≥n y JVM Flags

| √Årea | Flag / Comando | Descripci√≥n |
|------|----------------|-------------|
| Ver todos los flags | `java -XX:+PrintFlagsFinal` | Lista completa de opciones |
| L√≠mite de memoria | `-Xms512m -Xmx2g` | Define tama√±o inicial y m√°ximo del heap |
| Selecci√≥n GC | `-XX:+UseG1GC` / `-XX:+UseZGC` | Cambia el recolector |
| Mostrar GC logs | `-Xlog:gc*,gc+ref=debug` | Diagn√≥stico de recolecci√≥n |
| Mostrar compilaciones JIT | `-XX:+PrintCompilation -XX:+PrintInlining` | Analiza optimizaciones |
| Encender Tiered Compilation | `-XX:+TieredCompilation` | Mezcla C1 y C2 JIT |
| Ver uso nativo | `jcmd <pid> VM.native_memory summary` | Diagn√≥stico avanzado |
| Detener GC manual | `jcmd <pid> GC.run` | Forzar recolecci√≥n |

---

## üß† Profiling y Rendimiento

| Herramienta | Comando / Uso | Descripci√≥n |
|--------------|---------------|-------------|
| **VisualVM** | `visualvm` | Profiling CPU/heap y an√°lisis en vivo |
| **Java Flight Recorder (JFR)** | `jcmd <pid> JFR.start name=recording filename=profile.jfr` | Captura datos de rendimiento |
| **Java Mission Control (JMC)** | GUI | Analiza `.jfr` para encontrar cuellos de botella |
| **jstat** | `jstat -gcutil <pid> 1000` | Tasa de uso de GC cada segundo |
| **jmap** | `jmap -histo <pid>` | Cuenta objetos en heap |
| **Async Profiler** | `java -agentpath:libasyncProfiler.so=start,event=cpu,file=profile.html -jar app.jar` | Perfilado nativo, ultraligero |

---

## üß™ Testing CLI

| Herramienta | Comando | Descripci√≥n |
|--------------|----------|-------------|
| Maven | `mvn test` | Ejecuta pruebas unitarias |
| Gradle | `gradle test` | Idem con Gradle |
| JUnit (directo) | `java -jar junit-platform-console-standalone.jar --scan-class-path` | CLI runner para JUnit 5 |
| Coverage | `mvn test jacoco:report` | Genera informe de cobertura |

---

## üßæ Documentaci√≥n

| Acci√≥n | Comando | Ejemplo |
|--------|----------|---------|
| Generar Javadoc | `javadoc -d docs src/*.java` | Crea documentaci√≥n HTML |
| Solo una clase | `javadoc Main.java` | Doc individual |

---

## üß∞ Otros √∫tiles

| Acci√≥n | Comando | Descripci√≥n |
|--------|----------|-------------|
| Buscar instalaci√≥n | `where java` / `which java` | Ruta binaria |
| Ver `JAVA_HOME` | `echo $JAVA_HOME` | Ubicaci√≥n del SDK |
| Listar herramientas JDK | `java --help` | Comandos disponibles |
| Versiones instaladas (SDKMAN) | `sdk list java` | Cambiar entre versiones |
| Activar versi√≥n | `sdk use java 21-tem` | Cambia el entorno activo |
| Comprobar encoding | `java -XshowSettings:properties | grep encoding` | Ver configuraci√≥n de caracteres |

---

## üß† Alias √∫tiles para consola

{% raw %}
```bash
alias jrun='javac $1.java && java $1'
alias jheap='jcmd $(jps -q | head -1) GC.heap_info'
alias jmem='jstat -gc $(jps -q | head -1) 1000'
```
{% endraw %}`

Ejemplo:

{% raw %}
```bash
jrun Main
```
{% endraw %}

---

## üíé Recursos recomendados

* üîó [Documentaci√≥n oficial JDK 23](https://docs.oracle.com/en/java/javase/23/)
* üîó [JVM Flag Reference (Chris Newland)](https://chriswhocodes.com/)
* üîó [VisualVM](https://visualvm.github.io/)
* üîó [Java Mission Control (JMC)](https://www.oracle.com/java/technologies/jdk-mission-control.html)
* üîó [Async Profiler](https://github.com/jvm-profiling-tools/async-profiler)

---

## ‚ö° Ejemplo completo: ejecutar con tuning

{% raw %}
```bash
java \
  -Xms512m -Xmx4g \
  -XX:+UseG1GC \
  -XX:+TieredCompilation \
  -XX:+PrintGCDetails \
  -XX:+PrintCompilation \
  -jar app.jar
```
{% endraw %}

---

## üß© Debug remoto y monitoreo

| Prop√≥sito                   | Flag / Ejemplo                                                         | Descripci√≥n              |
| --------------------------- | ---------------------------------------------------------------------- | ------------------------ |
| Habilitar depuraci√≥n remota | `-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005` | Adjunta un IDE remoto    |
| Ver threads activos         | `jcmd <pid> Thread.print`                                              | Diagn√≥stico de deadlocks |
| Heap dump manual            | `jmap -dump:live,format=b,file=heapdump.hprof <pid>`                   | Exporta heap             |
| An√°lisis heapdump           | `jvisualvm` o `Eclipse MAT`                                            | Detectar memory leaks    |

---

## ü™∂ Pro Tips

* **Usa `jcmd` en lugar de `jmap`, `jinfo`, `jstack`** ‚Üí m√°s r√°pido y soportado.
* **Siempre activa `-Xlog:gc*` en producci√≥n.**
* **`JFR` + `VisualVM` combinan bajo overhead y an√°lisis en vivo.**
* **`SDKMAN`** es la mejor forma de gestionar m√∫ltiples JDKs.
* **`javac --release <versi√≥n>`** garantiza compatibilidad binaria.

---

üìò *‚ÄúUn buen ingeniero Java domina la JVM desde la consola.‚Äù*


# omnivore Java
{% raw %}
```base
type: list
name: "Notas con #java en Omnivore"
order:
  - property: date_saved
    direction: desc
columns:
  - file.name
  - date_saved
filters:
  and:
    - file.inFolder("Omnivore")
    - file.hasTag("java")
views:
  - type: table
    name: Table
    sort:
      - property: file.mtime
        direction: DESC

```
{% endraw %}
