---
date: 2025-04-14 01:48
title: nagios
tags:
keywords:
source:
status: üåü
Parent: "[[Area-Sistemas]]"
cssclasses:
public_note: "true"
category: nagios
categories:
  - nagios
  - monitoreo
  - hide-embedded-header1
  - wide
---
# nagios
``$= dv.current().file.tags.join(" ")``

- [monitoreo](/uncategorized/monitoreo/)
- [Docker](/software%20engineering/docker/)
- [Nagios Core Services Platform](https://www.nagios.org/)
- [Imagen Docker oficial (jasonrivers/nagios)](https://hub.docker.com/r/jasonrivers/nagios)
- monitorizar servicios
- [Instalaci√≥n de Nagios Core en Docker (Medium)](https://medium.com/@mormsophen15/how-to-install-nagios-core-on-docker-dada63e030ee)

## Descripci√≥n General
Nagios es una de las primeras plataformas de monitoreo open source ampliamente adoptadas. Est√° orientada al monitoreo de infraestructura, servicios, dispositivos de red y aplicaciones mediante un sistema modular de plugins. Aunque su interfaz es m√°s cl√°sica en comparaci√≥n con herramientas modernas, su robustez y extensibilidad lo mantienen como un est√°ndar en muchos entornos.

## Arquitectura de Nagios

### Componentes Principales
- **Nagios Core**
	- Motor central que procesa verificaciones, gestiona alertas y ejecuta los plugins.
	- No incluye una interfaz avanzada: su consola web es funcional pero minimalista.
- **Plugins**
	- Programas externos que ejecutan pruebas espec√≠ficas: ping, HTTP, DNS, bases de datos, SNMP, etc.
	- Escritos en Bash, Perl, Python, C/C++, PowerShell o cualquier lenguaje ejecutable en el sistema.
- **NRPE (Nagios Remote Plugin Executor)**
	- Permite ejecutar plugins en m√°quinas remotas cuando no es posible hacerlo desde el servidor principal.
	- √ötil para monitoreo profundo (CPU, RAM, disco local, procesos, logs).
- **NSClient++**
	- Agente para sistemas Windows.
	- Permite monitorizar servicios, procesos, eventos y m√©tricas del sistema.
- **NCPA (Nagios Cross-Platform Agent)**
	- Agente universal compatible con Windows, Linux y macOS.
	- Env√≠o de datos v√≠a API.

### Flujo General de Funcionamiento
1. Nagios Core ejecuta plugins seg√∫n los intervalos configurados.  
2. Los plugins retornan c√≥digos de estado (OK, WARNING, CRITICAL, UNKNOWN).  
3. El scheduler procesa los resultados.  
4. Se generan alertas y notificaciones si procede.  
5. La consola web muestra estados, historiales y alertas activas.

## M√©todos de Monitoreo

### Monitoreo Activo (Active Checks)
- Ejecutados directamente por Nagios Core o por NRPE.
- Permite control total sobre intervalos, timeouts y comandos.
- Ideal para:
	- HTTP/HTTPS
	- SSH
	- SMTP/POP/IMAP
	- Procesos espec√≠ficos
	- Servicios internos

### Monitoreo Pasivo (Passive Checks)
- Servicios o agentes externos env√≠an resultados a Nagios.
- √ötil para:
	- Hosts detr√°s de firewalls.
	- Dispositivos que solo notifican estados.
	- Integraci√≥n con scripts externos o sistemas legacy.

### SNMP y Dispositivos de Red
- Nagios usa plugins SNMP para:
	- Consultar OIDs
	- Leer m√©tricas de switches, routers y firewalls
	- Detectar estados de interfaces, tr√°fico y fallos

### Agentes
- **NRPE** para Linux/Unix  
- **NSClient++** para Windows  
- **NCPA** como alternativa m√°s moderna

## Monitoreo de Servicios
Nagios sobresale en la supervisi√≥n espec√≠fica de servicios, incluyendo:
- APIs HTTP
- Motores de base de datos
- Servicios del sistema (systemd, init)
- Daemons en Unix/Linux
- Procesos Windows
- Latencia, disponibilidad y tiempos de respuesta

Los checks se definen en archivos de configuraci√≥n basados en texto, lo que permite control granular pero requiere disciplina para mantenerlos bien organizados.

## Visualizaci√≥n y Alertas

### Consola Web
- Estado de hosts y servicios
- √Årboles de dependencias
- Eventos recientes
- Historial de alertas
- Mapas b√°sicos

### Alertas
- Notificaciones por:
	- Email
	- SMS
	- Webhooks
	- Scripts personalizados
- Basadas en cambios de estado HARD/SOFT
- Totalmente configurable en `contacts` y `contact_groups`

## Integraci√≥n con Docker

### Uso con Contenedores
Ideal para laboratorios, testing o despliegues ligeros.

Ejemplo general:
- Contenedor con Nagios Core  
- Volumen para configuraciones  
- Plugins a√±adidos manualmente  
- Exposici√≥n de puertos para la consola web  

La imagen m√°s usada: **jasonrivers/nagios**

### Ventajas de Docker
- No requiere instalar paquetes complejos en la m√°quina host.  
- Permite versionar la configuraci√≥n y plugins.  
- Entorno reproducible en equipos de desarrollo y producci√≥n.

## Instalaci√≥n con Docker

### Paso B√°sico (Ejemplo)
Este comando es t√≠pico usando la imagen jasonrivers:

{% raw %}
```bash
docker run --name nagios \
	-p 8080:80 \
	-v /srv/nagios/etc:/opt/nagios/etc \
	-v /srv/nagios/var:/opt/nagios/var \
	-v /srv/nagios/plugins:/opt/Custom-Nagios-Plugins \
	jasonrivers/nagios
```
{% endraw %}`

## Configuraci√≥n y Plugins

### Configuraci√≥n por Archivos
* `nagios.cfg`
* `objects/commands.cfg`
* `objects/hosts.cfg`
* `objects/services.cfg`
* `objects/contacts.cfg`
* `objects/timeperiods.cfg`

Todo es texto plano ‚Üí control total.

### Plugins
Plugins comunes:
* `check_ping`
* `check_http`
* `check_tcp`
* `check_dns`
* `check_load`
* `check_disk`
* `check_mysql`

Extensibilidad:
* Plugins propios en Bash, Python o C/C++
* Integraci√≥n con sistemas externos v√≠a passive checks

## Casos de Uso Comunes
* Infraestructuras peque√±as o medianas
* Equipos con cultura DevOps que valoran configuraciones declarativas
* Redes con alto uso de SNMP
* Monitoreo de bases de datos y servicios web
* Escenarios legacy que requieren agentes como NRPE

## Limitaciones Comunes (y Soluciones)
* **Interfaz cl√°sica:** usarse con complementos como Centreon, Thruk, Icinga Web.
* **Escalabilidad limitada:** usar distribuido v√≠a NSCA o NCPA.
* **Curva de aprendizaje:** documentaci√≥n extensa pero configuraci√≥n manual.

Aqu√≠ tienes una versi√≥n ampliada y actualizada:

---

## Alternativas basadas en Nagios

### **Icinga**

* Es un **fork moderno de Nagios**. ([Wikipedia][1])
* Est√° reescrito (especialmente Icinga 2) para mejorar la escalabilidad, ofrecer clustering, API REST, interfaz web moderna y mayor rendimiento. ([freebsdfoundation.org][2])
* Compatible con los complementos (‚Äúplugins‚Äù) de Nagios, lo que facilita la migraci√≥n. ([freebsdfoundation.org][2])
* Documentaci√≥n oficial: **Icinga Docs** ([Icinga][3])
* Repositorio GitHub de Icinga: ([GitHub][4])
* Casos de uso destacados: monitorizaci√≥n distribuida, alta disponibilidad, integraci√≥n con herramientas modernas como Grafana, Terraform, AWS, Azure, etc. 

**Ventajas frente a Nagios:**

* Mejor gesti√≥n de configuraci√≥n y API moderna.
* Interfaz Web 2.0 m√°s usable y potente.
* Soporte para bases de datos m√°s variadas (PostgreSQL, Oracle‚Ä¶). ([Wikipedia][1])
* Arquitectura modular y escalable.

---

### **Centreon**

* Plataforma completa para monitoreo de infraestructura, redes, aplicaciones y m√°s. ([Centreon][5])
* Naci√≥ como una extensi√≥n / GUI para Nagios, pero ha evolucionado hasta ofrecer una soluci√≥n m√°s sofisticada y empresarial. ([Centreon][6])
* Conserva compatibilidad con los plugins de Nagios (motor de comprobaciones). ([Centreon][6])
* Tiene capacidades avanzadas: descubrimiento autom√°tico, dashboards, informes, alertas, notificaciones, escalabilidad, etc. ([Centreon][5])
* Sitio oficial de Centreon: ([Centreon][5])

**Ventajas frente a Nagios:**

* Interfaz m√°s accesible para usuarios no t√©cnicos.
* ‚ÄúTodo en uno‚Äù: consola + monitorizaci√≥n + alertas + reporting.
* Mejor soporte para entornos h√≠bridos (on-prem + cloud).
* Gesti√≥n m√°s escalable y profesional para empresas.

---

### **Naemon**

* Proyecto open source dise√±ado como un reemplazo moderno de Nagios Core. ([naemon.io][7])
* Basado en el n√∫cleo de **Nagios 4**, pero con muchas correcciones de errores, mejoras de rendimiento y nuevas funciones. ([naemon.io][8])
* Arquitectura modular: separa el core, los brokers, la integraci√≥n con la base de datos, etc., de forma m√°s clara. ([naemon.io][7])
* Compatible con los plugins de Nagios (ya que mantiene la interfaz de comprobaciones). ([naemon.io][7])
* Proyecto gestionado por la comunidad, con enfoque en independencia t√©cnica. ([naemon.io][8])
* Descargas y paquetes disponibles: la versi√≥n estable 1.4.4 fue lanzada en junio de 2025. ([naemon.io][9])
* Sitio oficial de Naemon: ([naemon.io][7])
* Info t√©cnica adicional: integraci√≥n con **Livestatus**, m√≥dulos NEB (Naemon Event Broker), API, gesti√≥n de resultados, escalabilidad, etc. ([naemon.io][8])
* Seg√∫n ConSol (empresa que da soporte), Naemon permite definir jerarqu√≠as de hosts, manejar notificaciones, handlers y usar una interfaz web (por ejemplo con Thruk). ([ConSol Monitoring][10])

**Ventajas frente a Nagios:**

* M√°s estable y optimizado respecto a Nagios Core ‚Äúpuro‚Äù.
* Mejor rendimiento en entornos con muchas comprobaciones.
* Modularidad que facilita mantenimiento y escalado.
* Continua compatibilidad con el ecosistema de plugins de Nagios.

---

[1]: https://en.wikipedia.org/wiki/Icinga?utm_source=chatgpt.com "Icinga"
[2]: https://freebsdfoundation.org/wp-content/uploads/2017/12/What-is-Icinga.pdf?utm_source=chatgpt.com "S E E"
[3]: https://icinga.com/docs/?utm_source=chatgpt.com "Icinga Documentation I Open Source Monitoring"
[4]: https://github.com/icinga?utm_source=chatgpt.com "Icinga ¬∑ GitHub"
[5]: https://www.centreon.com/?utm_source=chatgpt.com "Centreon: Observability Platform"
[6]: https://www.centreon.com/fr/blog-vous-aimez-nagios-vous-allez-adorer-centreon/?utm_source=chatgpt.com "Vous aimez Nagios ? Vous allez adorer Centreon !"
[7]: https://www.naemon.io/?utm_source=chatgpt.com "Naemon - Monitoring Suite"
[8]: https://www.naemon.io/project?utm_source=chatgpt.com "The project | Naemon - Monitoring Suite"
[9]: https://www.naemon.io/download?utm_source=chatgpt.com "Download | Naemon - Monitoring Suite"
[10]: https://omd.consol.de/docs/naemon/?utm_source=chatgpt.com "Naemon | ConSol Monitoring"



