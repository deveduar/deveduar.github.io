---
date: 2024-11-16 02:57
title: Docker
keywords:
source:
status: ğŸŒŸ
Parent: "[[Area-Sistemas]]"
public_note: "true"
category: Software engineering
tags:
  - docker
  - jenkins
---
# ğŸ³ Docker  

- old docker antes de procesar en gpt
- 
- Docker Avanzado OrquestaciÃ³n, Infraestructura y Estrategias de ProducciÃ³n
- Infraestructura Distribuida y Despliegue Multinube
- Infraestructura Multinube paso a paso con Terraform + Kubernetes + ArgoCD
- IntegraciÃ³n Dev + Testing + Seguridad con Docker
- DevSecOps + Supply Chain Security con Docker
- Testing Distribuido y SimulaciÃ³n de Microservicios con Docker
- Observabilidad Avanzada y Trazabilidad Distribuida
- Docker Avanzado IntegraciÃ³n, Rendimiento y Ecosistema ContemporÃ¡neo
- Docker CLI Cheatsheet
- Super Docker Cheat Sheet
## ğŸ”— Temas Relacionados
- [Linux](/sistemas/linux/)  
- [microservicios](/backend/microservicios/)  
- [Backend](/backend/backend/)  
- [Automatizacion y Build](/automatizacion%20y%20build/automatizacion-y-build/)  
- [Kubernetes](/virtualizacion/kubernetes/)  
- **Alternativa open source:** Podman  
- [Sistemas](/sistemas/sistemas/)  
- [Redes](/redes/redes/)  
- Networking-docker  
- [proxy](/backend/proxy/)  
- [nginx](/backend/nginx/)  
- [jenkins](/devops/jenkins/)  
- [devops](/devops/devops/)  
- [ciberseguridad](/ciberseguridad/ciberseguridad/)  
- [Databases](/databases/databases/)  
- [PHP](/backend/php/)  
- [Wordpress](/desarrollo%20web/wordpress/)  
- [Moodle](/desarrollo%20web/moodle/)  
- [DevSecOps](/devops/devsecops/)

## âš™ï¸ Entorno y ConfiguraciÃ³n

-  ğŸ’»  
- **Cloudflare Pages**  
- **WSL2** wsl  
	- Problemas al reinstalar  
	- Usar `hub` y `pull` para backup  
	- Rutas en `resources`  
	- Uninstall-docker-desktop  
- **Extensiones Ãºtiles**  
	- Portainer  
	- Docker Desktop Extensions (monitorizaciÃ³n, UI, limpieza)  

### ğŸ§± Montaje y Persistencia
- Montar particiones para persistencia de datos  
- Ejemplo: [Wordpress](/desarrollo%20web/wordpress/), MySQL, [Databases](/databases/databases/), [PHP](/backend/php/)  
	- Configurar puerto del contenedor, variables de entorno y acceso desde `localhost`  
	- [Docker en Windows 10 y 11 para principiantes con WSL - YouTube](https://youtu.be/vuV9JoHiYaU)

---

## ğŸš€ GuÃ­as y Cursos 
- [Aprende Docker ahora! curso completo gratis desde cero! - YouTube](https://youtu.be/4Dko5W96WHg)  
- [DOCKER De NOVATO a PRO! (CURSO COMPLETO EN ESPAÃ‘OL) - YouTube](https://youtu.be/CV_Uf3Dq-EU)  
- [Dockerize Next.js & Deploy to VPS (EASY!) - YouTube](https://youtu.be/DfNhBZUrA-U) con [nextjs](/frontend/nextjs/)  
- [Docker & Nodejs. AplicaciÃ³n de Nodejs en Docker Container - YouTube](https://youtu.be/iLlmm0L-VpQ)

---

## ğŸ§© Conceptos Clave

### ğŸ—ï¸ Arquitectura Docker
- **Host:** mÃ¡quina fÃ­sica o virtual donde corre Docker  
- **Cliente:** CLI o interfaz que envÃ­a comandos al daemon  
- **Daemon:** servicio principal que ejecuta contenedores  
- **ImÃ¡genes:** plantillas inmutables de contenedores  
- **Contenedores:** instancias ejecutables de imÃ¡genes  
- **Redes y VolÃºmenes:** aislamiento y persistencia de datos  
- **Tipos de virtualizaciÃ³n:** namespaces, cgroups, overlay networks  

---

## ğŸ§¾ Docker CLI BÃ¡sico

### ğŸ§± ImÃ¡genes y Contenedores
{% raw %}
```bash
docker ps -a           # Lista todos los contenedores
docker stop <id>       # Detiene un contenedor
docker image rm node   # Elimina una imagen
docker logs --follow   # Sigue logs de ejecuciÃ³n
docker run -d mongo    # Crea y ejecuta contenedor Mongo
```
{% endraw %}`

* Crear contenedor con nombre:
  `docker create --name nombre imagen`
* Iniciar contenedor existente:
  `docker start <id>`
* Referenciar contenedores por **nombre** o **ID**
* Renombrar contenedores para facilitar mantenimiento

---

## ğŸ”Œ Networking y Puertos

### ğŸŒ Port Mapping

{% raw %}
```bash
docker create -p27017:27017 --name ito mongo
docker run --name ito2 -p27017:27017 -d mongo
```
{% endraw %}

* `27017:27017` â†’ mapea puerto host:contenedor
* Permite acceder a servicios desde el host
* Ideal para peticiones externas (p.ej. conexiÃ³n a Mongo desde [nextjs](/frontend/nextjs/))

### ğŸ•¸ï¸ Redes Docker

{% raw %}
```bash
docker network ls          # Listar redes
docker network create red  # Crear red
docker network rm red      # Borrar red
```
{% endraw %}

* ConexiÃ³n entre contenedores mediante `--network`
* Usar nombre del contenedor como host en conexiones
* Ejemplo: conexiÃ³n `mongoose.connect("mongodb://mongo:27017/db")`

---

## ğŸ§° Dockerfile y Builds

### ğŸ“„ Crear una Imagen Personalizada

{% raw %}
```bash
docker build -t app:1 .
```
{% endraw %}

* `-t` asigna etiqueta (`nombre:versiÃ³n`)
* `.` define el contexto de build
* Usar imÃ¡genes base ligeras como **alpine**

### ğŸ§  Variables de Entorno

{% raw %}
```bash
docker create -p27017:27017 \
--name db \
--network redapp \
-e MONGO_INITDB_ROOT_PASSWORD=pass \
mongo
```
{% endraw %}

* Mantener contraseÃ±as fuera del Dockerfile
* Preferir `.env` o `env_file` en docker compose

---

## ğŸ“¦ Docker Compose

### âš™ï¸ Comandos BÃ¡sicos

{% raw %}
```bash
docker-compose up -d
docker-compose down
docker-compose up --build
```
{% endraw %}

* `docker-compose.yml` define mÃºltiples servicios
* **Links:** permiten comunicaciÃ³n entre contenedores
* **VolÃºmenes:**

  * AnÃ³nimos, host o nombrados
  * Ejemplo:

{% raw %}
```yaml
volumes:
	- mongo-data:/data/db
```
{% endraw %}

### ğŸ§± Entornos de Desarrollo

{% raw %}
```bash
docker compose -f docker-compose-dev.yml up
```
{% endraw %}

* `context: .` y `dockerfile: Dockerfile.dev`
* Soporte para **hot reload** con nodemon o watcher
* Definir ambientes separados para `dev` y `prod`

---

## ğŸ”„ Ejemplos PrÃ¡cticos

### ğŸ§© App Node.js + MongoDB

* [GitHub - nschurmann/mongoapp-curso-docker](https://github.com/nschurmann/mongoapp-curso-docker)
* Microservicio Node con Express y Mongoose
* Contenedor Mongo y backend conectados por red interna

### ğŸ Backend Python + MariaDB

* [GitHub - jmartinpizarro/backend-builderplate](https://github.com/jmartinpizarro/backend-builderplate/tree/main)

### ğŸ§ª Testeo y Linting de Dockerfiles

* [FROM:latest, An opinionated Dockerfile linter](https://www.fromlatest.io/#/)

---

## ğŸ§¹ Limpieza y OptimizaciÃ³n

### ğŸ§½ Liberar Espacio

{% raw %}
```bash
docker image prune [OPTIONS]
```
{% endraw %}

* Eliminar imÃ¡genes, contenedores o volÃºmenes no usados
* Ver guÃ­a: Docker Cleanup How to Remove Images, Containers & Volumes-

### ğŸ’¾ Reducir TamaÃ±o en WSL2

* [How to Shrink a WSL2 Virtual Disk â€“ Stephen Rees-Carter](https://stephenreescarter.net/how-to-shrink-a-wsl2-virtual-disk/)

---

## ğŸ” ProducciÃ³n y Seguridad

* [Best Practices for Container Security](https://docs.docker.com/develop/security-best-practices/)
* [Curso: Puesta en producciÃ³n, seguridad y buenas prÃ¡cticas - YouTube](https://youtu.be/eh4YS9x9CDU)

### ğŸ”’ Recomendaciones Generales

* Usar `env_file` en lugar de `env` inline
* Restringir acceso root en contenedores
* Eliminar exposiciÃ³n de puertos innecesarios
* AutenticaciÃ³n SSH con claves RSA

  {% raw %}
```bash
  ssh-copy-id usuario@servidor
  ```
{% endraw %}
* Bloquear acceso SSH no autorizado con iptables
* Configurar polÃ­ticas de `restart`, `healthcheck`, y `deploy.limits`
* Monitorear contenedores con herramientas [devops](/devops/devops/)

### ğŸ’¡ Ejemplos y Recursos

* [dockerfile-best-practices/python](https://github.com/pabpereza/dockerfile-best-practices/tree/main/python)
* [dockerfile-best-practices/java](https://github.com/pabpereza/dockerfile-best-practices/tree/main/java)

---

## ğŸ“¡ ConexiÃ³n entre Servicios y Microservicios

* Exponer puertos necesarios al host
* Definir variables de entorno globales
* Usar `network namespace` para conectar IPs
* Ejemplo: unir contenedor Mongo con servicio Next.js
* [Sirve DOCKER para un FRONTEND? / EnseÃ±ando docker a â€ª@goncypozzoâ€¬ - YouTube](https://youtu.be/2yrZquR6P9Y)

---

# omnivore [Docker](/software%20engineering/docker/)

{% raw %}
```base
type: list
name: "Notas con #docker en Omnivore"
order:
  - property: date_saved
    direction: desc
columns:
  - file.name
  - date_saved
filters:
  and:
    - file.inFolder("Omnivore")
    - file.hasTag("docker")
views:
  - type: table
    name: Table
    sort:
      - property: file.mtime
        direction: DESC

```
{% endraw %}


# omnivore [jenkins](/devops/jenkins/)

{% raw %}
```base
type: list
name: "Notas con #docker en Omnivore"
order:
  - property: date_saved
    direction: desc
columns:
  - file.name
  - date_saved
filters:
  and:
    - file.inFolder("Omnivore")
    - file.hasTag("jenkins")
views:
  - type: table
    name: Table
    sort:
      - property: file.mtime
        direction: DESC

```
{% endraw %}





