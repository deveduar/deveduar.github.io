---
date: 2025-01-29 14:08
title: OpenAPI
keywords:
source:
status: üåü
Parent: "[[Area-Prog]]"
public_note: "true"
category: Backend
tags:
  - openapi
  - backend
  - api
---
# OpenAPI
``

## Conceptos clave
- [api](/backend/api/)
- [swagger](/backend/swagger/)
- Est√°ndar para describir **APIs RESTful**
- YAML
- [Protocolos](/redes/protocolos/)

OpenAPI es una **especificaci√≥n est√°ndar** para describir APIs HTTP de forma legible por humanos y m√°quinas. Define de manera formal:
-	Endpoints disponibles
-	Par√°metros de entrada
-	Respuestas posibles
-	Modelos de datos
-	Mecanismos de autenticaci√≥n
-	Versionado y metadatos de la API

Es la base del enfoque **API First**, donde el contrato se dise√±a antes de implementar el backend o los clientes.

## Relaci√≥n con Swagger
-	**Swagger** es el ecosistema de herramientas alrededor de OpenAPI
-	OpenAPI es la **especificaci√≥n**
-	Swagger UI permite visualizar y probar la API
-	Swagger Editor permite dise√±ar el contrato en YAML o JSON

En la pr√°ctica, ambos t√©rminos se usan juntos, aunque t√©cnicamente no son lo mismo.

## Estructura de un documento OpenAPI
Un archivo OpenAPI (normalmente en YAML) se compone de varias secciones principales:

### Metadatos
-	Nombre de la API
-	Versi√≥n
-	Descripci√≥n
-	Contacto y licencia

### Servidores
-	URLs base donde se expone la API
-	Soporte para m√∫ltiples entornos (dev, staging, prod)

### Paths (endpoints)
-	Rutas HTTP (`/users`, `/orders/{id}`)
-	M√©todos (`GET`, `POST`, `PUT`, `DELETE`)
-	Par√°metros de ruta, query y headers

### Respuestas
-	C√≥digos HTTP (`200`, `400`, `404`, `500`)
-	Estructura de la respuesta
-	Tipos MIME (`application/json`)

### Componentes
-	Esquemas reutilizables (modelos de datos)
-	Par√°metros comunes
-	Respuestas est√°ndar
-	Security schemes (JWT, OAuth2, API Keys)

## Modelado de datos
-	Basado en **JSON Schema**
-	Soporta validaciones:
	-	Tipos (`string`, `number`, `array`)
	-	Restricciones (`minLength`, `pattern`, `enum`)
-	Permite composici√≥n (`oneOf`, `anyOf`, `allOf`)

Esto garantiza contratos fuertes entre backend y frontend.

## OpenAPI y est√°ndares REST
OpenAPI no impone REST, pero **encaja perfectamente** con sus principios:
-	Uso correcto de m√©todos HTTP
-	Recursos identificables por URL
-	Stateless
-	C√≥digos de estado sem√°nticos

Ayuda a documentar APIs REST de forma consistente y verificable.

## OpenAPI Generator
Herramienta clave del ecosistema para generar c√≥digo autom√°ticamente.

-	Genera **clientes** y **servidores**
-	Soporta m√∫ltiples lenguajes y frameworks
-	Reduce errores de implementaci√≥n manual
-	Asegura que el c√≥digo siga el contrato OpenAPI

[CLI Installation | OpenAPI Generator](https://openapi-generator.tech/docs/installation)

### Lenguajes y plataformas comunes
-	Java (Spring, Quarkus, Micronaut)
-	TypeScript (Fetch, Axios, Angular)
-	Maven / Gradle
-	Definiciones desde YAML o JSON

## Generaci√≥n de clientes
-	Clientes HTTP tipados
-	Manejo autom√°tico de:
	-	Endpoints
	-	Par√°metros
	-	Respuestas
	-	Errores
-	Muy usado en frontend y microservicios

Esto elimina duplicaci√≥n y desincronizaci√≥n entre equipos.

## Generaci√≥n de servidores
-	Stubs de controladores
-	Interfaces basadas en el contrato
-	Validaci√≥n autom√°tica de requests y responses

Ideal para flujos **API First**.

## Integraci√≥n con TypeScript y Zod
-	Generaci√≥n de clientes TypeScript
-	Integraci√≥n con validadores runtime como Zod
-	Contratos fuertemente tipados de extremo a extremo

[OpenAPI + Zod: Generate The Ultimate TypeScript API Clients Automatically - YouTube](https://youtu.be/QmW6_lLaxwU)

## AsyncAPI y OpenAPI
-	OpenAPI describe APIs HTTP s√≠ncronas
-	AsyncAPI describe:
	-	Eventos
	-	Mensajer√≠a
	-	Streams (Kafka, MQTT, WebSockets)

Ambas especificaciones pueden convivir en arquitecturas modernas.

[OpenApi Generator y AsynAPI, un paso m√°s all√° del API First. - YouTube](https://youtu.be/G_k639ofEYA)

## Casos de uso habituales
-	Documentaci√≥n viva de APIs
-	Contratos entre frontend y backend
-	Generaci√≥n autom√°tica de SDKs
-	Validaci√≥n de requests/responses
-	Onboarding r√°pido de nuevos desarrolladores
-	Gobernanza y versionado de APIs

## Buenas pr√°cticas
-	Dise√±ar el contrato antes de implementar
-	Reutilizar esquemas en `components`
-	Versionar la API expl√≠citamente
-	Validar que implementaci√≥n y spec coincidan
-	Automatizar generaci√≥n en CI/CD

# OpenAPI ‚Äî Conceptos avanzados y temas complementarios
$= dv.current().file.tags.join(" ")

## Versionado de APIs
-	Versionado por URL (`/v1/users`)
-	Versionado por header (`Accept: application/vnd.api.v1+json`)
-	Versionado sem√°ntico del documento OpenAPI
-	Estrategias de deprecaci√≥n documentadas en la spec

OpenAPI permite marcar endpoints, par√°metros o esquemas como **deprecated**, facilitando la evoluci√≥n controlada de la API.

## Seguridad en OpenAPI
-	Definici√≥n formal de mecanismos de autenticaci√≥n
-	Soporte nativo para:
	-	API Keys
	-	HTTP Basic / Bearer
	-	OAuth 2.0 (flows completos)
	-	OpenID Connect
-	Asignaci√≥n de scopes por endpoint

La seguridad se declara de forma centralizada y reutilizable.

## Validaci√≥n autom√°tica
-	Validaci√≥n de requests entrantes
-	Validaci√≥n de responses salientes
-	Detecci√≥n temprana de breaking changes
-	Integraci√≥n con middlewares y gateways

Permite usar OpenAPI como **fuente de verdad contractual**.

## Testing basado en OpenAPI
-	Generaci√≥n autom√°tica de tests
-	Mocking de endpoints
-	Contract testing
-	Validaci√≥n de payloads en tests de integraci√≥n

OpenAPI se convierte en base para pruebas autom√°ticas.

## Mock servers
-	Servidores simulados a partir del spec
-	Uso en frontend sin backend real
-	Soporte para ejemplos y respuestas din√°micas
-	Ideal para desarrollo paralelo

## Ejemplos y ejemplos enriquecidos
-	Ejemplos por endpoint
-	Ejemplos por esquema
-	Soporte para m√∫ltiples ejemplos
-	Mejora de DX y documentaci√≥n interactiva

Los ejemplos forman parte del contrato, no solo de la UI.

## Documentaci√≥n interactiva avanzada
-	Probar endpoints directamente desde el navegador
-	Autenticaci√≥n persistente
-	Visualizaci√≥n de modelos y relaciones
-	Soporte para m√∫ltiples servidores

OpenAPI act√∫a como **documentaci√≥n viva**.

## Extensiones personalizadas (x-*)
-	Extensiones vendor-specific
-	Metadatos para tooling interno
-	Configuraciones para gateways o frameworks
-	No rompen la compatibilidad del est√°ndar

Permiten adaptar OpenAPI a necesidades espec√≠ficas.

## API Governance
-	Est√°ndares internos de dise√±o
-	Convenciones de nombres
-	Pol√≠ticas de seguridad
-	Revisi√≥n autom√°tica del spec

OpenAPI facilita la gobernanza en organizaciones grandes.

## Linting y calidad del spec
-	Reglas de consistencia
-	Detecci√≥n de malas pr√°cticas
-	Enforcement de est√°ndares REST
-	Automatizaci√≥n en pipelines CI/CD

El contrato se trata como c√≥digo.

## Comparaci√≥n con otras aproximaciones
-	Documentaci√≥n manual (obsoleta y fr√°gil)
-	Code-first sin contrato expl√≠cito
-	GraphQL schemas
-	gRPC y Protobuf

OpenAPI destaca en APIs HTTP p√∫blicas y empresariales.

## Monorepos y OpenAPI
-	Specs compartidas entre servicios
-	Generaci√≥n de clientes internos
-	Control de cambios centralizado
-	Versionado coordinado

Ideal para arquitecturas de microservicios.

## Performance y tama√±o del spec
-	Separaci√≥n en m√∫ltiples archivos
-	Referencia entre documentos
-	Optimizaci√≥n de esquemas
-	Mantenimiento de specs grandes

Facilita escalabilidad documental.

## Migraci√≥n a OpenAPI
-	Desde APIs legacy
-	Desde documentaci√≥n informal
-	Desde frameworks code-first
-	Adopci√≥n progresiva

OpenAPI puede introducirse sin reescritura completa.

## Futuro y evoluci√≥n del est√°ndar
-	Evoluci√≥n incremental del spec
-	Mejoras en compatibilidad tooling
-	Mayor enfoque en DX
-	Convivencia con AsyncAPI y GraphQL

OpenAPI sigue siendo un pilar del ecosistema API moderno.

# OpenAPI ‚Äî Gu√≠a pr√°ctica con caso de uso completo

## Caso de uso
Dise√±o **API First** de una API REST de gesti√≥n de usuarios y generaci√≥n autom√°tica de:
-	Backend Java (Spring)
-	Cliente TypeScript
-	Documentaci√≥n interactiva

La API permitir√°:
-	Listar usuarios
-	Crear usuarios
-	Consultar usuario por ID

## Definici√≥n del contrato OpenAPI
El contrato es la **fuente de verdad** y se define antes de escribir c√≥digo.

### openapi.yaml
{% raw %}
```yaml
openapi: 3.1.0
info:
  title: Users API
  version: 1.0.0
  description: API de gesti√≥n de usuarios
servers:
  - url: https://api.example.com
paths:
  /users:
    get:
      summary: Listar usuarios
      responses:
        '200':
          description: Lista de usuarios
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
    post:
      summary: Crear usuario
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCreate'
      responses:
        '201':
          description: Usuario creado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
  /users/{id}:
    get:
      summary: Obtener usuario por ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Usuario encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '404':
          description: Usuario no encontrado
components:
  schemas:
    User:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
          format: email
        name:
          type: string
      required:
        - id
        - email
        - name
    UserCreate:
      type: object
      properties:
        email:
          type: string
          format: email
        name:
          type: string
      required:
        - email
        - name
```
{% endraw %}`

## Generaci√≥n del backend Java (Spring)

A partir del contrato se generan los stubs del servidor.

### Comando OpenAPI Generator (Spring)

{% raw %}
```bash
openapi-generator-cli generate \
  -i openapi.yaml \
  -g spring \
  -o backend-users-api \
  --additional-properties=interfaceOnly=true
```
{% endraw %}

Resultado:

* Interfaces de controladores
* Modelos Java
* Validaci√≥n autom√°tica de requests
* Contrato obligatorio para implementar

## Implementaci√≥n del controlador

El desarrollador implementa la l√≥gica sin redefinir rutas ni modelos.

### UserController.java

{% raw %}
```java
@RestController
public class UserController implements UsersApi {

    @Override
    public ResponseEntity<List<User>> usersGet() {
        return ResponseEntity.ok(List.of(
            new User("1", "john@doe.com", "John")
        ));
    }

    @Override
    public ResponseEntity<User> usersPost(UserCreate userCreate) {
        User user = new User("2", userCreate.getEmail(), userCreate.getName());
        return ResponseEntity.status(HttpStatus.CREATED).body(user);
    }

    @Override
    public ResponseEntity<User> usersIdGet(String id) {
        return ResponseEntity.ok(
            new User(id, "john@doe.com", "John")
        );
    }
}
```
{% endraw %}

## Generaci√≥n del cliente TypeScript

El mismo contrato se usa para frontend o integraciones externas.

### Comando OpenAPI Generator (TypeScript)

{% raw %}
```bash
openapi-generator-cli generate \
  -i openapi.yaml \
  -g typescript-fetch \
  -o frontend-api-client
```
{% endraw %}

## Uso del cliente TypeScript

El cliente generado ya conoce:

* Endpoints
* Tipos
* Errores

### Uso en frontend

{% raw %}
```ts
import { UsersApi } from './frontend-api-client';

const api = new UsersApi({
  basePath: 'https://api.example.com'
});

const users = await api.usersGet();
const newUser = await api.usersPost({
  email: 'jane@doe.com',
  name: 'Jane'
});
```
{% endraw %}

## Documentaci√≥n interactiva

El mismo archivo `openapi.yaml` se usa para:

* Swagger UI
* Swagger Editor
* Mock servers

Permite probar la API sin escribir clientes manuales.

## Mock server para desarrollo

Frontend puede trabajar sin backend real.

### Mock con OpenAPI

{% raw %}
```bash
openapi-generator-cli generate \
  -i openapi.yaml \
  -g nodejs-express-server \
  -o mock-server
```
{% endraw %}

## Validaci√≥n autom√°tica en runtime

* Request inv√°lido ‚Üí 400 autom√°tico
* Response fuera de contrato ‚Üí error detectable
* Modelos siempre coherentes

OpenAPI act√∫a como **firewall de contrato**.

## Testing basado en contrato

* Tests de integraci√≥n alineados al spec
* Detecci√≥n de breaking changes
* Tests generados o asistidos autom√°ticamente

El contrato gu√≠a el testing.

## Flujo completo recomendado

* Dise√±ar `openapi.yaml`
* Versionar el spec
* Generar backend y clientes
* Implementar l√≥gica
* Validar en CI/CD
* Publicar documentaci√≥n

Este flujo evita desincronizaci√≥n y errores humanos.

# OpenAPI ‚Äî Recursos, estado en 2025 y alternativas

## Repositorios oficiales y documentaci√≥n
- [OpenAPI](/backend/openapi/) ‚Äî Especificaci√≥n est√°ndar para APIs RESTful.
- [swagger](/backend/swagger/) ‚Äî Ecosistema de herramientas.
- YAML ‚Äî Formato habitual de definici√≥n de especificaciones.

## Documentaci√≥n interactiva y visualizaci√≥n
- **Swagger UI** ‚Äî Visualiza y prueba tu API desde la especificaci√≥n. [Swagger UI](https://swagger.io/tools/swagger-ui/)  
- **Redoc** ‚Äî Renderizado **r√°pido y est√©tico** para documentaci√≥n de OpenAPI. [Redoc](https://github.com/Redocly/redoc)  
- **ReDocly** ‚Äî Extiende Redoc con gobernanza, versionado y linting. [ReDocly](https://redocly.com/)  
- **DapperDox** ‚Äî Integraci√≥n de Swagger con Markdown para documentaci√≥n enriquecida y navegaci√≥n f√°cil. [DapperDox](https://dapperdox.io/)  
- **API Hub**, **Fern**, **Speakeasy** ‚Äî Generaci√≥n de documentaci√≥n y SDKs autom√°ticos desde OpenAPI (2025). [API Hub](https://apihub.io/), [Fern](https://fern.dev/), [Speakeasy](https://speakeasyapi.dev/)

## Dise√±o y colaboraci√≥n
- **Postman** ‚Äî Importa specs OpenAPI, genera tests, mocks y documentaci√≥n colaborativa. [Postman](https://www.postman.com/)  
- **Stoplight** ‚Äî Editor visual, dise√±o, docs y pruebas. [Stoplight](https://stoplight.io/)  
- **SwaggerHub** ‚Äî Plataforma colaborativa para dise√±o y documentaci√≥n OpenAPI. [SwaggerHub](https://swagger.io/tools/swaggerhub/)  
- **Apicurio Studio** ‚Äî Editor colaborativo, validaci√≥n en tiempo real y soporte OpenAPI/AsyncAPI. [Apicurio Studio](https://www.apicur.io/)  
- **RepreZen API Studio** ‚Äî Modelado avanzado y documentaci√≥n. [RepreZen](https://www.reprezen.com/)

## Generaci√≥n de c√≥digo
- **OpenAPI Generator** ‚Äî Genera clientes, servidores y documentaci√≥n desde spec. [OpenAPI Generator](https://openapi-generator.tech/)  
- **Swagger Codegen** ‚Äî Alternativa cl√°sica para generaci√≥n de c√≥digo. [Swagger Codegen](https://github.com/swagger-api/swagger-codegen)  
- **Scalar OpenAPI Parser** ‚Äî Parser moderno con soporte de referencia y planificado soporte para OpenAPI 3.2 (2025). [Scalar OpenAPI Parser](https://www.scalar.com/openapi-parser)

## Mocking y pruebas
- **Prism** ‚Äî Mock server que valida requests contra el spec. [Prism](https://stoplight.io/open-source/prism/)  
- **Dredd** ‚Äî Valida cumplimiento contra la especificaci√≥n en CI/CD. [Dredd](https://dredd.org/en/latest/)  
- **Mockoon** ‚Äî Mock de API con interfaz gr√°fica. [Mockoon](https://mockoon.com/)  
- **Hoverfly**, **Imposter**, **Microcks** ‚Äî Herramientas de simulaci√≥n y test desde specs (listadas en repositorios de recursos 2025). [Hoverfly](https://hoverfly.io/), [Imposter](https://www.mbtest.org/), [Microcks](https://microcks.io/)

## Linting, gobernanza y calidad
- **Spectral** ‚Äî Linter JSON/YAML con reglas de estilo y mejores pr√°cticas para OpenAPI. [Spectral](https://stoplight.io/open-source/spectral/)  
- **OpenAPI Enforcer** ‚Äî Valida requests/responses en runtime y tests contra la spec. [OpenAPI Enforcer](https://www.npmjs.com/package/openapi-enforcer)

## Alternativas y herramientas adicionales
- **Insomnia** ‚Äî Cliente API moderno con soporte OpenAPI, tambi√©n √∫til para pruebas y colaboraci√≥n ligera. [Insomnia](https://insomnia.rest/)  
- **Hoppscotch** ‚Äî Cliente web gratuito, ligero y r√°pido con soporte de varios protocolos. [Hoppscotch](https://hoppscotch.io/)  
- **Bruno** ‚Äî API client con enfoque Git-first para versiones de requests. [Bruno](https://brunoapi.com/)  
- **Apidog** ‚Äî Plataforma API todo-en-uno con dise√±o, tests, mocks y gesti√≥n de entornos (soporta OpenAPI e integraci√≥n con IA). [Apidog](https://apidog.com/)

## Alternativas a OpenAPI como especificaci√≥n
- **AsyncAPI** ‚Äî Standard para APIs **event-driven** (mensajer√≠a y streams), complementario a OpenAPI. [AsyncAPI](https://www.asyncapi.com/)  
- **RAML** ‚Äî DSL YAML para describir APIs (menos extendido, sin soporte REST full con HATEOAS). [RAML](https://raml.org/)

## Integraciones espec√≠ficas de plataformas
- Azure: Crear conectores personalizados desde una definici√≥n OpenAPI para **Logic Apps** / **Power Apps**. [Azure Logic Apps](https://learn.microsoft.com/en-us/connectors/custom-connectors/define-openapi-definition)  
- Azure AI Foundry permite usar specs OpenAPI como herramientas dentro de proyectos de agentes. [Azure AI Foundry](https://learn.microsoft.com/en-us/azure/ai-services/agents/how-to/tools/openapi-spec-samples)

## Recursos educativos y comunidad
- OpenAPI Initiative newsletters y ecosistema activo con eventos y noticias sobre versiones y herramientas. [OpenAPI Initiative](https://www.openapis.org/)  
- Repositorios como *Track Awesome Lists* mantienen listados actualizados de herramientas relacionadas con OpenAPI y APIs. [Track Awesome Lists](https://github.com/sindresorhus/awesome)

## Recursos acad√©micos recientes (IA y testing)
- **LlamaRestTest**: investigaci√≥n sobre testing de APIs REST usando LLMs para inputs de test generados desde OpenAPI. [arXiv](https://arxiv.org/abs/2501.08598)  
- **SATORI**: generaci√≥n autom√°tica de or√°culos de test est√°ticos para APIs REST a partir de OpenAPI. [arXiv](https://arxiv.org/abs/2508.16318)  
- **Multi-agent systems para API-First**: automatizaci√≥n avanzada de desarrollo y generaci√≥n desde spec con feedback de logs. [arXiv](https://arxiv.org/abs/2510.19274)
