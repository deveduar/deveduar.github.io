---
date: 2025-01-09 02:28
title: django
keywords:
source:
status: üåü
Parent: "[[Area-Prog]]"
public_note: "true"
category: python
tags:
  - python
  - django
  - Backend
---
# Django
`$= dv.current().file.tags.join(" ")`

## Introducci√≥n
Django es un framework de desarrollo web de alto nivel para **Python** que fomenta un desarrollo r√°pido y limpio, siguiendo el patr√≥n **MTV (Model-Template-View)**. Est√° dise√±ado para facilitar la creaci√≥n de aplicaciones web seguras, escalables y mantenibles.

- [Backend](/uncategorized/backend/)
- [python](/software%20engineering/python/) 
- [REST Assured](https://rest-assured.io/)
- [Home - Django REST framework](https://www.django-rest-framework.org/)
- [Django documentation | Django documentation | Django](https://docs.djangoproject.com/en/5.0/)
## Fundamentos de Django
- **MTV (Model-Template-View)**: Variante del patr√≥n MVC.  
	- **Model**: Define la estructura de la base de datos y maneja la l√≥gica de los datos.  
	- **Template**: Plantillas HTML que representan la vista que se entrega al usuario.  
	- **View**: Controla la l√≥gica que responde a las solicitudes del usuario y renderiza las respuestas.  
- **ORM (Object-Relational Mapping)**: Permite interactuar con la base de datos usando objetos de Python en lugar de SQL directo.  
- **Routing y URLs**: Sistema de rutas que conecta URLs con funciones o clases de las vistas.  
- **Administraci√≥n autom√°tica**: Panel de administraci√≥n listo para usar con personalizaci√≥n m√≠nima.  
- **Seguridad integrada**: Protege contra ataques comunes como XSS, CSRF, SQL Injection y clickjacking.  

## Instalaci√≥n y configuraci√≥n b√°sica
{% raw %}
```bash
# Crear un entorno virtual
python -m venv venv
source venv/bin/activate  # Linux/macOS
venv\Scripts\activate     # Windows

# Instalar Django
pip install django

# Crear un proyecto
django-admin startproject mi_proyecto

# Ejecutar servidor de desarrollo
python manage.py runserver
```
{% endraw %}`

## Estructura de un proyecto Django

* `manage.py`: Script de gesti√≥n del proyecto.
* Carpeta del proyecto (ej. `mi_proyecto/`):
* `settings.py`: Configuraciones del proyecto.
* `urls.py`: Configuraci√≥n de rutas globales.
* `wsgi.py` / `asgi.py`: Entrada del servidor web.
* Aplicaciones (apps): Componentes modulares que encapsulan funcionalidades espec√≠ficas.

## Modelos y Base de Datos

* Definici√≥n de modelos:

{% raw %}
```python
from django.db import models

class Autor(models.Model):
	nombre = models.CharField(max_length=100)
	email = models.EmailField(unique=True)
```
{% endraw %}

* Migraciones:

{% raw %}
```bash
python manage.py makemigrations
python manage.py migrate
```
{% endraw %}

* Consultas ORM:

{% raw %}
```python
# Crear
autor = Autor.objects.create(nombre="Eduardo", email="eduardo@example.com")

# Leer
autores = Autor.objects.all()

# Filtrar
autor = Autor.objects.get(nombre="Eduardo")

# Actualizar
autor.email = "nuevo_email@example.com"
autor.save()

# Eliminar
autor.delete()
```
{% endraw %}

## Vistas

* Funciones basadas en vistas (FBV):

{% raw %}
```python
from django.http import HttpResponse

def inicio(request):
	return HttpResponse("Bienvenido a Django")
```
{% endraw %}

* Clases basadas en vistas (CBV):

{% raw %}
```python
from django.views import View
from django.http import HttpResponse

class InicioView(View):
	def get(self, request):
		return HttpResponse("Bienvenido a Django desde CBV")
```
{% endraw %}

## URLs

{% raw %}
```python
from django.urls import path
from .views import inicio, InicioView

urlpatterns = [
	path('', inicio, name='inicio'),
	path('inicio-cbv/', InicioView.as_view(), name='inicio-cbv'),
]
```
{% endraw %}

## Templates

* Ejemplo de template HTML (`inicio.html`):

{% raw %}
```html
<!DOCTYPE html>
<html>
<head>
	<title>Inicio</title>
</head>
<body>
	<h1>Bienvenido, {{ usuario }}</h1>
</body>
</html>
```
{% endraw %}

* Renderizando desde vista:

{% raw %}
```python
from django.shortcuts import render

def inicio(request):
	contexto = {"usuario": "Eduardo"}
	return render(request, "inicio.html", contexto)
```
{% endraw %}

## Formularios

* Definici√≥n de formularios:

{% raw %}
```python
from django import forms

class ContactoForm(forms.Form):
	nombre = forms.CharField(max_length=100)
	email = forms.EmailField()
	mensaje = forms.CharField(widget=forms.Textarea)
```
{% endraw %}

* Manejo en vistas:

{% raw %}
```python
def contacto(request):
	if request.method == "POST":
		form = ContactoForm(request.POST)
		if form.is_valid():
			# Procesar datos
			pass
	else:
		form = ContactoForm()
	return render(request, "contacto.html", {"form": form})
```
{% endraw %}

## Django REST Framework (DRF)

* Extiende Django para construir APIs REST de forma r√°pida y segura.
* Conceptos clave:

  * **Serializers**: Convierte modelos a JSON y viceversa.
  * **ViewSets**: Combina l√≥gica CRUD en una sola clase.
  * **Routers**: Simplifica la definici√≥n de rutas para APIs.
* Ejemplo de serializer:

{% raw %}
```python
from rest_framework import serializers
from .models import Autor

class AutorSerializer(serializers.ModelSerializer):
	class Meta:
		model = Autor
		fields = '__all__'
```
{% endraw %}

* Ejemplo de ViewSet:

{% raw %}
```python
from rest_framework import viewsets
from .models import Autor
from .serializers import AutorSerializer

class AutorViewSet(viewsets.ModelViewSet):
	queryset = Autor.objects.all()
	serializer_class = AutorSerializer
```
{% endraw %}

* Registro de rutas en `urls.py`:

{% raw %}
```python
from rest_framework import routers
from .views import AutorViewSet

router = routers.DefaultRouter()
router.register(r'autores', AutorViewSet)

urlpatterns = [
	path('api/', include(router.urls)),
]
```
{% endraw %}

## Seguridad y buenas pr√°cticas

* Mantener `SECRET_KEY` segura y no subirla a repositorios.
* Usar `DEBUG=False` en producci√≥n.
* Validar y sanear todos los inputs de usuario.
* Implementar autenticaci√≥n y permisos en DRF.

# Django Avanzado

## Autenticaci√≥n y Autorizaci√≥n
- **Usuarios y Grupos**:  
	- Django proporciona un modelo de usuario incorporado (`User`) y soporte para **grupos y permisos**.  
	- Permite asignar permisos espec√≠ficos a usuarios o grupos de usuarios.

{% raw %}
```python
from django.contrib.auth.models import User, Group, Permission

# Crear un usuario
usuario = User.objects.create_user(username='eduardo', password='mi_password')

# Crear un grupo
grupo = Group.objects.create(name='editores')

# Asignar usuario al grupo
usuario.groups.add(grupo)

# Asignar permisos al grupo
permiso = Permission.objects.get(codename='add_autor')
grupo.permissions.add(permiso)
```
{% endraw %}`

* **Autenticaci√≥n basada en tokens y JWT (DRF)**:
  * Permite que clientes externos se autentiquen mediante tokens.
  * Uso com√∫n con APIs REST.

{% raw %}
```python
from rest_framework_simplejwt.tokens import RefreshToken

refresh = RefreshToken.for_user(usuario)
access_token = str(refresh.access_token)
```
{% endraw %}

* **Integraci√≥n OAuth2 / social login**:
  * Se puede integrar con `django-allauth` o `social-auth-app-django` para login con Google, GitHub, etc.

---

## Middlewares

* Los **middlewares** son clases que procesan solicitudes antes o despu√©s de la vista.
* Se usan para logging, autenticaci√≥n, manejo de sesiones, etc.

{% raw %}
```python
class MiMiddleware:
	def __init__(self, get_response):
		self.get_response = get_response

	def __call__(self, request):
		print("Antes de la vista")
		response = self.get_response(request)
		print("Despu√©s de la vista")
		return response
```
{% endraw %}

* Se agregan en `settings.py` bajo `MIDDLEWARE`.

---

## Se√±ales (Signals)

* Permiten ejecutar c√≥digo autom√°ticamente ante ciertos eventos de modelos.

{% raw %}
```python
from django.db.models.signals import post_save
from django.dispatch import receiver
from .models import Autor

@receiver(post_save, sender=Autor)
def alerta_nuevo_autor(sender, instance, created, **kwargs):
	if created:
		print(f"Se ha creado un nuevo autor: {instance.nombre}")
```
{% endraw %}

---

## Testing en Django

* **Unit tests y integration tests** usando `TestCase`.

{% raw %}
```python
from django.test import TestCase
from .models import Autor

class AutorTestCase(TestCase):
	def setUp(self):
		Autor.objects.create(nombre="Eduardo", email="edu@example.com")

	def test_autor_creado(self):
		autor = Autor.objects.get(nombre="Eduardo")
		self.assertEqual(autor.email, "edu@example.com")
```
{% endraw %}

* **Pruebas de APIs con DRF**:

{% raw %}
```python
from rest_framework.test import APIClient
from django.test import TestCase

class AutorAPITestCase(TestCase):
	def setUp(self):
		self.client = APIClient()
	def test_listar_autores(self):
		response = self.client.get('/api/autores/')
		self.assertEqual(response.status_code, 200)
```
{% endraw %}

---

## Optimizaci√≥n y Performance

* **Querysets eficientes**:
  * `select_related` para relaciones ForeignKey y OneToOne
  * `prefetch_related` para relaciones ManyToMany

{% raw %}
```python
autores = Autor.objects.select_related('perfil').all()
```
{% endraw %}

* **Cach√© con Redis**:
  * Django soporta backend de cache `redis` para mejorar rendimiento.

{% raw %}
```python
CACHES = {
	'default': {
		'BACKEND': 'django_redis.cache.RedisCache',
		'LOCATION': 'redis://127.0.0.1:6379/1',
	}
}
```
{% endraw %}

* **Paginaci√≥n y throttling en APIs**:
  * Evita sobrecargar la API y mejora la experiencia del cliente.

---

## Internacionalizaci√≥n y Localizaci√≥n

* Traducciones con `gettext` y `gettext_lazy`.

{% raw %}
```python
from django.utils.translation import gettext_lazy as _

class Autor(models.Model):
	nombre = models.CharField(_("Nombre"), max_length=100)
```
{% endraw %}

* Configuraci√≥n de idiomas y zonas horarias en `settings.py`.

---

## Tareas en Segundo Plano

* Uso de **Celery** para jobs as√≠ncronos.

{% raw %}
```python
# tasks.py
from celery import shared_task

@shared_task
def enviar_email(usuario_id):
	# L√≥gica para enviar email
	pass
```
{% endraw %}

* Integraci√≥n con Django y broker como Redis o RabbitMQ.

---

## Deployment y DevOps

* **Producci√≥n segura**:

  * `DEBUG=False`
  * `ALLOWED_HOSTS` correctamente configurado
  * Uso de `Gunicorn` como servidor WSGI y `Nginx` como proxy inverso

* **Dockerizaci√≥n**:

{% raw %}
```dockerfile
FROM python:3.12
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["gunicorn", "mi_proyecto.wsgi:application", "--bind", "0.0.0.0:8000"]
```
{% endraw %}

* **CI/CD**: Integrar tests, migraciones y despliegues autom√°ticos.

---

## Seguridad y Buenas Pr√°cticas Avanzadas

* Protecci√≥n CSRF y XSS habilitada por defecto.
* Sanitizar inputs de usuario antes de guardarlos o renderizarlos.
* Configuraci√≥n de headers de seguridad: HSTS, Content Security Policy.
* Implementaci√≥n de **autenticaci√≥n fuerte** y revisi√≥n de permisos en APIs.
* Revisar vulnerabilidades con `django-secure` o an√°lisis de dependencias.

---

# Fundamentos y Arquitectura de Django

## Arquitectura General
- Django sigue el patr√≥n **MTV (Model-Template-View)**, similar a MVC pero con diferencias en la nomenclatura:
	- **Model**: Representa la estructura de datos y la l√≥gica de acceso a la base de datos.  
	- **Template**: Plantillas HTML que definen la presentaci√≥n.  
	- **View**: L√≥gica que procesa solicitudes, consulta modelos y devuelve respuestas renderizadas.

- Flujo de una solicitud:
	1. El usuario realiza una petici√≥n HTTP.  
	2. Django encuentra la vista correspondiente a trav√©s del **URL dispatcher** (`urls.py`).  
	3. La **vista** procesa la solicitud: consulta modelos, aplica l√≥gica de negocio y selecciona un template.  
	4. Se renderiza el **template** y se devuelve una respuesta HTTP al cliente.

---

## Componentes Clave
- **Proyecto Django**: Conjunto de configuraciones generales (`settings.py`, `urls.py`, `wsgi.py/asgi.py`).  
- **Aplicaciones (Apps)**: M√≥dulos que encapsulan funcionalidades espec√≠ficas. Un proyecto puede contener m√∫ltiples apps.  
- **URLs y Routing**: Sistema que mapea URLs a vistas.  
- **ORM (Object-Relational Mapping)**: Permite trabajar con bases de datos mediante objetos Python, evitando escribir SQL directamente.  
- **Middleware**: Capas que procesan solicitudes/respuestas antes o despu√©s de las vistas.  
- **Templates**: Sistema de renderizado de HTML con variables y l√≥gica de presentaci√≥n.  

---

## Organizaci√≥n de un Proyecto Django
{% raw %}
```

mi_proyecto/
‚îÇ
‚îú‚îÄ manage.py           # Script de gesti√≥n
‚îú‚îÄ mi_proyecto/        # Configuraci√≥n global del proyecto
‚îÇ   ‚îú‚îÄ settings.py     # Configuraci√≥n principal
‚îÇ   ‚îú‚îÄ urls.py         # URLs globales
‚îÇ   ‚îú‚îÄ wsgi.py         # Entrada para servidores WSGI
‚îÇ   ‚îî‚îÄ asgi.py         # Entrada para servidores ASGI
‚îî‚îÄ apps/               # Carpeta opcional para apps del proyecto
‚îú‚îÄ app1/
‚îÇ   ‚îú‚îÄ models.py
‚îÇ   ‚îú‚îÄ views.py
‚îÇ   ‚îú‚îÄ urls.py
‚îÇ   ‚îî‚îÄ templates/
‚îî‚îÄ app2/

```
{% endraw %}

---

## Flujo de Datos Interno
1. **Solicitud HTTP** llega al servidor Django.  
2. Pasa por la **cadena de middlewares** (autenticaci√≥n, seguridad, sesiones).  
3. Se dirige al **URL dispatcher** para identificar la vista correspondiente.  
4. La **vista** procesa la solicitud:  
	- Interact√∫a con **modelos** y la **base de datos**.  
	- Prepara datos para la presentaci√≥n.  
5. Se renderiza un **template** (o se devuelve JSON en APIs).  
6. La respuesta HTTP retorna al cliente.

---

## Fundamentos Esenciales
- **Reactividad de datos**: Los cambios en los modelos se reflejan mediante consultas y templates din√°micos.  
- **Seguridad integrada**: Django protege contra CSRF, XSS, SQL Injection y clickjacking por defecto.  
- **Modularidad**: Cada app es independiente y reutilizable.  
- **Escalabilidad**: Posibilidad de a√±adir apps, middleware y servicios externos (cach√©, colas de tareas) sin romper la arquitectura.  
- **DRY (Don't Repeat Yourself)**: Filosof√≠a de minimizar duplicaci√≥n de c√≥digo mediante templates, herencia de vistas y apps reutilizables.  

---

## Integraci√≥n con Django REST Framework (DRF)
- DRF extiende Django para construir APIs siguiendo la misma arquitectura:  
	- **Serializers** transforman modelos a JSON.  
	- **ViewSets** gestionan CRUD en una sola clase.  
	- **Routers** simplifican el enrutamiento de APIs.  

---

## Buenas Pr√°cticas de Arquitectura
- Mantener apps **modulares y cohesivas**.  
- Separar l√≥gica de negocio (views, services) de presentaci√≥n (templates).  
- Utilizar **signals** para l√≥gica reactiva a eventos de modelos.  
- Aprovechar **middleware** para responsabilidades transversales (logging, seguridad, caching).  
- Dise√±ar URLs limpias y consistentes, evitando acoplar la estructura de la base de datos a las rutas.  


# Django ‚Äî estado 2025: arquitectura, fundamentos y novedades recientes  

## Contexto general y versiones recientes üì¶  
- La versi√≥n m√°s reciente es Django 6.0 (candidata a lanzamiento, diciembre de 2025). ([djangoproject.com](https://www.djangoproject.com/community/dsf/?utm_source=chatgpt.com))  
- La versi√≥n estable anterior, Django 5.2 (LTS), fue lanzada en abril de 2025. ([gahd.net](https://gahd.net/notes/django-5-2/?utm_source=chatgpt.com))  
- Django 5.2 recibir√° soporte de seguridad hasta abril de 2028. ([gahd.net](https://gahd.net/notes/django-5-2/?utm_source=chatgpt.com))  
- En producci√≥n se recomienda usar versiones estables (o LTS) compatibles con la versi√≥n de Python, idealmente Python ‚â•‚ÄØ3.12. ([docs.djangoproject.com](https://docs.djangoproject.com/id/6.0/releases/5.0/?utm_source=chatgpt.com))

---

## Arquitectura, fundamentos y flujo en Django (2025)  

### Principios estructurales  
- Django mantiene su filosof√≠a de ‚Äúbatteries‚Äëincluded‚Äù: ofrece su propio ORM, sistema de URL/routing, sistema de plantillas (templates), configuraci√≥n central, gesti√≥n de usuarios, administraci√≥n (admin), etc.  
- Sigue usando el patr√≥n **MTV** (Model‚ÄìTemplate‚ÄìView), equivalente adaptado de MVC:  
  - **Model**: definici√≥n de datos y l√≥gica de acceso a base de datos.  
  - **Template**: presentaci√≥n (HTML, etc.).  
  - **View**: l√≥gica que procesa peticiones, consulta modelos y renderiza respuestas.  
- Una **aplicaci√≥n (app)** representa un m√≥dulo funcional independiente; un proyecto puede contener m√∫ltiples apps.  

### Flujo de petici√≥n cl√°sico (sincr√≥nico)  
1. Llega una petici√≥n HTTP.  
2. Pasa por los **middlewares** configurados.  
3. El URL dispatcher (`urls.py`) selecciona la vista adecuada.  
4. La vista procesa la l√≥gica: consulta modelos, aplica l√≥gica de negocio, prepara datos.  
5. Se renderiza un template o se devuelve otro tipo de respuesta (JSON, etc).  
6. Se env√≠a la respuesta al cliente.

---

## Novedades 2024‚Äì2025: modernizaci√≥n, async y m√°s  

### Soporte as√≠ncrono y concurrencia mejorada  
- Con Django 5.x se ampli√≥ el soporte a vistas as√≠ncronas, middlewares as√≠ncronos y a ORM con queries async. Facilita construir aplicaciones en tiempo real (chat, websockets, notificaciones, etc.). ([docs.djangoproject.com](https://docs.djangoproject.com/id/6.0/releases/5.0/?utm_source=chatgpt.com))  
- La compatibilidad con Python ‚â•‚ÄØ3.12 permite aprovechar mejoras de rendimiento y type‚Äëhints m√°s s√≥lidos. ([buildwebproject.com](https://www.buildwebproject.com/post/django-5-and-the-future-of-python-web-development-in-2025/?utm_source=chatgpt.com))

### Mejoras en productividad y experiencia de desarrollo  
- En Django 5.2 los modelos de todas las apps se importan autom√°ticamente al abrir la shell (`manage.py shell`), simplificando pruebas r√°pidas o debug. ([gahd.net](https://gahd.net/notes/django-5-2/?utm_source=chatgpt.com))  
- Soporte para **llaves primarias compuestas (composite primary keys)** en modelos. ([gahd.net](https://gahd.net/notes/django-5-2/?utm_source=chatgpt.com))  
- Nuevos widgets de formulario: `ColorInput`, `SearchInput`, `TelInput`, aline√°ndose con HTML5 y mejorando UX en formularios. ([bastakiss.com](https://bastakiss.com/blog/news-2/django-5-2-released-what-s-new-793?utm_source=chatgpt.com))  

### Admin, interfaz y API design moderno  
- El panel de administraci√≥n (admin) contin√∫a mejor√°ndose para ser m√°s usable, flexible y moderno. ([ecosistemastartup.com](https://ecosistemastartup.com/django-6-0-novedades-seguridad-y-automatizacion-en-saas/?utm_source=chatgpt.com))  
- Creciente tendencia hacia dise√±o **API‚Äëfirst / headless**: muchos proyectos usan Django solo como backend + API (REST o GraphQL) y manejan el frontend con frameworks modernos (React, Vue, etc.). ([seye.dev](https://seye.dev/articles/django-development-2025?utm_source=chatgpt.com))  
- Integraciones m√°s maduras con GraphQL mediante librer√≠as del ecosistema (por ejemplo Graphene-Django), facilitando APIs flexibles y optimizadas. ([bastakiss.com](https://bastakiss.com/blog/news-2/django-in-2025-the-future-of-the-web-framework-540?utm_source=chatgpt.com))  

---

## Seguridad, mantenimiento y soporte a 2025  
- Django sigue siendo uno de los frameworks m√°s seguros: incluye protecci√≥n contra XSS, CSRF, SQL injection, etc. ([seye.dev](https://seye.dev/articles/django-development-2025?utm_source=chatgpt.com))  
- A finales de 2025 el equipo lanz√≥ parches de seguridad para varias ramas soportadas, incluyendo la serie 5.2. ([djangoproject.com](https://www.djangoproject.com/community/dsf/?utm_source=chatgpt.com))  
- Se recomienda mantenerse actualizado ante vulnerabilidades recientes. ([unaaldia.hispasec.com](https://unaaldia.hispasec.com/2025/12/inyeccion-sql-y-dos-nuevas-vulnerabilidades-sacuden-el-ecosistema-django.html?utm_source=chatgpt.com))  

---

## Tendencias recientes en el ecosistema Django  
- Uso creciente de Django como backend + API (REST/GraphQL) + frontend desacoplado (SPAs). ([seye.dev](https://seye.dev/articles/django-development-2025?utm_source=chatgpt.com))  
- Ecosistema de paquetes activo: autenticaci√≥n, APIs, CMS, deploy, async, etc. ([blog.jetbrains.com](https://blog.jetbrains.com/pycharm/2025/10/the-state-of-django-2025?utm_source=chatgpt.com))  
- Mayor integraci√≥n con WebSockets, workflows as√≠ncronos, contenedores, CI/CD, microservicios, AI/ML. ([bastakiss.com](https://bastakiss.com/blog/news-2/django-in-2025-the-future-of-the-web-framework-540?utm_source=chatgpt.com))  

---

## Qu√© revisar hoy si empiezas un proyecto Django  
- Usa al menos **Django 5.2 (LTS)** o prep√°rate para migrar pronto a 6.0.  
- Usa **Python 3.12+** para aprovechar mejoras de rendimiento y compatibilidad.  
- Para real‚Äëtime o I/O intensivo, adopta vistas, ORM y middlewares as√≠ncronos.  
- Si el backend servir√° APIs (REST o GraphQL), considera un frontend desacoplado.  
- Mant√©n dependencias actualizadas y revisa vulnerabilidades peri√≥dicamente.  

---

## Recursos √∫tiles 2025  
- Documentaci√≥n oficial de Django (v.‚ÄØ5.x / 6.0) ([docs.djangoproject.com](https://docs.djangoproject.com/es/5.2/faq/install/?utm_source=chatgpt.com))  
- Blog de estado 2025 del ecosistema Django ([blog.jetbrains.com](https://blog.jetbrains.com/pycharm/2025/10/the-state-of-django-2025?utm_source=chatgpt.com))  
- Art√≠culos sobre desarrollo con Django en 2025: async, tendencias, API‚Äëfirst, etc. ([seye.dev](https://seye.dev/articles/django-development-2025?utm_source=chatgpt.com))  

