---
date: 2025-06-09 14:21
title: scraping
keywords:
source:
status: 
Parent: "[[Area-Prog]]"
public_note: "true"
category: Scraping
tags:
  - Scraping
  - Automatizacion y Build
---
# scraping
`$= dv.current().file.tags.join(" ")`

- [Automatizacion y Build](/uncategorized/automatizacion-y-build/)
- [Testing](/testing/testing/)
- [Data Science](/uncategorized/data-science/)
- Scraping a sitios web
- [CICD](/devops/cicd/)
- 
- [E2E - End to End Testing](/testing/e2e---end-to-end-testing/)
- [Playwright](/testing/playwright/)
- cookies y sesiones
## Herramientas y Librer铆as

- **Automatizaci贸n y Build**  
	Tareas de scraping a menudo requieren integraci贸n con pipelines de automatizaci贸n y herramientas de build para programar ejecuciones peri贸dicas o integrarse con tests. [Automatizacion y Build](/uncategorized/automatizacion-y-build/)

- **Testing de Scraping**  
	Validar que los datos extra铆dos son correctos y que los selectores no se rompen con cambios en el sitio web. [Testing](/testing/testing/)  
	- Unit tests para funciones de parsing.  
	- Tests end-to-end usando frameworks como [Playwright](/testing/playwright/) o [E2E - End to End Testing](/testing/e2e---end-to-end-testing/).

- **Data Science**  
	Los datos extra铆dos suelen procesarse y analizarse usando t茅cnicas de data science para obtener insights. [Data Science](/uncategorized/data-science/)

- **Scraping a sitios web**  
	Extracci贸n de informaci贸n estructurada de p谩ginas web, tanto est谩ticas como din谩micas. Scraping a sitios web  
	- Manejo de cookies y sesiones para login.  
	- Respeto a `robots.txt` y l铆mites de requests.

- **Octoparse**  
	Herramienta de scraping visual con pricing seg煤n plan: [Precio | Octoparse](https://www.octoparse.es/pricing)

- **Integraciones y librer铆as**  
	- **Cheerio (npm)**: librer铆a para manipulaci贸n de HTML tipo jQuery en Node.js. [cherio - npm](https://www.npmjs.com/package/cherio)  
	- **Playwright / Puppeteer**: control de navegadores para scraping din谩mico y pruebas.  
	- APIs para extracci贸n directa cuando el sitio las ofrece.  

## Casos de uso

- Extracci贸n de listas de productos de e-commerce.  
- Monitoreo de precios y disponibilidad.  
- Obtenci贸n de datos de noticias o blogs para an谩lisis de tendencias.  
- Descarga masiva de informaci贸n p煤blica de sitios educativos o gubernamentales.

## Consideraciones t茅cnicas

- **Manejo de cookies y autenticaci贸n**  
	Para sitios que requieren login, mantener sesiones activas mediante cookies o tokens.  
- **Respeto a la 茅tica y legalidad**  
	No sobrecargar servidores y respetar t茅rminos de uso del sitio web.  
- **Optimizaci贸n y escalabilidad**  
	- Uso de colas y tareas as铆ncronas.  
	- Manejo de proxies y rotaci贸n de IP para scraping a gran escala.  

## Ejemplos de c贸digo

### Node.js + Cheerio
{% raw %}
```javascript
const axios = require('axios');
const cheerio = require('cheerio');

async function scrapeSite(url) {
	try {
		const { data } = await axios.get(url);
		const $ = cheerio.load(data);
		const items = [];
		$('selector').each((i, el) => {
			items.push($(el).text().trim());
		});
		return items;
	} catch (error) {
		console.error(error);
	}
}

scrapeSite('https://example.com').then(console.log);
```
{% endraw %}`

### Playwright - Login y extracci贸n

{% raw %}
```javascript
const { chromium } = require('playwright');

(async () => {
	const browser = await chromium.launch();
	const page = await browser.newPage();

	await page.goto('https://example.com/login');
	await page.fill('#username', 'usuario');
	await page.fill('#password', 'contrase帽a');
	await page.click('#loginButton');
	await page.waitForSelector('#dashboard');

	const data = await page.$$eval('.item', elements => elements.map(el => el.textContent.trim()));
	console.log(data);

	await browser.close();
})();
```
{% endraw %}

# Cookies e Integraciones en Web Scraping

## Cookies y Manejo de Sesiones

- **Qu茅 son las cookies**  
	Archivos peque帽os que los sitios web almacenan en el navegador del usuario para mantener informaci贸n de sesi贸n, preferencias, tracking y autenticaci贸n.

- **Importancia en Web Scraping**  
	Cookies permiten que el scraper acceda a contenido que requiere login o sesiones persistentes:  
	- Mantener una sesi贸n activa entre m煤ltiples requests.  
	- Evitar bloqueos por autenticaci贸n al acceder a p谩ginas privadas.  
	- Gestionar preferencias de usuario, idioma o regi贸n.  

- **Tipos de cookies relevantes**  
	- **Session Cookies**: expiran al cerrar el navegador; necesarias para mantener sesiones de login temporales.  
	- **Persistent Cookies**: duran m谩s tiempo y se usan para recordar preferencias o autenticaci贸n prolongada.  
	- **Secure / HttpOnly Cookies**: requieren manejo cuidadoso, especialmente al usar requests program谩ticos.  

- **Manejo t茅cnico en scraping**  
	- Librer铆as HTTP como [axios](/backend/axios/) o `requests` permiten enviar cookies manualmente.  
	- Automatizaci贸n con Playwright o Puppeteer captura cookies directamente del navegador y las reutiliza.  
	- Ejemplo con Node.js + Axios:
{% raw %}
```javascript
const axios = require('axios');

const cookies = 'sessionid=abc123; othercookie=value';
axios.get('https://example.com/private', {
	headers: { Cookie: cookies }
}).then(res => console.log(res.data));
```
{% endraw %}`

## Integraciones y su Relaci贸n con Web Scraping

- **Qu茅 son integraciones**  
    Conexi贸n de sistemas externos, APIs o herramientas de terceros para automatizar flujos de trabajo, an谩lisis o almacenamiento de datos.
    
- **Tipos de integraciones frecuentes en scraping**
    
    - **Bases de datos**: guardar datos extra铆dos directamente en MySQL, PostgreSQL, MongoDB.
    - **[ETL](/backend/etl/) y pipelines**: integraci贸n con Airflow, Prefect o n8n para programar y procesar datos autom谩ticamente.
    - **Servicios de an谩lisis**: enviar datos a plataformas de BI o Data Science para an谩lisis en tiempo real.
    - **Herramientas de testing y CI/CD**: como [Playwright](/testing/playwright/) o [E2E - End to End Testing](/testing/e2e---end-to-end-testing/) para validar que scraping funciona tras cambios en el sitio.
- **Relaci贸n entre cookies y integraciones**
    
    - Integraciones permiten que los scrapers reutilicen cookies y sesiones en distintos entornos o pipelines.
    - Ejemplo: un scraper extrae datos de un portal privado usando cookies y los env铆a autom谩ticamente a un dashboard de BI.
    - Manejo centralizado de cookies en pipelines facilita escalabilidad y evita problemas de expiraci贸n de sesi贸n.

## Casos de Uso Combinados

- Scraper que accede a un sitio de e-commerce con login, usando cookies de sesi贸n, y almacena productos y precios en una base de datos.
- Automatizaci贸n de scraping de reportes privados, integrando extracci贸n de datos, limpieza y env铆o a un servicio de an谩lisis.
- Validaci贸n peri贸dica de contenidos de portales internos corporativos mediante scrapers con cookies persistentes y pipelines de notificaci贸n.

## Ejemplo con Playwright y Pipeline

{% raw %}
```javascript
const { chromium } = require('playwright');
const { saveToDatabase } = require('./db');

(async () => {
	const browser = await chromium.launch();
	const page = await browser.newPage();

	await page.goto('https://example.com/login');
	await page.fill('#username', 'usuario');
	await page.fill('#password', 'contrase帽a');
	await page.click('#loginButton');
	await page.waitForSelector('#dashboard');

	// Obtener cookies
	const cookies = await page.context().cookies();
	// Reutilizar cookies en otros requests o scrapers
	await saveToDatabase(cookies);

	const data = await page.$$eval('.item', els => els.map(el => el.textContent.trim()));
	await saveToDatabase(data);

	await browser.close();
})();
```
{% endraw %}