---
date: 2024-11-21 18:17
title: mustache
tags:
  - template-engine
  - moodle
  - java
  - PHP
  - mustache
keywords:
source:
status: üåü
Parent: "[[Area-Prog]]"
cssclasses:
  - hide-embedded-header1
  - wide
categories:
  - Motor de plantillas
public_note: "true"
category: Motor de plantillas
---
# Mustache ‚Äî Fundamentos, Integraci√≥n y Casos Pr√°cticos
`$= dv.current().file.tags.join(" ")`

## Conceptos Clave
- motor de plantillas
- Mustache es un motor *logic-less* que separa completamente la l√≥gica de la presentaci√≥n.
- Sintaxis simple basada en ‚Äúmustaches‚Äù (`{{ }}`), portable entre lenguajes.
- Compatible con entornos como [PHP](/backend/php/), [java](/software%20engineering/java/), [Moodle](/desarrollo%20web/moodle/) y sistemas basados en JS.
- Ideal para:
	- Generar HTML, configuraciones, clases, ficheros y documentaci√≥n.
	- Integrarse con frameworks (p. ej. [Springboot](/backend/springboot/)).

## Recursos
- [mustache(5) - Logic-less templates.](https://mustache.github.io/mustache.5.html)
- [Mustache playground](https://jgonggrijp.gitlab.io/wontache/playground.html)
- [The Ultimate Mustache Tutorial](https://www.tsmean.com/articles/mustache/the-ultimate-mustache-tutorial/)
- [Introduction to Mustache | Baeldung](https://www.baeldung.com/mustache)
- [mustache - npm](https://www.npmjs.com/package/mustache)
- Parecido a Nunjucks doc oficial:
	- [Nunjucks](https://mozilla.github.io/nunjucks/)

## Videos
- [How to implement Mustache with Spring boot - YouTube](https://youtu.be/HUB_KQcEHnA) ‚Äî [Springboot](/backend/springboot/) [java](/software%20engineering/java/)
- [Code generation with Mustache Templates - YouTube](https://youtu.be/lMhgMhZOueE) ‚Äî JS  
	- csv, configs, clases, types, converters, api, code from inputs
- [Mustache Templates in Block: A Step-by-Step Tutorial - YouTube](https://youtu.be/uUB8CNvb6lg) ‚Äî [PHP](/backend/php/)
- [Mastering Mustache and PHP for SPA Development #105 - YouTube](https://youtu.be/B7hIR_Ii_d4) üî• [PHP](/backend/php/)
- [Creating A Single Page Application Using Mustache and PHP - DEV Community](https://dev.to/thedevdrawer/creating-a-single-page-application-using-mustache-and-php-38ej)

---

## Sintaxis Mustache
### Variables
``{{variable}}``
### Secciones

```
{{#items}}
{{name}}
{{/items}}
```

### Inversas
```
{{^items}}
No hay datos.
{{/items}}
```

### Comentarios
```
{{! Esto es un comentario }}
```

### Filtros (dependen del lenguaje)
```

{{{html_content}}}

```

---

## Mustache en PHP
- Motor muy ligero, ideal para SPAs con backend liviano.
- Se suele combinar con:
	- Routers minimalistas.
	- JSON como transporte y Mustache como render.
- Casos fuertes:
	- Render din√°mico por componentes.
	- Reutilizaci√≥n de vistas.
	- Plantillas anidadas.

### Ejemplo PHP
```
`<?php
require 'vendor/autoload.php';
$mustache = new Mustache_Engine;

$template = "Hola {{nombre}}";
$data = ["nombre" => "Eduardo"];

echo $mustache->render($template, $data);`
```


## Mustache en Java
- Integraci√≥n t√≠pica con [Springboot](/backend/springboot/) y controladores MVC.
- Ideal para:
	- Renderizar vistas ligeras.
	- Generar c√≥digo basado en plantillas (DTOs, configs, etc.).

### Ejemplo Java
```
MustacheFactory mf = new DefaultMustacheFactory();
Mustache mustache = mf.compile("saludo.mustache");

Map<String, Object> data = new HashMap<>();
data.put("nombre", "Eduardo");

StringWriter writer = new StringWriter();
mustache.execute(writer, data).flush();
System.out.println(writer.toString());
```

---

## Mustache en JavaScript
- Muy usado en generaci√≥n de archivos y herramientas de CLI.
- Flexible para pipelines de DevOps donde se generan configuraciones.

### Ejemplo JS
```
const Mustache = require("mustache");

const template = "Hola {{user}}";
const data = { user: "Eduardo" };

console.log(Mustache.render(template, data));
```

---

## Mustache en Moodle
- Sistema de plantillas oficial para UI.
- Permite separar completamente el HTML del PHP del core.
- Procesa datos provenientes de consultas SQL, APIs y formularios.
- Patr√≥n est√°ndar:
	- PHP obtiene datos ‚Üí Formatea el array ‚Üí Mustache renderiza.

### Enlaces Moodle
- [Moodle](/desarrollo%20web/moodle/)
- Ej: SQL ‚Üí template (transformaci√≥n en array asociativo).
- [GitHub - ramsharma12345/moodle_tutorial](https://github.com/ramsharma12345/moodle_tutorial/tree/main)
- [Moodle Tutorial for Developers (Part-1‚Ä¶) - YouTube](https://youtu.be/uJm9DoBCN1Q?list=PL5Kzdf98ofLtKCgtAqA3Xtz5bub_GZ5DI)

### Ejemplo Moodle
```
$templatecontext = [
	'users' => $DB->get_records_sql('SELECT id, firstname FROM {user}')
];

echo $OUTPUT->render_from_template('local_plugin/userlist', $templatecontext);
```

---

## Dise√±o y Organizaci√≥n de Plantillas
- Separar *layout* en:
	- cabecera.mustache
	- footer.mustache
	- bloques reutilizables
- Usar contextos bien formados:
	- No l√≥gica, solo datos procesados.
- Mantener coherencia sem√°ntica:
	- `{{#items}}` siempre con nombre plural.
	- Los √≠tems internos deben ser objetos uniformes.

## Patrones Avanzados
- Generaci√≥n de c√≥digo desde CSV:  
	- Leer CSV ‚Üí generar DTO, clases, configs.
- Generaci√≥n de APIs:  
	- Definir estructura en JSON ‚Üí renderizar endpoints.
- Componentes plug-and-play:  
	- Mustache como capa de presentaci√≥n compartida entre microservicios.
- Plantillas multilayer:
	- Plantilla base ‚Üí secciones ‚Üí subcomponentes.

## Ventajas
- Portabilidad total.
- Rendimiento alto.
- Adecuado para sistemas legacy, LMS como Moodle, o microservicios.

## Comparativa con Nunjucks
- Nunjucks ofrece m√°s l√≥gica y es m√°s ‚Äúplantilla completa‚Äù.
- Mustache es minimalista, ideal para entornos que necesitan neutralidad entre lenguajes.
