creation date: 2025-07-23 10:52
tags:
  - NAS
  - backup
  - sistemas
  - Infraestructura
keywords:
source:
status: üåü
Parent: "Area-Sistemas"
cssclasses:
  - hide-embedded-header1
categories: "[Sistemas](/sistemas/sistemas/)"
public_note: "true"
# NAS
``

- redes
- [Sistemas](/sistemas/sistemas/)
- [infraestructura IT](/infraestructura%20it/infraestructura-it/)

## Documentaci√≥n y recursos
- Servidores NAS qu√© son, c√≥mo funcionan y qu√© puedes hacer con uno-servidores-nas-que-como-funcionan-que-puedes-hacer-uno
- SAN vs NAS 7 diferencias fundamentales   Blog de Arsys-diferencias-nas-san-storage

## ¬øQu√© es un NAS?
- **NAS (Network Attached Storage)** es un sistema de almacenamiento conectado a red que ofrece **archivos compartidos** a m√∫ltiples clientes a trav√©s de protocolos est√°ndar.
- Funciona como un **servidor especializado en almacenamiento**, optimizado para acceso concurrente, alta disponibilidad y gesti√≥n centralizada.
- Se sit√∫a entre soluciones locales simples (discos USB) y arquitecturas complejas como [SAN](/sistemas/san/).

## Arquitectura NAS
- **Servidor NAS**
	- Hardware dedicado o virtualizado
	- CPU, RAM, controladoras de disco y NICs
- **Servicio NAS**
	- Sistema operativo especializado (ej: ONTAP, OneFS, QuTS, TrueNAS)
	- Gestiona vol√∫menes, permisos, snapshots y protocolos de red
- **Red IP**
	- Acceso mediante Ethernet est√°ndar
	- Integraci√≥n directa con infraestructuras TCPIP

## Almacenamiento distribuido
- Los datos se reparten entre m√∫ltiples nodos f√≠sicos
- Permite:
	- Alta disponibilidad
	- Tolerancia a fallos
	- Balanceo de carga autom√°tico
- Muy com√∫n en soluciones enterprise como Dell PowerScale y Qumulo

## Escalado horizontal
- Capacidad y rendimiento aumentan **a√±adiendo nodos**, no reemplazando hardware
- Asociado a arquitecturas de clusters
- Ventajas:
	- Crecimiento progresivo
	- Menor impacto operativo
	- Mejor aprovechamiento de recursos

## RAID y protecci√≥n de datos
- Uso de **RAID** para redundancia y rendimiento
- Combinado con:
	- Snapshots
	- Replicaci√≥n
	- Erasure Coding (en NAS distribuidos)
- Objetivo: proteger frente a fallos de disco y errores humanos

## Protocolos de acceso a archivos
- [Protocolos](/redes/protocolos/)
	- NFS (Network File System)
		- Muy usado en sistemas Linux y UNIX
		- Com√∫n en virtualizaci√≥n y contenedores
	- SMB (Server Message Block)
		- Protocolo nativo de Windows
		- Integraci√≥n con Active Directory
	- CIFS (Common Internet File System)
		- Versi√≥n antigua de SMB
		- Obsoleto en entornos modernos
- **Compartir archivos a trav√©s de red IP**
	- Acceso simult√°neo multiusuario
	- Control de permisos y cuotas
- **Relaci√≥n con SAMBA**
	- Samba implementa SMB/CIFS en sistemas Linux
	- Permite que un NAS Linux se integre con entornos Windows

## Red y conectividad
- TCPIP
	- Transmission Control Protocol
	- Internet Protocol
- Red Ethernet
	- 1GbE, 10GbE, 25GbE, 40GbE o superior
- Conexi√≥n remota
	- Acceso seguro mediante VPN
	- Uso habitual en teletrabajo y oficinas distribuidas

## Casos de uso principales
- **Archivos compartidos**
	- Documentaci√≥n corporativa
	- Home directories
- **Servidores multimedia**
	- Plex, Jellyfin
	- Streaming interno y remoto
- **Nube personal**
	- Nextcloud como alternativa a servicios p√∫blicos
	- Integraci√≥n con [cloud](/cloud/cloud/)
- **Bases de datos y aplicaciones**
	- Uso limitado a workloads orientados a archivos
	- No recomendado para I/O de bloque intensivo
- **Virtualizaci√≥n**
	- Almacenamiento para [VMware](/virtualizacion/vmware/)
	- Datastores NFS
- **VDI**
	- Soporte para [VDI Infraestructura de Escritorio Virtual](/virtualizacion/vdi-infraestructura-de-escritorio-virtual/)
	- Perfiles de usuario y datos persistentes

## Herramientas y soluciones NAS
### Dell Isilon / PowerScale
- NAS distribuido de alto rendimiento
- Orientado a:
	- Grandes vol√∫menes de datos no estructurados
	- Im√°genes
	- Registros (logs)
- Escalado horizontal masivo
- Sistema de archivos OneFS

### NetApp
- Amplia gama NAS y unificado
- ONTAP como sistema operativo
- Fuerte integraci√≥n con cloud h√≠brido
- Snapshots y replicaci√≥n avanzadas

### HPE Qumulo
- NAS distribuido moderno
- Enfocado en:
	- Anal√≠tica de datos
	- Media
	- IA/ML
- Alta visibilidad y observabilidad del rendimiento

## NAS vs SAN (resumen conceptual)
- NAS
	- Acceso a nivel de archivo
	- Protocolos NFS/SMB
	- Simplicidad y flexibilidad
- SAN
	- Acceso a nivel de bloque
	- Protocolos iSCSI / Fibre Channel
	- Mayor complejidad y rendimiento determinista

# NAS vs [SAN](/sistemas/san/)

NAS (Almacenamiento Conectado a la Red) y SAN (Red de √Årea de Almacenamiento) son dos tipos de soluciones de almacenamiento en red, pero funcionan de manera diferente.¬†==NAS es un sistema de archivos que funciona a nivel de archivos, mientras que SAN opera a nivel de bloques y presenta el almacenamiento a los servidores como discos locales==.¬†

NAS (Network Attached Storage):

- **Funcionamiento:**¬†NAS se conecta directamente a la red Ethernet y permite que m√∫ltiples usuarios y clientes accedan a los datos como archivos.¬†
- **Acceso a datos:**¬†Los datos se acceden y se gestionan como archivos.¬†
- **Ventajas:**¬†F√°cil de configurar y administrar, ideal para compartir archivos entre varios usuarios.¬†
- **Desventajas:**¬†Puede ser m√°s lento que SAN, especialmente en entornos de alta demanda.¬†

SAN (Storage Area Network):

- **Funcionamiento:**
    SAN es una red separada dedicada al almacenamiento, que utiliza tecnolog√≠as como Fibre Channel.¬†
- **Acceso a datos:**
    Presenta el almacenamiento a los servidores como discos locales, y el sistema operativo del servidor gestiona los datos a nivel de bloques.¬†
- **Ventajas:**
    Rendimiento superior, ideal para entornos con altas demandas de almacenamiento y rendimiento, como bases de datos o entornos virtualizados.¬†
- **Desventajas:**
    M√°s complejo de configurar y administrar, y generalmente m√°s costoso que NAS.¬†

En resumen:

| Caracter√≠stica  | NAS                               | SAN                                          |
| --------------- | --------------------------------- | -------------------------------------------- |
| Nivel de acceso | Archivos                          | Bloques                                      |
| Conexi√≥n        | Ethernet                          | Fibre Channel o Ethernet de alta velocidad   |
| Rendimiento     | Generalmente menor que SAN        | Generalmente mayor que NAS                   |
| Complejidad     | Menor                             | Mayor                                        |
| Costo           | Generalmente menor que SAN        | Generalmente mayor que NAS                   |
| Uso com√∫n       | Compartir archivos entre usuarios | Entornos de alto rendimiento, bases de datos |

La elecci√≥n entre NAS y SAN depende de las necesidades espec√≠ficas de cada entorno.¬†Si se requiere un almacenamiento simple y compartido, NAS es una buena opci√≥n.¬†Si se necesita un rendimiento superior y se trabaja con bases de datos o entornos virtualizados, SAN puede ser m√°s adecuada, seg√∫n indican varios art√≠culos en la red.

# NAS ‚Äî conceptos avanzados y temas no cubiertos

## Sistemas de archivos en NAS
- Sistema de archivos optimizado para acceso concurrente
- Diferente del filesystem local tradicional
- Ejemplos habituales:
	- ZFS
	- XFS
	- Btrfs
	- OneFS (PowerScale)
- Caracter√≠sticas clave:
	- Metadata distribuida
	- Locking de archivos
	- Consistencia en accesos simult√°neos

## Snapshots
- Copias puntuales del sistema de archivos
- No duplican datos inicialmente (copy-on-write)
- Usos principales:
	- Recuperaci√≥n ante borrados accidentales
	- Protecci√≥n frente a ransomware
	- Versionado de archivos
- Impacto m√≠nimo en rendimiento si est√°n bien gestionados

## Replicaci√≥n
- Sincronizaci√≥n de datos entre dos o m√°s NAS
- Modos habituales:
	- Replicaci√≥n s√≠ncrona
	- Replicaci√≥n as√≠ncrona
- Casos de uso:
	- Disaster Recovery
	- Continuidad de negocio
	- Backup remoto

## Alta disponibilidad (HA)
- Eliminaci√≥n de puntos √∫nicos de fallo
- Implementaciones comunes:
	- Controladoras activas/activas
	- Nodos activos/pasivos
	- Failover autom√°tico
- Integraci√≥n con clusters y almacenamiento distribuido

## Seguridad en NAS
- Control de acceso
	- Permisos POSIX
	- ACLs Windows
- Integraci√≥n con identidad
	- Active Directory
	- LDAP
- Cifrado
	- Datos en reposo
	- Datos en tr√°nsito
- Hardening
	- Deshabilitar protocolos obsoletos
	- Segmentaci√≥n de red

## Ransomware y protecci√≥n avanzada
- Inmutabilidad de snapshots
- WORM (Write Once Read Many)
- Detecci√≥n de comportamiento an√≥malo
- Recuperaci√≥n r√°pida de datos cifrados

## Rendimiento y tuning
- Factores clave:
	- Latencia de red
	- Tama√±o de bloque
	- Cach√© (RAM / NVMe)
- T√©cnicas habituales:
	- Tiering autom√°tico
	- Cache SSD/NVMe
	- Jumbo Frames
- Importancia de dimensionar seg√∫n workload

## NAS y contenedores
- Uso como backend de almacenamiento
- Integraci√≥n con:
	- Kubernetes
	- Docker
- Provisi√≥n mediante:
	- NFS Persistent Volumes
- Limitaciones frente a storage de bloque

## NAS en cloud e h√≠brido
- NAS desplegado en cloud p√∫blico
- Integraci√≥n on-prem + cloud
- Casos comunes:
	- Burst de capacidad
	- Backup en cloud
	- Replicaci√≥n entre regiones
- Ejemplos:
	- NetApp Cloud Volumes
	- Qumulo en cloud

## Observabilidad y monitoreo
- M√©tricas clave:
	- IOPS
	- Throughput
	- Latencia
- Alertas proactivas
- An√°lisis de patrones de uso
- Capacity planning basado en datos reales

## Automatizaci√≥n y APIs
- Gesti√≥n mediante APIs REST
- Infraestructura como c√≥digo
- Automatizaci√≥n de:
	- Provisionamiento de shares
	- Snapshots
	- Replicaci√≥n
- Integraci√≥n con herramientas DevOps

## NAS y cumplimiento normativo
- Retenci√≥n de datos
- Auditor√≠a de accesos
- Logs inmutables
- Cumplimiento de:
	- GDPR
	- ISO 27001
	- Normativas internas

## Limitaciones del NAS
- No √≥ptimo para:
	- I/O de baja latencia extrema
	- Bases de datos transaccionales intensivas
- Dependencia de red IP
- Escalabilidad vertical limitada en NAS no distribuidos

## Tendencias actuales en NAS
- Scale-out como est√°ndar
- Integraci√≥n con IA y anal√≠tica
- Mayor foco en ciberresiliencia
- NAS como servicio (NaaS)
- Convergencia con plataformas cloud

# NAS ‚Äî arquitectura, casos de uso y opciones de montaje

## Arquitectura NAS ‚Äî visi√≥n general
- Arquitectura orientada a **acceso a archivos sobre red IP**
- Separaci√≥n clara entre:
	- C√≥mputo cliente
	- Red
	- Almacenamiento centralizado
- Optimizada para acceso concurrente multiusuario

## Componentes de la arquitectura NAS
### Hardware
- Chasis con bah√≠as de disco
- Discos:
	- HDD (capacidad)
	- SSD / NVMe (rendimiento y cach√©)
- Interfaces de red Ethernet
- Controladoras de almacenamiento

### Software
- Sistema operativo NAS
- Sistema de archivos distribuido o local
- Servicios de red (NFS, SMB)
- Gesti√≥n de snapshots, replicaci√≥n y permisos

### Red
- Red Ethernet dedicada o compartida
- VLANs para aislamiento
- Integraci√≥n con infraestructura TCPIP

## Modelos de arquitectura NAS
### NAS standalone
- Un √∫nico nodo
- Escalado vertical
- Uso t√≠pico:
	- Peque√±as empresas
	- Laboratorios
	- Entornos dom√©sticos avanzados

### NAS en alta disponibilidad
- Dos o m√°s nodos
- Failover autom√°tico
- Acceso continuo ante fallos
- Com√∫n en entornos productivos

### NAS distribuido (scale-out)
- M√∫ltiples nodos formando un cl√∫ster
- Escalado horizontal
- Metadata y datos distribuidos
- Casos de uso enterprise y big data

## Arquitectura de acceso a datos
- Acceso a nivel de archivo
- Bloqueo y coherencia gestionados por el NAS
- Clientes acceden mediante:
	- NFS
	- SMB
- Transparente para el usuario final

## Casos de uso por perfil
### Oficinas y entornos corporativos
- Carpetas compartidas
- Home directories
- Colaboraci√≥n multiusuario
- Control de permisos centralizado

### Entornos IT y operaciones
- Almacenamiento de logs
- Backups centralizados
- Repositorios de im√°genes ISO
- Datos de monitorizaci√≥n

### Virtualizaci√≥n
- Datastores NFS para [VMware](/virtualizacion/vmware/)
- Almacenamiento de discos virtuales
- Snapshots externos a la VM
- Soporte para entornos [VDI Infraestructura de Escritorio Virtual](/virtualizacion/vdi-infraestructura-de-escritorio-virtual/)

### Desarrollo y testing
- Repositorios de builds
- Artefactos de CI/CD
- Datos compartidos entre entornos
- Integraci√≥n con pipelines

### Media, contenido y datos no estructurados
- Im√°genes
- V√≠deo
- Audio
- Renderizado y postproducci√≥n
- Plataformas como Plex y flujos multimedia

### Ciencia de datos e IA
- Data lakes basados en archivos
- Grandes vol√∫menes de datos no estructurados
- Integraci√≥n con pipelines de anal√≠tica
- Acceso concurrente desde m√∫ltiples nodos de c√≥mputo

### Nube privada y colaboraci√≥n
- Nextcloud como nube personal
- Sincronizaci√≥n multi-dispositivo
- Control total del dato
- Alternativa a servicios SaaS

## Opciones de montaje en clientes
### Montaje en Linux
- Montaje persistente mediante fstab
- Protocolos habituales:
	- NFS
	- SMB
- Permite integraci√≥n directa con aplicaciones y servicios

### Montaje en Windows
- Unidades de red
- Autenticaci√≥n con Active Directory
- Uso nativo de SMB
- Transparente para el usuario final

### Montaje en macOS
- Finder y automount
- Protocolos SMB y NFS
- Uso com√∫n en entornos creativos

### Montaje en hipervisores
- Datastores NFS
- Acceso directo desde el host
- Abstracci√≥n del almacenamiento para las VMs

### Montaje en contenedores
- Vol√∫menes persistentes
- NFS como backend
- Compartici√≥n de datos entre pods o servicios
- Uso com√∫n en Kubernetes

## Acceso remoto
- Acceso v√≠a VPN
- Exposici√≥n controlada de servicios
- Seguridad basada en red e identidad

## Consideraciones de dise√±o
- Dimensionar red antes que discos
- Separar tr√°fico de datos y gesti√≥n
- Dise√±ar permisos desde el inicio
- Pensar en crecimiento futuro
- Alinear arquitectura con el tipo de workload

## Errores comunes de arquitectura
- Usar NAS como SAN
- Subestimar latencia de red
- Mezclar workloads incompatibles
- No planificar backups ni replicaci√≥n
- Escalar tarde en arquitecturas no distribuidas
