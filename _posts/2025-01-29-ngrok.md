---
date: 2025-01-29 14:39
title: ngrok
keywords:
source:
status: üåü
Parent: "[[Area-Prog]]"
public_note: "true"
category: Backend
tags:
  - ngrock
  - api
  - tool
---
# ngrok
``

- [Backend](/backend/backend/)
## Descripci√≥n
- Herramienta para crear **t√∫neles seguros** que exponen servidores locales a Internet mediante una URL p√∫blica.
- Ideal para **desarrollo, pruebas y demos** de aplicaciones web que necesitan ser accesibles externamente sin desplegar en un servidor p√∫blico.
- Permite exponer **HTTP, HTTPS y TCP** de manera segura.

## Casos de uso
- Desarrollo de APIs locales y pruebas con **[webhooks](/backend/webhooks/)** externos.
- Acceso remoto a **servicios internos** sin necesidad de abrir puertos en el router.
- Exposici√≥n de **aplicaciones IoT** o contenedores a Internet.
- Demos r√°pidas de aplicaciones sin necesidad de configurar DNS o certificados.

## Caracter√≠sticas principales
- URLs p√∫blicas **temporalmente disponibles** para cada sesi√≥n.
- Soporta **subdominios personalizados** y URLs est√°ticas (en planes pagos).
- Integraci√≥n con **APIs y SDKs** para automatizar la creaci√≥n de t√∫neles.
- **Dashboard** web para monitoreo y estad√≠sticas de tr√°fico.
- Seguridad mediante **autenticaci√≥n b√°sica y tokens** para t√∫neles privados.
- Compatibilidad multiplataforma: Windows, Linux, macOS, Docker.

## Instalaci√≥n
{% raw %}
```bash
# Instalaci√≥n v√≠a Homebrew en macOS/Linux
brew install ngrok/ngrok/ngrok

# Instalaci√≥n en Windows con PowerShell
winget install ngrok
```
{% endraw %}`

## Uso b√°sico

{% raw %}
```bash
# Exponer un servidor local en el puerto 8080 con HTTP
ngrok http 8080

# Exponer un servidor TCP en el puerto 22 (SSH)
ngrok tcp 22

# Autenticaci√≥n con token de ngrok
ngrok config add-authtoken <TU_TOKEN>
```
{% endraw %}

## Integraciones y avanzadas

- API Gateway: Integraci√≥n para enrutar tr√°fico a servicios locales mediante ngrok.
- IoT Device Gateway: Permite que dispositivos IoT expongan servicios locales de manera segura.
- Secure Tunnels for Containers: Facilita la exposici√≥n de contenedores Docker sin necesidad de puertos p√∫blicos.
- Uso con frameworks como **Laravel, Node.js, Django** para pruebas externas r√°pidas.

## T√∫neles persistentes y subdominios personalizados
- En planes pagos, ngrok permite asignar **subdominios est√°ticos** y **URLs persistentes** que no cambian entre sesiones.
- √ötil para **webhooks en producci√≥n**, demos permanentes o integraci√≥n con servicios externos que requieren URLs fijas.

## Configuraci√≥n avanzada con `ngrok.yml`
- Archivo de configuraci√≥n en YAML que permite definir:
	- M√∫ltiples t√∫neles con diferentes puertos y protocolos.
	- Perfiles de usuario para separar entornos (desarrollo, staging, producci√≥n).
	- Opciones de seguridad como **auth**, **IP restrictions** y **region**.

{% raw %}
```yaml
tunnels:
  web:
    proto: http
    addr: 8080
    subdomain: myapp
    auth: "user:password"
  ssh:
    proto: tcp
    addr: 22
```
{% endraw %}`

## Inspecci√≥n de tr√°fico y depuraci√≥n

- **Dashboard web** para revisar logs, solicitudes y respuestas en tiempo real.
- Permite **replay** de requests para pruebas r√°pidas de APIs.
- Integraci√≥n con la API de ngrok para **automatizar an√°lisis y monitorizaci√≥n**.

## Seguridad avanzada

- Soporte HTTPS para todos los t√∫neles.
- Autenticaci√≥n b√°sica configurable por t√∫nel.
- Restricci√≥n de IPs y dominios permitidos.
- Tokens de acceso para manejar t√∫neles privados.

## Automatizaci√≥n y CI/CD

- Scripts para iniciar t√∫neles autom√°ticamente durante despliegues.
- Integraci√≥n con pipelines para pruebas externas de APIs o microservicios.
- Posibilidad de levantar t√∫neles temporales en contenedores o m√°quinas virtuales sin intervenci√≥n manual.

## Comparativa con alternativas

- [LocalTunnel](https://localtunnel.github.io/www/): simple, sin registro, pero menos estable y sin subdominios persistentes.
- [Serveo](https://serveo.net/): requiere SSH, sin cliente instalado, ideal para casos r√°pidos.
- Ventaja de ngrok: estabilidad, control avanzado, subdominios persistentes, dashboard y monitoreo.

## Limitaciones y consideraciones

- Conexi√≥n temporal en plan gratuito, URLs cambian cada sesi√≥n.
- Ancho de banda limitado en free tier.
- Dependencia de un servicio externo; para producci√≥n cr√≠tica se recomienda configuraci√≥n redundante o VPN.
- Posible latencia adicional por el t√∫nel.

# ngrok ‚Äî Casos de uso con ejemplos de c√≥digo

## Exponer un servidor HTTP local
- Escenario: Tienes un servidor web local corriendo en el puerto 3000 y quieres que sea accesible p√∫blicamente.
{% raw %}
```bash
# Inicia un t√∫nel HTTP en el puerto 3000
ngrok http 3000
```
{% endraw %}`

* Esto genera una URL p√∫blica como `https://abc123.ngrok.io` que puedes compartir.
* √ötil para pruebas de **APIs, demos o integraci√≥n con webhooks**.

## Exponer un servidor TCP (SSH)

* Escenario: Necesitas acceso remoto a un servidor local v√≠a SSH.

{% raw %}
```bash
# Inicia un t√∫nel TCP para SSH en el puerto 22
ngrok tcp 22
```
{% endraw %}

* ngrok te proporcionar√° una direcci√≥n como `tcp://0.tcp.ngrok.io:12345`.
* Puedes conectarte desde cualquier m√°quina:

{% raw %}
```bash
ssh usuario@0.tcp.ngrok.io -p 12345
```
{% endraw %}

## Configuraci√≥n de t√∫neles m√∫ltiples con `ngrok.yml`

* Escenario: Quieres exponer un servidor web y un SSH al mismo tiempo, con autenticaci√≥n b√°sica en el HTTP.

{% raw %}
```yaml
authtoken: <TU_TOKEN>
tunnels:
  web:
    proto: http
    addr: 3000
    subdomain: miapp
    auth: "admin:secret"
  ssh:
    proto: tcp
    addr: 22
```
{% endraw %}

* Comando para iniciar todos los t√∫neles:

{% raw %}
```bash
ngrok start --all
```
{% endraw %}

## Uso con webhooks

* Escenario: Integrar un servicio externo (GitHub, Stripe, Twilio) con un webhook en tu servidor local.

{% raw %}
```bash
ngrok http 5000
```
{% endraw %}

* GitHub webhook URL:

{% raw %}
```
https://abc123.ngrok.io/webhook
```
{% endraw %}

* Tu servidor local recibir√° las solicitudes externas directamente para pruebas y desarrollo.

## Uso en contenedores Docker

* Escenario: Tienes un contenedor corriendo una aplicaci√≥n y quieres exponerla sin abrir puertos.

{% raw %}
```bash
docker run -d -p 8080:8080 miapp
ngrok http 8080
```
{% endraw %}

* Genera una URL p√∫blica para que clientes externos puedan acceder al contenedor.

## Inspecci√≥n y replay de requests

* Inicia ngrok y accede al **dashboard web** en `http://127.0.0.1:4040`.
* Revisa solicitudes entrantes y su payload.
* Replay para pruebas autom√°ticas:

{% raw %}
```bash
curl -X POST http://127.0.0.1:4040/api/requests/<ID>/replay
```
{% endraw %}

## Automatizaci√≥n con scripts

* Escenario: Levantar t√∫neles autom√°ticamente al iniciar tu entorno de desarrollo.

{% raw %}
```bash
#!/bin/bash
# start-tunnel.sh
ngrok start --all &
echo "T√∫neles iniciados..."
```
{% endraw %}

* Puedes integrar este script en tu pipeline de CI/CD para exponer APIs temporales durante pruebas autom√°ticas.

## Seguridad avanzada

* Autenticaci√≥n en t√∫nel HTTP:

{% raw %}
```bash
ngrok http 3000 --auth="user:password"
```
{% endraw %}

* Restricci√≥n de regi√≥n:

{% raw %}
```bash
ngrok http 3000 --region=eu
```
{% endraw %}

* Solo accesible desde la regi√≥n europea, √∫til para cumplir pol√≠ticas de latencia o privacidad.


# ngrok 2025 ‚Äî Nota Actualizada con Recursos y Contexto

## Cambios recientes (2025)
- En **2025 ngrok sigue evolucionando con actualizaciones frecuentes del agente**, nuevas APIs, mejoras de seguridad y soporte ampliado para configuraciones avanzadas.  
- Se han agregado funciones como **Secrets para Traffic Policy**, mejoras en **TLS/TCP** y un **HTTP API interno `/api/endpoints`** que facilita programar y manejar t√∫neles desde scripts o aplicaciones.  

## Plataforma actual de ngrok
- ngrok ya no es solo un ‚Äút√∫nel de desarrollo‚Äù: es una **plataforma completa de Gateway para APIs, IoT, Kubernetes, y servicios empresariales con seguridad avanzada**.  
- Ofrece control de tr√°fico, autenticaci√≥n de identidad, balanceo global y observabilidad integrada para aplicaciones modernas.  

## Seguridad y cumplimiento de est√°ndares
- La **seguridad es un pilar** de ngrok: cifrado TLS por defecto, pol√≠ticas de acceso, autenticaci√≥n y capacidades auditables para revisiones de seguridad corporativa.  
- Hay documentaci√≥n y whitepapers disponibles para revisiones de compliance (SOC2, etc.).  

## Modelos de precios 2025
- El plan gratuito sigue siendo √∫til para desarrollo, pero con **limitaciones en t√∫neles simult√°neos, ancho de banda y configuraciones avanzadas**.  
- Las capas pagas a√±aden:
  - endpoints adicionales  
  - pol√≠ticas de tr√°fico  
  - identidad/autenticaci√≥n  
  - observabilidad  
  - dominios personalizados y SSO/RBAC en empresa.  

## Integraciones, SDKs y extensiones
- ngrok se integra con m√∫ltiples lenguajes y frameworks mediante **SDKs oficiales** (Python, Go, Rust, JavaScript, etc.).  
- Por ejemplo, **`pyngrok`** permite usar ngrok desde Python con m√©todos program√°ticos para crear y controlar t√∫neles.  

## Buenas pr√°cticas de uso en 2025
- **HTTPS por defecto y autenticaci√≥n** en t√∫neles p√∫blicos para evitar exposici√≥n no autorizada.  
- **Cerrar t√∫neles** cuando no se usen para no generar tr√°fico no deseado.  
- **Revisar logs y usar replay de solicitudes** para depurar integraciones (especialmente con webhooks).  
- **Mantener la herramienta actualizada** con el agente v3.x dado que recibe mejoras continuas.  

## Limitaciones actuales (2025)
- El plan gratuito no ofrece **subdominios est√°ticos ni branding de dominios** sin pago.  
- Algunas pol√≠ticas de tr√°fico avanzadas o manipulaci√≥n de headers **requieren plan pago**.  
- La sesi√≥n gratuita puede desconectarse tras cierto periodo si no est√° configurada con cuenta.  

## Recursos oficiales (2025)
- [Documentaci√≥n principal de ngrok](https://ngrok.com/docs)  
- [Dashboard y configuraci√≥n de Tokens](https://dashboard.ngrok.com)  
- [API Reference de ngrok](https://ngrok.com/docs/api)  
- [Changelog y notas de versi√≥n](https://ngrok.com/docs/whats-new)  

## Consideraciones sobre alternativas
- Existen alternativas como [InstaTunnel](https://instatunnel.my/blog/complete-guide-to-ngrok-for-secure-development-and-testing) que promueven menos restricciones en la capa gratuita y ofrecen duraci√≥n de sesiones m√°s largas o t√∫neles m√∫ltiples sin coste adicional.  
- Para setups m√°s controlados y aut√≥nomos, opciones self-hosted como **zrok** o t√∫neles basados en software libre pueden ser exploradas.
