---
date: 2024-11-24 17:25
title: axios
tags:
  - axios
  - backend
  - api
  - nodejs
  - SWR
  - JS
keywords:
source:
status: üåü
Parent: "[[Area-Prog]]"
cssclasses:
  - hide-embedded-header1
  - wide
categories:
  - Backend
public_note: "true"
category: Backend
---
# axios
`$= dv.current().file.tags.join(" ")`

- [Backend](/uncategorized/backend/)
- [api](/backend/api/)
- [node.js](/backend/node-js/)

## Descripci√≥n general
**Axios** es una librer√≠a basada en **promesas** que facilita el consumo de [api](/backend/api/)s HTTP desde el navegador o desde [node.js](/backend/node-js/). Su sintaxis y dise√±o permiten una gesti√≥n clara de peticiones, respuestas, interceptores, y errores, mejorando la legibilidad y mantenimiento del c√≥digo frente a `fetch`.

- Documentaci√≥n oficial: [axios](https://axios-http.com/es/docs/intro)
- Concepto de promesas: [Promise - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)

## Caracter√≠sticas principales
- Soporte nativo para **promesas** (`async/await` o `.then/.catch`).
- Permite configurar un **cliente HTTP personalizado** con cabeceras, baseURL y tiempos de espera.
- **Interceptores** para manipular peticiones y respuestas globalmente (ideal para tokens JWT o logs).
- Serializaci√≥n autom√°tica de JSON.
- Compatibilidad tanto con navegador como con [node.js](/backend/node-js/).
- Cancelaci√≥n de peticiones (√∫til para abortar llamadas en componentes desmontados en [react](/frontend/react/) o [nextjs](/frontend/nextjs/)).
- Soporte para transformaciones de datos antes y despu√©s de la respuesta.
- Ideal para centralizar el estado o l√≥gica de datos (similar a SWR o RTK Query).

## Comparativa: axios vs fetch vs promises
| Caracter√≠stica | Axios | Fetch | Promises |
|----------------|--------|--------|-----------|
| Basado en Promesas | ‚úÖ | ‚úÖ | ‚úÖ |
| Manejo autom√°tico de JSON | ‚úÖ | ‚ùå (requiere `.json()`) | ‚Äî |
| Interceptores | ‚úÖ | ‚ùå | ‚Äî |
| Cancelaci√≥n de peticiones | ‚úÖ | ‚úÖ (AbortController) | ‚Äî |
| Configuraci√≥n global | ‚úÖ | ‚ùå | ‚Äî |
| Compatibilidad Node.js | ‚úÖ | ‚ö†Ô∏è (limitada) | ‚Äî |
| Manejo de errores HTTP | ‚úÖ | ‚ùå (no lanza error por 4xx/5xx) | ‚Äî |

**Conclusi√≥n:** Axios ofrece una capa de abstracci√≥n m√°s robusta que `fetch`, con mejor gesti√≥n de errores, configuraciones y cancelaciones, haci√©ndolo ideal para aplicaciones de [Frontend](/uncategorized/frontend/) y [Backend](/uncategorized/backend/) modernos.

## Uso b√°sico

### Ejemplo de solicitud GET
{% raw %}
```js
import axios from 'axios';

async function obtenerDatos() {
	try {
		const respuesta = await axios.get('https://api.ejemplo.com/usuarios');
		console.log(respuesta.data);
	} catch (error) {
		console.error('Error al obtener datos:', error);
	}
}
```
{% endraw %}`

### Ejemplo de solicitud POST

{% raw %}
```js
import axios from 'axios';

async function crearUsuario(usuario) {
	try {
		const respuesta = await axios.post('https://api.ejemplo.com/usuarios', usuario);
		console.log('Usuario creado:', respuesta.data);
	} catch (error) {
		console.error('Error al crear usuario:', error);
	}
}
```
{% endraw %}

## Configuraci√≥n avanzada

### Instancia personalizada

Permite crear un cliente HTTP con configuraciones reutilizables (baseURL, headers, timeouts, etc.):

{% raw %}
```js
import axios from 'axios';

const api = axios.create({
	baseURL: 'https://api.miapp.com',
	timeout: 5000,
	headers: { 'Authorization': 'Bearer token' }
});
```
{% endraw %}

### Interceptores

Los interceptores permiten interceptar peticiones o respuestas globalmente antes de ser manejadas.

{% raw %}
```js
api.interceptors.request.use(config => {
	console.log('Petici√≥n saliente:', config.url);
	return config;
}, error => Promise.reject(error));

api.interceptors.response.use(response => response.data, error => {
	if (error.response?.status === 401) {
		console.warn('No autorizado');
	}
	return Promise.reject(error);
});
```
{% endraw %}

## Integraci√≥n con SWR y [nextjs](/frontend/nextjs/)

Axios se puede integrar f√°cilmente con SWR para optimizar el fetching de datos en aplicaciones [nextjs](/frontend/nextjs/):

{% raw %}
```js
import useSWR from 'swr';
import axios from 'axios';

const fetcher = url => axios.get(url).then(res => res.data);

export default function Usuarios() {
	const { data, error } = useSWR('/api/usuarios', fetcher);

	if (error) return <div>Error al cargar</div>;
	if (!data) return <div>Cargando...</div>;

	return (
		<ul>
			{data.map(usuario => <li key={usuario.id}>{usuario.nombre}</li>)}
		</ul>
	);
}
```
{% endraw %}

## Casos de uso comunes

* Consumo de APIs REST o GraphQL desde frontend o backend.
* Manejo centralizado de tokens de autenticaci√≥n.
* Registro de logs de tr√°fico HTTP.
* Implementaci√≥n de reintentos autom√°ticos con estrategias de backoff.
* Integraci√≥n con Redux Toolkit Query o TanStack Query.

## Recursos relacionados

* Comienza ‚Äì SWR
* HTTP
* fetch
* [api](/backend/api/)
* [Backend](/uncategorized/backend/)
* [node.js](/backend/node-js/)
* [nextjs](/frontend/nextjs/)

# axios - conceptos ampliados

## Arquitectura y flujo interno
Axios se basa en un patr√≥n de **adaptadores** que abstrae las diferencias entre entornos.  
- En el **navegador** usa `XMLHttpRequest` (XHR).  
- En **Node.js** usa el m√≥dulo nativo `http`/`https`.  
Esto le permite mantener la misma API en ambos entornos, simplificando la compatibilidad full-stack.

El flujo b√°sico:
1. Configuraci√≥n ‚Üí interceptores de petici√≥n ‚Üí adaptador HTTP ‚Üí respuesta ‚Üí interceptores de respuesta ‚Üí devoluci√≥n de la promesa.

## Adaptadores personalizados
Axios permite definir **adaptadores propios** para modificar la forma en que se env√≠an las solicitudes (por ejemplo, para integrar con entornos IoT, WebSocket o servicios mock).

{% raw %}
```js
const customAdapter = async config => {
	console.log('Petici√≥n interceptada por adaptador:', config.url);
	return {
		data: { mensaje: 'Mocked' },
		status: 200,
		statusText: 'OK',
		headers: {},
		config
	};
};

const api = axios.create({ adapter: customAdapter });
api.get('/prueba').then(console.log);
```
{% endraw %}`

## Manejo de errores

Axios distingue entre distintos tipos de error:

* **Errores de red:** desconexiones, timeouts, DNS, etc.
* **Errores HTTP:** respuestas con `status >= 400`.
* **Errores de configuraci√≥n:** par√°metros inv√°lidos o adaptadores mal definidos.

{% raw %}
```js
axios.get('/endpoint')
	.catch(error => {
		if (error.response) console.error('Error HTTP:', error.response.status);
		else if (error.request) console.error('Error de red o sin respuesta');
		else console.error('Error de configuraci√≥n:', error.message);
	});
```
{% endraw %}

## Transformaciones de datos

Permite modificar datos **antes de enviar** o **despu√©s de recibir** la respuesta.

{% raw %}
```js
axios.post('/usuario', { nombre: 'Juan' }, {
	transformRequest: [(data) => JSON.stringify({ ...data, activo: true })],
	transformResponse: [(data) => JSON.parse(data).usuario]
});
```
{% endraw %}

## Cancelaci√≥n y control de concurrencia

La API moderna usa `AbortController` para cancelar peticiones, lo que evita fugas de memoria en componentes desmontados.

{% raw %}
```js
const controller = new AbortController();
axios.get('/lento', { signal: controller.signal });
controller.abort(); // cancela la solicitud
```
{% endraw %}

Tambi√©n es posible implementar **colas o l√≠mites de concurrencia**, ideal para sistemas con alto tr√°fico.

## Reintentos autom√°ticos y backoff exponencial

Axios no tiene reintentos nativos, pero puede combinarse con estrategias personalizadas:

{% raw %}
```js
async function fetchConReintento(url, intentos = 3, delay = 1000) {
	for (let i = 0; i < intentos; i++) {
		try {
			return await axios.get(url);
		} catch (e) {
			if (i === intentos - 1) throw e;
			await new Promise(r => setTimeout(r, delay * (2 ** i)));
		}
	}
}
```
{% endraw %}

## Axios y autenticaci√≥n

Se integra f√°cilmente con esquemas de autenticaci√≥n:

* **Bearer Tokens / JWT:** usando interceptores.
* **Cookies y sesiones:** configurando `withCredentials: true`.
* **OAuth2 / API Keys:** agregando headers o par√°metros autom√°ticos.

{% raw %}
```js
api.interceptors.request.use(config => {
	const token = localStorage.getItem('jwt');
	if (token) config.headers.Authorization = `Bearer ${token}`;
	return config;
});
```
{% endraw %}

## Integraci√≥n con frameworks y ecosistemas

### [nextjs](/frontend/nextjs/)

En [nextjs](/frontend/nextjs/), Axios se puede usar tanto en el **cliente** como en el **servidor** (dentro de `getServerSideProps` o `route handlers`), compartiendo la misma l√≥gica de fetching.

### [react](/frontend/react/)

Ideal para hooks personalizados:

{% raw %}
```js
import { useState, useEffect } from 'react';
import axios from 'axios';

export function useAxios(url) {
	const [data, setData] = useState(null);
	const [loading, setLoading] = useState(true);
	const [error, setError] = useState(null);

	useEffect(() => {
		const controller = new AbortController();
		axios.get(url, { signal: controller.signal })
			.then(res => setData(res.data))
			.catch(setError)
			.finally(() => setLoading(false));

		return () => controller.abort();
	}, [url]);

	return { data, loading, error };
}
```
{% endraw %}

### express y [Backend](/uncategorized/backend/)

Axios tambi√©n puede actuar como **cliente de microservicios** en entornos [node.js](/backend/node-js/), conectando servicios internos o externos:

* Comunicaci√≥n entre APIs internas.
* Solicitudes hacia servicios de terceros (Stripe, Google APIs, etc.).
* Middleware que unifica peticiones antes de enviarlas al frontend.

## Buenas pr√°cticas

* Centralizar la configuraci√≥n en una instancia com√∫n.
* Implementar interceptores para logs, m√©tricas y control de errores.
* Usar `baseURL` y `timeout` coherentes con el entorno (dev, staging, prod).
* Evitar anidar promesas: siempre preferir `async/await`.
* Manejar cancelaciones y reintentos para evitar saturaci√≥n.

## Ecosistema y extensiones √∫tiles

* **axios-retry:** reintentos autom√°ticos con backoff configurable.
* **axios-cache-adapter:** cachea respuestas HTTP en memoria o IndexedDB.
* **axios-mock-adapter:** mocking de endpoints para tests o desarrollo.
* **axios-hooks:** integraci√≥n directa con React.

## Comparativa con otras librer√≠as

| Librer√≠a                 | Ventajas                                                                      | Desventajas                               |
| ------------------------ | ----------------------------------------------------------------------------- | ----------------------------------------- |
| **Axios**                | Interceptores, compatibilidad Node/browser, cancelaci√≥n, configuraci√≥n global | Tama√±o mayor que `fetch`                  |
| **Fetch**                | Nativo, liviano, soporta Streams                                              | Sin interceptores ni configuraci√≥n global |
| **Got**                  | Ideal para [node.js](/backend/node-js/), soporte de reintentos y streaming                      | No apto para navegador                    |
| **SWR / TanStack Query** | Cach√©, revalidaci√≥n autom√°tica                                                | Dependen de un cliente como Axios o Fetch |

## T√≥picos relacionados

* HTTP
* REST
* fetch
* promesas
* SWR
* [nextjs](/frontend/nextjs/)
* [Backend](/uncategorized/backend/)
* [node.js](/backend/node-js/)
* [api](/backend/api/)
* Middleware
* Microservicios



