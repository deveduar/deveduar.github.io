---
date: 2025-12-07 13:48
title: lit
keywords:
source:
status: üåü
Parent: "[[Area-Prog]]"
public_note: "true"
category: Frontend
tags:
  - lit
  - framework
  - frontend
  - microfrontend
---
# Lit 
`$= dv.current().file.tags.join(" ")`

[Web Components](/frontend/web-components/)  
[Frontend](/uncategorized/frontend/)  
What is Lit ‚Äì Lit-

## Qu√© es Lit
Lit es un framework/librer√≠a ligera para construir interfaces usando [Web Components](/frontend/web-components/). Se centra en:
- Rendimiento mediante actualizaciones reactivas basadas en cambios m√≠nimos.
- Uso de est√°ndares nativos del navegador (Custom Elements, Shadow DOM, Templates).
- Sintaxis declarativa con JavaScript y plantillas con tagged template literals.

## Filosof√≠a y Ventajas Clave
- **Nativo primero**  
	Lit se apoya directamente en APIs del navegador evitando capas extra como VDOMs o compiladores pesados.
- **Ligereza real**  
	Su core ronda los pocos KB, lo que reduce TTI (Time To Interactive).
- **Compatibilidad**  
	Funciona con cualquier framework y en cualquier entorno donde Web Components sean soportados.
- **Escalabilidad**  
	Buen rendimiento en apps grandes gracias a renders granulares y uso eficiente del Shadow DOM.

## Componentes con Lit
- Declaraci√≥n simple usando `LitElement`.
- Propiedades reactivas con decoradores.
- Estilos encapsulados.
- Renders eficientes con plantillas literales.

### Ejemplo b√°sico
{% raw %}
```ts
import { LitElement, html, css } from 'lit';

class MyElement extends LitElement {
	static styles = css`
		p { color: blue; }
	`;

	render() {
		return html`<p>Hola desde Lit</p>`;
	}
}
customElements.define('my-element', MyElement);
```
{% endraw %}`

## Reactividad y Ciclo de Vida

* **Propiedades reactivas**
  Los cambios en propiedades marcadas con `@property` disparan actualizaciones autom√°ticas del DOM.
* **Update lifecycle**
  M√©todos como `willUpdate`, `updated`, `shouldUpdate` permiten control fino del render.
* **Templates diferenciales**
  Solo las partes marcadas cambian, reduciendo operaciones DOM.

## Estilos y Shadow DOM

* **Encapsulamiento**
  Los estilos se aplican solo dentro del componente.
* **CSS custom properties**
  Permiten theming sin romper encapsulaci√≥n.
* **Declaraci√≥n de estilos est√°ticos**
  Se eval√∫an una vez y se reutilizan.

## Renderizado Avanzado y Directivas

Lit introduce directivas para comportamientos declarativos m√°s complejos:

* `repeat` para listas eficientes.
* `classMap` y `styleMap` para manipular clases/estilos.
* `until` para async templates.
* `ifDefined` para atributos condicionales.

### Ejemplo con directivas

{% raw %}
```ts
import { html } from 'lit';
import { repeat } from 'lit/directives/repeat.js';

const list = ['a','b','c'];
html`${repeat(list, i => i, item => html`<p>${item}</p>`)}`;
```
{% endraw %}

## Arquitectura y Patrones con Lit

* **Composici√≥n**
  La aplicaci√≥n se divide en peque√±os Web Components totalmente aislados.
* **Contenedor / Presentaci√≥n**
  Datos y l√≥gica se manejan arriba; componentes Lit se encargan de UI pura.
* **Integraci√≥n progresiva**
  Puedes usar Lit dentro de apps React, Vue, Angular o viceversa.
* **Server Rendering (SSR)**
  Lit soporta SSR mediante lit-ssr y streaming partial hydration.
* **Control de estado**
  Se suele combinar con:

  * Stores externos (MobX, Redux Toolkit)
  * Signals o stores reactivos propios del proyecto
  * Comunicaci√≥n por eventos customizados o contextos (lit-labs/context)

## Lit vs Otros Frameworks (2025)

* **React / Vue / Svelte**
  Lit es m√°s cercano al est√°ndar, m√°s ligero y m√°s interoperable.
* **Stencil**
  Stencil es m√°s framework orientado a DX y compilaci√≥n; Lit es m√°s directo, runtime-first.
* **Vanilla Web Components**
  Lit reduce boilerplate y provee reactividad, plantillas y patrones comunes.

## Testing y Herramientas

* **@web/test-runner** para pruebas nativas.
* **Playwright** para E2E.
* **lit-testing-library** para tests accesibles y simples.

## Casos de Uso

* Design systems
* Microfrontends
* Apps altamente compartimentadas
* Embeddables para terceros
* Web apps sin framework grande

## Recursos Recomendados (formato Obsidian)

* [Documentaci√≥n oficial](https://lit.dev)
* [Gu√≠a de componentes](https://lit.dev/docs/components/overview/)
* [SSR y rendering](https://lit.dev/docs/ssr/overview/)
* [Labs y paquetes experimentales](https://lit.dev/docs/labs/overview/)
* [Repositorio GitHub](https://github.com/lit/lit)

# Lit ‚Äî Conceptos avanzados y temas pendientes (expansi√≥n sin repetir)

A continuaci√≥n se ampl√≠an los **conceptos que a√∫n no estaban cubiertos** o que necesitan una **profundizaci√≥n adicional**, sin repetir nada de la nota anterior.  
Esta es una *nota complementaria* centrada en completar el mapa conceptual de Lit (2025).

## 1. Motor de Plantillas (Template Engine Interno)
Lit utiliza un motor propio basado en *template literals analizados una sola vez*.  
Conceptos adicionales:
- **Template caching**  
	Los templates se parsean una sola vez; los cambios en runtime solo actualizan partes din√°micas.
- **Part System**  
	Cada expresi√≥n din√°mica crea un ‚ÄúPart‚Äù (NodePart, AttributePart, PropertyPart, etc.), responsables de actualizar solo su fragmento.
- **DOM real, no VDOM**  
	El algoritmo de updates es posicional: evita reconciliaciones de nodos complejas.

## 2. Estrategias de Hidrataci√≥n y SSR Avanzado
Lit introduce varias estrategias modernas (2024‚Äì2025):
- **Streaming SSR**  
	Permite env√≠o progresivo del HTML desde el servidor.
- **Partial Hydration**  
	Solo se hidratan las partes del componente con interactividad real.
- **Islas Interactivas**  
	Integraci√≥n con arquitecturas *islands* (Astro, Enhance, Fresh) sin adaptadores externos.
- **Hydration mismatch recovery**  
	Mecanismos para corregir peque√±as diferencias entre HTML del servidor y cliente.

## 3. Lit + Web Components: Integraciones Especializadas
Conceptos no cubiertos antes:
- **ElementInternals**  
	Permite soporte nativo para:
	- Form-associated custom elements  
	- Validaci√≥n nativa  
	- CSS shadow parts  
- **Slots avanzados**  
	Control de distribuci√≥n din√°mica de contenido:
	- `slotchange` reactividad
	- Reconexi√≥n de nodos cuando cambian hosts

## 4. Patrones de Arquitectura Avanzados en Lit
- **Smart Boundary Components**  
	Componentes l√≠mite que centralizan manejo de eventos, delegando UI a componentes presentacionales.
- **Context API (lit-labs/context)**  
	Evitar prop drilling en estructuras profundas de componentes.
- **Provider Patterns**  
	Patrones similares a React Context pero nativos para Web Components.
- **Scoped Event Dispatching**  
	En Lit se aprovecha el *event retargeting* del Shadow DOM para evitar colisiones.

## 5. Data Binding Avanzado
Lit no hace two-way binding autom√°tico, pero existen patrones:
- **Bindings manuales** con eventos `input` + propiedades reactivas.
- **Custom two-way binding** mediante eventos personalizados:
	- Ejemplo: `<my-input .value=${state} @change=${(e)=>state=e.detail}>`
- **Bindings para atributos booleanos y enumerados** mediante `ifDefined`.

## 6. Directivas Avanzadas (No mencionadas antes)
- **`cache`**  
	Evita re-render de sub√°rboles cuyo template no cambia.
- **`live`**  
	Sincroniza inputs con el DOM aun cuando el valor del template no cambie.
- **`guard`**  
	Re-renderiza solo si cambian las dependencias.
- **`ref`**  
	Referencias seguras a nodos del DOM sin hacks ni `querySelector`.

### Ejemplo corto (cache + guard)
{% raw %}
```ts
import { html } from 'lit';
import { cache } from 'lit/directives/cache.js';
import { guard } from 'lit/directives/guard.js';

html`${guard([userId], () => cache(html`<user-card .id=${userId}></user-card>`))}`;
```
{% endraw %}`

## 7. Animaciones en Lit

* **Element-based animations** usando Web Animations API (WAAPI).
* **Declarative animations**:
	* Re-render din√°mico que desencadena animaciones CSS.
* **Integraci√≥n con Motion One** o AnimeJS sin adaptadores especiales.

## 8. Seguridad y Sanitizaci√≥n

Lit aplica **sanitizaci√≥n autom√°tica** para:

* HTML
* URLs
* Scripts
* Atributos peligrosos

Adem√°s:
* `unsafeHTML` y `unsafeSVG` requieren uso expl√≠cito y consciente.
* Sanitizaci√≥n configurable mediante `UnsafeStatic` + pol√≠tica del proyecto.

## 9. Distribuci√≥n y Empaquetado (Build)

* **lit-plugin para Vite**
  Optimizaci√≥n de templates, minificaci√≥n de CSS y tree-shaking.
* **Compilaci√≥n incremental**
  Reduce tama√±o gracias a eliminar partes no usadas de m√≥dulos lit.
* **Bundle-less**
  Lit funciona incluso sin bundler.

## 10. Server Components (Perspectiva 2025)

Lit incorpora compatibilidad experimental hacia:

* **Lit Server Components (LSC)**
  Concepto equivalente a React Server Components pero basado en:
  * Render est√°tico parcial
  * Serializaci√≥n de props
  * Event binding minimal
    A√∫n en evoluci√≥n pero usable en entornos controlados.

## 11. Accesibilidad Avanzada (A11y)

* Gesti√≥n de roles ARIA interna.
* `ElementInternals` permite:
  * `internals.role`
  * `internals.aria*`
  * Comunicaci√≥n nativa con lectores de pantalla.
* Componentes compatibles con formularios sin hacks.

## 12. Lit en Microfrontends

Lit es especialmente adecuado para:

* **M√≥dulos completamente aislados** por Shadow DOM.
* **Interop sin framework** entre m√∫ltiples equipos.
* **Est√°ndares del navegador como contrato** en lugar del framework.

Patrones importantes:

* Custom Elements versionados.
* Federation con Module Federation o import-maps.
* Edge rendering + hydration m√≠nima.

## 13. Lit como Base de Design Systems

Conceptos clave:

* Tokenizaci√≥n v√≠a CSS Custom Properties.
* Theming din√°mico con cascada del Shadow DOM.
* Variants API mediante atributos / properties.
* Hojas de estilo globales con `adoptedStyleSheets`.

## 14. Ecosistema Extendido

Herramientas que completan el trabajo con Lit:

* **Open WC** (generadores, testing, linting)
* **WCC (Web Component Compiler)** para DX moderna sin perder runtime Lit
* **Lit Labs** para APIs experimentales
* **Storybook / Ladle** para documentar componentes

## 15. Checklist de Temas Cubiertos

En este punto ya se han cubierto:

* Lit b√°sico
* Render reactivo
* Directivas esenciales y avanzadas
* Arquitectura y patrones
* SSR, hidrataci√≥n, islas
* Integraciones Web Components + Lit
* Estilos, Shadow DOM, Encapsulaci√≥n
* Testing
* Microfrontends
* Seguridad y sanitizaci√≥n
* Design systems
* Animaciones
* Empaquetado, rendimiento y DX
* Server Components (2025)

**No quedan grandes √°reas sin cubrir en el ecosistema actual de Lit.**
Cualquier cosa futura o experimental entrar√≠a fuera del alcance actual del framework estable en 2025.


